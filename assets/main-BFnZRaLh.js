(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function Af(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ql={exports:{}},ii={},Xl={exports:{}},je={};var Ih;function Nm(){if(Ih)return je;Ih=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function _(S){return S===null||typeof S!="object"?null:(S=w&&S[w]||S["@@iterator"],typeof S=="function"?S:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,R={};function k(S,I,re){this.props=S,this.context=I,this.refs=R,this.updater=re||x}k.prototype.isReactComponent={},k.prototype.setState=function(S,I){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,I,"setState")},k.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function T(){}T.prototype=k.prototype;function B(S,I,re){this.props=S,this.context=I,this.refs=R,this.updater=re||x}var M=B.prototype=new T;M.constructor=B,j(M,k.prototype),M.isPureReactComponent=!0;var D=Array.isArray,H=Object.prototype.hasOwnProperty,K={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function te(S,I,re){var se,fe={},ve=null,ke=null;if(I!=null)for(se in I.ref!==void 0&&(ke=I.ref),I.key!==void 0&&(ve=""+I.key),I)H.call(I,se)&&!W.hasOwnProperty(se)&&(fe[se]=I[se]);var xe=arguments.length-2;if(xe===1)fe.children=re;else if(1<xe){for(var Ee=Array(xe),tt=0;tt<xe;tt++)Ee[tt]=arguments[tt+2];fe.children=Ee}if(S&&S.defaultProps)for(se in xe=S.defaultProps,xe)fe[se]===void 0&&(fe[se]=xe[se]);return{$$typeof:n,type:S,key:ve,ref:ke,props:fe,_owner:K.current}}function de(S,I){return{$$typeof:n,type:S.type,key:I,ref:S.ref,props:S.props,_owner:S._owner}}function ee(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function G(S){var I={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(re){return I[re]})}var ne=/\/+/g;function q(S,I){return typeof S=="object"&&S!==null&&S.key!=null?G(""+S.key):I.toString(36)}function X(S,I,re,se,fe){var ve=typeof S;(ve==="undefined"||ve==="boolean")&&(S=null);var ke=!1;if(S===null)ke=!0;else switch(ve){case"string":case"number":ke=!0;break;case"object":switch(S.$$typeof){case n:case t:ke=!0}}if(ke)return ke=S,fe=fe(ke),S=se===""?"."+q(ke,0):se,D(fe)?(re="",S!=null&&(re=S.replace(ne,"$&/")+"/"),X(fe,I,re,"",function(tt){return tt})):fe!=null&&(ee(fe)&&(fe=de(fe,re+(!fe.key||ke&&ke.key===fe.key?"":(""+fe.key).replace(ne,"$&/")+"/")+S)),I.push(fe)),1;if(ke=0,se=se===""?".":se+":",D(S))for(var xe=0;xe<S.length;xe++){ve=S[xe];var Ee=se+q(ve,xe);ke+=X(ve,I,re,Ee,fe)}else if(Ee=_(S),typeof Ee=="function")for(S=Ee.call(S),xe=0;!(ve=S.next()).done;)ve=ve.value,Ee=se+q(ve,xe++),ke+=X(ve,I,re,Ee,fe);else if(ve==="object")throw I=String(S),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return ke}function O(S,I,re){if(S==null)return S;var se=[],fe=0;return X(S,se,"","",function(ve){return I.call(re,ve,fe++)}),se}function C(S){if(S._status===-1){var I=S._result;I=I(),I.then(function(re){(S._status===0||S._status===-1)&&(S._status=1,S._result=re)},function(re){(S._status===0||S._status===-1)&&(S._status=2,S._result=re)}),S._status===-1&&(S._status=0,S._result=I)}if(S._status===1)return S._result.default;throw S._result}var F={current:null},P={transition:null},V={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:P,ReactCurrentOwner:K};function z(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:O,forEach:function(S,I,re){O(S,function(){I.apply(this,arguments)},re)},count:function(S){var I=0;return O(S,function(){I++}),I},toArray:function(S){return O(S,function(I){return I})||[]},only:function(S){if(!ee(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},je.Component=k,je.Fragment=s,je.Profiler=o,je.PureComponent=B,je.StrictMode=i,je.Suspense=m,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,je.act=z,je.cloneElement=function(S,I,re){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var se=j({},S.props),fe=S.key,ve=S.ref,ke=S._owner;if(I!=null){if(I.ref!==void 0&&(ve=I.ref,ke=K.current),I.key!==void 0&&(fe=""+I.key),S.type&&S.type.defaultProps)var xe=S.type.defaultProps;for(Ee in I)H.call(I,Ee)&&!W.hasOwnProperty(Ee)&&(se[Ee]=I[Ee]===void 0&&xe!==void 0?xe[Ee]:I[Ee])}var Ee=arguments.length-2;if(Ee===1)se.children=re;else if(1<Ee){xe=Array(Ee);for(var tt=0;tt<Ee;tt++)xe[tt]=arguments[tt+2];se.children=xe}return{$$typeof:n,type:S.type,key:fe,ref:ve,props:se,_owner:ke}},je.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:u,_context:S},S.Consumer=S},je.createElement=te,je.createFactory=function(S){var I=te.bind(null,S);return I.type=S,I},je.createRef=function(){return{current:null}},je.forwardRef=function(S){return{$$typeof:p,render:S}},je.isValidElement=ee,je.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:C}},je.memo=function(S,I){return{$$typeof:g,type:S,compare:I===void 0?null:I}},je.startTransition=function(S){var I=P.transition;P.transition={};try{S()}finally{P.transition=I}},je.unstable_act=z,je.useCallback=function(S,I){return F.current.useCallback(S,I)},je.useContext=function(S){return F.current.useContext(S)},je.useDebugValue=function(){},je.useDeferredValue=function(S){return F.current.useDeferredValue(S)},je.useEffect=function(S,I){return F.current.useEffect(S,I)},je.useId=function(){return F.current.useId()},je.useImperativeHandle=function(S,I,re){return F.current.useImperativeHandle(S,I,re)},je.useInsertionEffect=function(S,I){return F.current.useInsertionEffect(S,I)},je.useLayoutEffect=function(S,I){return F.current.useLayoutEffect(S,I)},je.useMemo=function(S,I){return F.current.useMemo(S,I)},je.useReducer=function(S,I,re){return F.current.useReducer(S,I,re)},je.useRef=function(S){return F.current.useRef(S)},je.useState=function(S){return F.current.useState(S)},je.useSyncExternalStore=function(S,I,re){return F.current.useSyncExternalStore(S,I,re)},je.useTransition=function(){return F.current.useTransition()},je.version="18.3.1",je}var Lh;function qu(){return Lh||(Lh=1,Xl.exports=Nm()),Xl.exports}var Mh;function Rm(){if(Mh)return ii;Mh=1;var n=qu(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(p,m,g){var v,w={},_=null,x=null;g!==void 0&&(_=""+g),m.key!==void 0&&(_=""+m.key),m.ref!==void 0&&(x=m.ref);for(v in m)i.call(m,v)&&!u.hasOwnProperty(v)&&(w[v]=m[v]);if(p&&p.defaultProps)for(v in m=p.defaultProps,m)w[v]===void 0&&(w[v]=m[v]);return{$$typeof:t,type:p,key:_,ref:x,props:w,_owner:o.current}}return ii.Fragment=s,ii.jsx=d,ii.jsxs=d,ii}var $h;function Om(){return $h||($h=1,Ql.exports=Rm()),Ql.exports}var c=Om(),A=qu();const Ut=Af(A);var $a={},Zl={exports:{}},St={},eu={exports:{}},tu={};var Uh;function Dm(){return Uh||(Uh=1,(function(n){function t(P,V){var z=P.length;P.push(V);e:for(;0<z;){var S=z-1>>>1,I=P[S];if(0<o(I,V))P[S]=V,P[z]=I,z=S;else break e}}function s(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var V=P[0],z=P.pop();if(z!==V){P[0]=z;e:for(var S=0,I=P.length,re=I>>>1;S<re;){var se=2*(S+1)-1,fe=P[se],ve=se+1,ke=P[ve];if(0>o(fe,z))ve<I&&0>o(ke,fe)?(P[S]=ke,P[ve]=z,S=ve):(P[S]=fe,P[se]=z,S=se);else if(ve<I&&0>o(ke,z))P[S]=ke,P[ve]=z,S=ve;else break e}}return V}function o(P,V){var z=P.sortIndex-V.sortIndex;return z!==0?z:P.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var m=[],g=[],v=1,w=null,_=3,x=!1,j=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(P){for(var V=s(g);V!==null;){if(V.callback===null)i(g);else if(V.startTime<=P)i(g),V.sortIndex=V.expirationTime,t(m,V);else break;V=s(g)}}function D(P){if(R=!1,M(P),!j)if(s(m)!==null)j=!0,C(H);else{var V=s(g);V!==null&&F(D,V.startTime-P)}}function H(P,V){j=!1,R&&(R=!1,T(te),te=-1),x=!0;var z=_;try{for(M(V),w=s(m);w!==null&&(!(w.expirationTime>V)||P&&!G());){var S=w.callback;if(typeof S=="function"){w.callback=null,_=w.priorityLevel;var I=S(w.expirationTime<=V);V=n.unstable_now(),typeof I=="function"?w.callback=I:w===s(m)&&i(m),M(V)}else i(m);w=s(m)}if(w!==null)var re=!0;else{var se=s(g);se!==null&&F(D,se.startTime-V),re=!1}return re}finally{w=null,_=z,x=!1}}var K=!1,W=null,te=-1,de=5,ee=-1;function G(){return!(n.unstable_now()-ee<de)}function ne(){if(W!==null){var P=n.unstable_now();ee=P;var V=!0;try{V=W(!0,P)}finally{V?q():(K=!1,W=null)}}else K=!1}var q;if(typeof B=="function")q=function(){B(ne)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,O=X.port2;X.port1.onmessage=ne,q=function(){O.postMessage(null)}}else q=function(){k(ne,0)};function C(P){W=P,K||(K=!0,q())}function F(P,V){te=k(function(){P(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_continueExecution=function(){j||x||(j=!0,C(H))},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return s(m)},n.unstable_next=function(P){switch(_){case 1:case 2:case 3:var V=3;break;default:V=_}var z=_;_=V;try{return P()}finally{_=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(P,V){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var z=_;_=P;try{return V()}finally{_=z}},n.unstable_scheduleCallback=function(P,V,z){var S=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?S+z:S):z=S,P){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=z+I,P={id:v++,callback:V,priorityLevel:P,startTime:z,expirationTime:I,sortIndex:-1},z>S?(P.sortIndex=z,t(g,P),s(m)===null&&P===s(g)&&(R?(T(te),te=-1):R=!0,F(D,z-S))):(P.sortIndex=I,t(m,P),j||x||(j=!0,C(H))),P},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(P){var V=_;return function(){var z=_;_=V;try{return P.apply(this,arguments)}finally{_=z}}}})(tu)),tu}var zh;function Pm(){return zh||(zh=1,eu.exports=Dm()),eu.exports}var Bh;function Am(){if(Bh)return St;Bh=1;var n=qu(),t=Pm();function s(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(e,r){d(e,r),d(e+"Capture",r)}function d(e,r){for(o[e]=r,e=0;e<r.length;e++)i.add(r[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function _(e){return m.call(w,e)?!0:m.call(v,e)?!1:g.test(e)?w[e]=!0:(v[e]=!0,!1)}function x(e,r,a,l){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return l?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j(e,r,a,l){if(r===null||typeof r>"u"||x(e,r,a,l))return!0;if(l)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function R(e,r,a,l,h,f,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=l,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=f,this.removeEmptyString=y}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new R(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];k[r]=new R(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new R(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new R(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new R(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new R(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new R(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new R(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new R(e,5,!1,e.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function B(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(T,B);k[r]=new R(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(T,B);k[r]=new R(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(T,B);k[r]=new R(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new R(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new R(e,1,!1,e.toLowerCase(),null,!0,!0)});function M(e,r,a,l){var h=k.hasOwnProperty(r)?k[r]:null;(h!==null?h.type!==0:l||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(j(r,a,h,l)&&(a=null),l||h===null?_(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):h.mustUseProperty?e[h.propertyName]=a===null?h.type===3?!1:"":a:(r=h.attributeName,l=h.attributeNamespace,a===null?e.removeAttribute(r):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,l?e.setAttributeNS(l,r,a):e.setAttribute(r,a))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),K=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),G=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),P=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var z=Object.assign,S;function I(e){if(S===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);S=r&&r[1]||""}return`
`+S+e}var re=!1;function se(e,r){if(!e||re)return"";re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var l=U}Reflect.construct(e,[],r)}else{try{r.call()}catch(U){l=U}e.call(r.prototype)}else{try{throw Error()}catch(U){l=U}e()}}catch(U){if(U&&l&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),f=l.stack.split(`
`),y=h.length-1,b=f.length-1;1<=y&&0<=b&&h[y]!==f[b];)b--;for(;1<=y&&0<=b;y--,b--)if(h[y]!==f[b]){if(y!==1||b!==1)do if(y--,b--,0>b||h[y]!==f[b]){var E=`
`+h[y].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=y&&0<=b);break}}}finally{re=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?I(e):""}function fe(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=se(e.type,!1),e;case 11:return e=se(e.type.render,!1),e;case 1:return e=se(e.type,!0),e;default:return""}}function ve(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case K:return"Portal";case de:return"Profiler";case te:return"StrictMode";case q:return"Suspense";case X:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case G:return(e.displayName||"Context")+".Consumer";case ee:return(e._context.displayName||"Context")+".Provider";case ne:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return r=e.displayName||null,r!==null?r:ve(e.type)||"Memo";case C:r=e._payload,e=e._init;try{return ve(e(r))}catch{}}return null}function ke(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(r);case 8:return r===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function xe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ee(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function tt(e){var r=Ee(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),l=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){l=""+y,f.call(this,y)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function yr(e){e._valueTracker||(e._valueTracker=tt(e))}function Qr(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return e&&(l=Ee(e)?e.checked?"true":"false":e.value),e=l,e!==a?(r.setValue(e),!0):!1}function vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $e(e,r){var a=r.checked;return z({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function _r(e,r){var a=r.defaultValue==null?"":r.defaultValue,l=r.checked!=null?r.checked:r.defaultChecked;a=xe(r.value!=null?r.value:a),e._wrapperState={initialChecked:l,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ft(e,r){r=r.checked,r!=null&&M(e,"checked",r,!1)}function wr(e,r){ft(e,r);var a=xe(r.value),l=r.type;if(a!=null)l==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Sn(e,r.type,a):r.hasOwnProperty("defaultValue")&&Sn(e,r.type,xe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function ys(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var l=r.type;if(!(l!=="submit"&&l!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Sn(e,r,a){(r!=="number"||vr(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Xr=Array.isArray;function xr(e,r,a,l){if(e=e.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=r.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+xe(a),r=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}r!==null||e[h].disabled||(r=e[h])}r!==null&&(r.selected=!0)}}function vs(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(s(91));return z({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _s(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(s(92));if(Xr(a)){if(1<a.length)throw Error(s(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:xe(a)}}function Ci(e,r){var a=xe(r.value),l=xe(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),l!=null&&(e.defaultValue=""+l)}function Ni(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Ri(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ws(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Ri(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jn,En=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,l,h){MSApp.execUnsafeLocalFunction(function(){return e(r,a,l,h)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(jn=jn||document.createElement("div"),jn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=jn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function br(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fo=["Webkit","ms","Moz","O"];Object.keys(kr).forEach(function(e){fo.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),kr[r]=kr[e]})});function Zr(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||kr.hasOwnProperty(e)&&kr[e]?(""+r).trim():r+"px"}function xs(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var l=a.indexOf("--")===0,h=Zr(a,r[a],l);a==="float"&&(a="cssFloat"),l?e.setProperty(a,h):e[a]=h}}var po=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tn(e,r){if(r){if(po[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(s(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(s(61))}if(r.style!=null&&typeof r.style!="object")throw Error(s(62))}}function Cn(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var en=null;function bs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nn=null,Sr=null,rr=null;function rt(e){if(e=Vs(e)){if(typeof Nn!="function")throw Error(s(280));var r=e.stateNode;r&&(r=Zi(r),Nn(e.stateNode,e.type,r))}}function nt(e){Sr?rr?rr.push(e):rr=[e]:Sr=e}function tn(){if(Sr){var e=Sr,r=rr;if(rr=Sr=null,rt(e),r)for(e=0;e<r.length;e++)rt(r[e])}}function Re(e,r){return e(r)}function jt(){}var ks=!1;function Rn(e,r,a){if(ks)return e(r,a);ks=!0;try{return Re(e,r,a)}finally{ks=!1,(Sr!==null||rr!==null)&&(jt(),tn())}}function jr(e,r){var a=e.stateNode;if(a===null)return null;var l=Zi(a);if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var On=!1;if(p)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){On=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{On=!1}function Dn(e,r,a,l,h,f,y,b,E){var U=Array.prototype.slice.call(arguments,3);try{r.apply(a,U)}catch(Y){this.onError(Y)}}var sr=!1,Er=null,Tr=!1,Ss=null,js={onError:function(e){sr=!0,Er=e}};function Oi(e,r,a,l,h,f,y,b,E){sr=!1,Er=null,Dn.apply(js,arguments)}function mo(e,r,a,l,h,f,y,b,E){if(Oi.apply(this,arguments),sr){if(sr){var U=Er;sr=!1,Er=null}else throw Error(s(198));Tr||(Tr=!0,Ss=U)}}function ir(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function Se(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Pe(e){if(ir(e)!==e)throw Error(s(188))}function Fe(e){var r=e.alternate;if(!r){if(r=ir(e),r===null)throw Error(s(188));return r!==e?null:e}for(var a=e,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return Pe(h),e;if(f===l)return Pe(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var y=!1,b=h.child;b;){if(b===a){y=!0,a=h,l=f;break}if(b===l){y=!0,l=h,a=f;break}b=b.sibling}if(!y){for(b=f.child;b;){if(b===a){y=!0,a=f,l=h;break}if(b===l){y=!0,l=f,a=h;break}b=b.sibling}if(!y)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:r}function yt(e){return e=Fe(e),e!==null?vt(e):null}function vt(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=vt(e);if(r!==null)return r;e=e.sibling}return null}var Pn=t.unstable_scheduleCallback,Di=t.unstable_cancelCallback,go=t.unstable_shouldYield,Bp=t.unstable_requestPaint,qe=t.unstable_now,Fp=t.unstable_getCurrentPriorityLevel,yo=t.unstable_ImmediatePriority,cc=t.unstable_UserBlockingPriority,Pi=t.unstable_NormalPriority,Wp=t.unstable_LowPriority,dc=t.unstable_IdlePriority,Ai=null,Yt=null;function Vp(e){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Ai,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Kp,qp=Math.log,Hp=Math.LN2;function Kp(e){return e>>>=0,e===0?32:31-(qp(e)/Hp|0)|0}var Ii=64,Li=4194304;function Es(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mi(e,r){var a=e.pendingLanes;if(a===0)return 0;var l=0,h=e.suspendedLanes,f=e.pingedLanes,y=a&268435455;if(y!==0){var b=y&~h;b!==0?l=Es(b):(f&=y,f!==0&&(l=Es(f)))}else y=a&~h,y!==0?l=Es(y):f!==0&&(l=Es(f));if(l===0)return 0;if(r!==0&&r!==l&&(r&h)===0&&(h=l&-l,f=r&-r,h>=f||h===16&&(f&4194240)!==0))return r;if((l&4)!==0&&(l|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=l;0<r;)a=31-zt(r),h=1<<a,l|=e[a],r&=~h;return l}function Gp(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jp(e,r){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-zt(f),b=1<<y,E=h[y];E===-1?((b&a)===0||(b&l)!==0)&&(h[y]=Gp(b,r)):E<=r&&(e.expiredLanes|=b),f&=~b}}function vo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hc(){var e=Ii;return Ii<<=1,(Ii&4194240)===0&&(Ii=64),e}function _o(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Ts(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-zt(r),e[r]=a}function Yp(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<a;){var h=31-zt(a),f=1<<h;r[h]=0,l[h]=-1,e[h]=-1,a&=~f}}function wo(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var l=31-zt(a),h=1<<l;h&r|e[l]&r&&(e[l]|=r),a&=~h}}var Ne=0;function fc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var pc,xo,mc,gc,yc,bo=!1,$i=[],Cr=null,Nr=null,Rr=null,Cs=new Map,Ns=new Map,Or=[],Qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vc(e,r){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":Cs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(r.pointerId)}}function Rs(e,r,a,l,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=Vs(r),r!==null&&xo(r)),e):(e.eventSystemFlags|=l,r=e.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),e)}function Xp(e,r,a,l,h){switch(r){case"focusin":return Cr=Rs(Cr,e,r,a,l,h),!0;case"dragenter":return Nr=Rs(Nr,e,r,a,l,h),!0;case"mouseover":return Rr=Rs(Rr,e,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return Cs.set(f,Rs(Cs.get(f)||null,e,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Ns.set(f,Rs(Ns.get(f)||null,e,r,a,l,h)),!0}return!1}function _c(e){var r=rn(e.target);if(r!==null){var a=ir(r);if(a!==null){if(r=a.tag,r===13){if(r=Se(a),r!==null){e.blockedOn=r,yc(e.priority,function(){mc(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ui(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=So(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);en=l,a.target.dispatchEvent(l),en=null}else return r=Vs(a),r!==null&&xo(r),e.blockedOn=a,!1;r.shift()}return!0}function wc(e,r,a){Ui(e)&&a.delete(r)}function Zp(){bo=!1,Cr!==null&&Ui(Cr)&&(Cr=null),Nr!==null&&Ui(Nr)&&(Nr=null),Rr!==null&&Ui(Rr)&&(Rr=null),Cs.forEach(wc),Ns.forEach(wc)}function Os(e,r){e.blockedOn===r&&(e.blockedOn=null,bo||(bo=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Zp)))}function Ds(e){function r(h){return Os(h,e)}if(0<$i.length){Os($i[0],e);for(var a=1;a<$i.length;a++){var l=$i[a];l.blockedOn===e&&(l.blockedOn=null)}}for(Cr!==null&&Os(Cr,e),Nr!==null&&Os(Nr,e),Rr!==null&&Os(Rr,e),Cs.forEach(r),Ns.forEach(r),a=0;a<Or.length;a++)l=Or[a],l.blockedOn===e&&(l.blockedOn=null);for(;0<Or.length&&(a=Or[0],a.blockedOn===null);)_c(a),a.blockedOn===null&&Or.shift()}var An=D.ReactCurrentBatchConfig,zi=!0;function e0(e,r,a,l){var h=Ne,f=An.transition;An.transition=null;try{Ne=1,ko(e,r,a,l)}finally{Ne=h,An.transition=f}}function t0(e,r,a,l){var h=Ne,f=An.transition;An.transition=null;try{Ne=4,ko(e,r,a,l)}finally{Ne=h,An.transition=f}}function ko(e,r,a,l){if(zi){var h=So(e,r,a,l);if(h===null)Bo(e,r,l,Bi,a),vc(e,l);else if(Xp(h,e,r,a,l))l.stopPropagation();else if(vc(e,l),r&4&&-1<Qp.indexOf(e)){for(;h!==null;){var f=Vs(h);if(f!==null&&pc(f),f=So(e,r,a,l),f===null&&Bo(e,r,l,Bi,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Bo(e,r,l,null,a)}}var Bi=null;function So(e,r,a,l){if(Bi=null,e=bs(l),e=rn(e),e!==null)if(r=ir(e),r===null)e=null;else if(a=r.tag,a===13){if(e=Se(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Bi=e,null}function xc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fp()){case yo:return 1;case cc:return 4;case Pi:case Wp:return 16;case dc:return 536870912;default:return 16}default:return 16}}var Dr=null,jo=null,Fi=null;function bc(){if(Fi)return Fi;var e,r=jo,a=r.length,l,h="value"in Dr?Dr.value:Dr.textContent,f=h.length;for(e=0;e<a&&r[e]===h[e];e++);var y=a-e;for(l=1;l<=y&&r[a-l]===h[f-l];l++);return Fi=h.slice(e,1<l?1-l:void 0)}function Wi(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function kc(){return!1}function Et(e){function r(a,l,h,f,y){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Vi:kc,this.isPropagationStopped=kc,this}return z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),r}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eo=Et(In),Ps=z({},In,{view:0,detail:0}),r0=Et(Ps),To,Co,As,qi=z({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ro,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==As&&(As&&e.type==="mousemove"?(To=e.screenX-As.screenX,Co=e.screenY-As.screenY):Co=To=0,As=e),To)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),Sc=Et(qi),n0=z({},qi,{dataTransfer:0}),s0=Et(n0),i0=z({},Ps,{relatedTarget:0}),No=Et(i0),a0=z({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),o0=Et(a0),l0=z({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),u0=Et(l0),c0=z({},In,{data:0}),jc=Et(c0),d0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p0(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=f0[e])?!!r[e]:!1}function Ro(){return p0}var m0=z({},Ps,{key:function(e){if(e.key){var r=d0[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Wi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?h0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ro,charCode:function(e){return e.type==="keypress"?Wi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g0=Et(m0),y0=z({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=Et(y0),v0=z({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ro}),_0=Et(v0),w0=z({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),x0=Et(w0),b0=z({},qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),k0=Et(b0),S0=[9,13,27,32],Oo=p&&"CompositionEvent"in window,Is=null;p&&"documentMode"in document&&(Is=document.documentMode);var j0=p&&"TextEvent"in window&&!Is,Tc=p&&(!Oo||Is&&8<Is&&11>=Is),Cc=" ",Nc=!1;function Rc(e,r){switch(e){case"keyup":return S0.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ln=!1;function E0(e,r){switch(e){case"compositionend":return Oc(r);case"keypress":return r.which!==32?null:(Nc=!0,Cc);case"textInput":return e=r.data,e===Cc&&Nc?null:e;default:return null}}function T0(e,r){if(Ln)return e==="compositionend"||!Oo&&Rc(e,r)?(e=bc(),Fi=jo=Dr=null,Ln=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Tc&&r.locale!=="ko"?null:r.data;default:return null}}var C0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dc(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!C0[e.type]:r==="textarea"}function Pc(e,r,a,l){nt(l),r=Yi(r,"onChange"),0<r.length&&(a=new Eo("onChange","change",null,a,l),e.push({event:a,listeners:r}))}var Ls=null,Ms=null;function N0(e){Qc(e,0)}function Hi(e){var r=Bn(e);if(Qr(r))return e}function R0(e,r){if(e==="change")return r}var Ac=!1;if(p){var Do;if(p){var Po="oninput"in document;if(!Po){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),Po=typeof Ic.oninput=="function"}Do=Po}else Do=!1;Ac=Do&&(!document.documentMode||9<document.documentMode)}function Lc(){Ls&&(Ls.detachEvent("onpropertychange",Mc),Ms=Ls=null)}function Mc(e){if(e.propertyName==="value"&&Hi(Ms)){var r=[];Pc(r,Ms,e,bs(e)),Rn(N0,r)}}function O0(e,r,a){e==="focusin"?(Lc(),Ls=r,Ms=a,Ls.attachEvent("onpropertychange",Mc)):e==="focusout"&&Lc()}function D0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hi(Ms)}function P0(e,r){if(e==="click")return Hi(r)}function A0(e,r){if(e==="input"||e==="change")return Hi(r)}function I0(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Bt=typeof Object.is=="function"?Object.is:I0;function $s(e,r){if(Bt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!m.call(r,h)||!Bt(e[h],r[h]))return!1}return!0}function $c(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uc(e,r){var a=$c(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=r&&l>=r)return{node:a,offset:r-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=$c(a)}}function zc(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?zc(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Bc(){for(var e=window,r=vr();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=vr(e.document)}return r}function Ao(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function L0(e){var r=Bc(),a=e.focusedElem,l=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&zc(a.ownerDocument.documentElement,a)){if(l!==null&&Ao(a)){if(r=l.start,e=l.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var h=a.textContent.length,f=Math.min(l.start,h);l=l.end===void 0?f:Math.min(l.end,h),!e.extend&&f>l&&(h=l,l=f,f=h),h=Uc(a,f);var y=Uc(a,l);h&&y&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),e.removeAllRanges(),f>l?(e.addRange(r),e.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var M0=p&&"documentMode"in document&&11>=document.documentMode,Mn=null,Io=null,Us=null,Lo=!1;function Fc(e,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lo||Mn==null||Mn!==vr(l)||(l=Mn,"selectionStart"in l&&Ao(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Us&&$s(Us,l)||(Us=l,l=Yi(Io,"onSelect"),0<l.length&&(r=new Eo("onSelect","select",null,r,a),e.push({event:r,listeners:l}),r.target=Mn)))}function Ki(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var $n={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionend:Ki("Transition","TransitionEnd")},Mo={},Wc={};p&&(Wc=document.createElement("div").style,"AnimationEvent"in window||(delete $n.animationend.animation,delete $n.animationiteration.animation,delete $n.animationstart.animation),"TransitionEvent"in window||delete $n.transitionend.transition);function Gi(e){if(Mo[e])return Mo[e];if(!$n[e])return e;var r=$n[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Wc)return Mo[e]=r[a];return e}var Vc=Gi("animationend"),qc=Gi("animationiteration"),Hc=Gi("animationstart"),Kc=Gi("transitionend"),Gc=new Map,Jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,r){Gc.set(e,r),u(r,[e])}for(var $o=0;$o<Jc.length;$o++){var Uo=Jc[$o],$0=Uo.toLowerCase(),U0=Uo[0].toUpperCase()+Uo.slice(1);Pr($0,"on"+U0)}Pr(Vc,"onAnimationEnd"),Pr(qc,"onAnimationIteration"),Pr(Hc,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Kc,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z0=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Yc(e,r,a){var l=e.type||"unknown-event";e.currentTarget=a,mo(l,r,void 0,e),e.currentTarget=null}function Qc(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var y=l.length-1;0<=y;y--){var b=l[y],E=b.instance,U=b.currentTarget;if(b=b.listener,E!==f&&h.isPropagationStopped())break e;Yc(h,b,U),f=E}else for(y=0;y<l.length;y++){if(b=l[y],E=b.instance,U=b.currentTarget,b=b.listener,E!==f&&h.isPropagationStopped())break e;Yc(h,b,U),f=E}}}if(Tr)throw e=Ss,Tr=!1,Ss=null,e}function Ae(e,r){var a=r[Ko];a===void 0&&(a=r[Ko]=new Set);var l=e+"__bubble";a.has(l)||(Xc(r,e,2,!1),a.add(l))}function zo(e,r,a){var l=0;r&&(l|=4),Xc(a,e,l,r)}var Ji="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[Ji]){e[Ji]=!0,i.forEach(function(a){a!=="selectionchange"&&(z0.has(a)||zo(a,!1,e),zo(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Ji]||(r[Ji]=!0,zo("selectionchange",!1,r))}}function Xc(e,r,a,l){switch(xc(r)){case 1:var h=e0;break;case 4:h=t0;break;default:h=ko}a=h.bind(null,r,a,e),h=void 0,!On||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(r,a,{capture:!0,passive:h}):e.addEventListener(r,a,!0):h!==void 0?e.addEventListener(r,a,{passive:h}):e.addEventListener(r,a,!1)}function Bo(e,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var b=l.stateNode.containerInfo;if(b===h||b.nodeType===8&&b.parentNode===h)break;if(y===4)for(y=l.return;y!==null;){var E=y.tag;if((E===3||E===4)&&(E=y.stateNode.containerInfo,E===h||E.nodeType===8&&E.parentNode===h))return;y=y.return}for(;b!==null;){if(y=rn(b),y===null)return;if(E=y.tag,E===5||E===6){l=f=y;continue e}b=b.parentNode}}l=l.return}Rn(function(){var U=f,Y=bs(a),Q=[];e:{var J=Gc.get(e);if(J!==void 0){var ie=Eo,oe=e;switch(e){case"keypress":if(Wi(a)===0)break e;case"keydown":case"keyup":ie=g0;break;case"focusin":oe="focus",ie=No;break;case"focusout":oe="blur",ie=No;break;case"beforeblur":case"afterblur":ie=No;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=s0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=_0;break;case Vc:case qc:case Hc:ie=o0;break;case Kc:ie=x0;break;case"scroll":ie=r0;break;case"wheel":ie=k0;break;case"copy":case"cut":case"paste":ie=u0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ec}var le=(r&4)!==0,He=!le&&e==="scroll",L=le?J!==null?J+"Capture":null:J;le=[];for(var N=U,$;N!==null;){$=N;var Z=$.stateNode;if($.tag===5&&Z!==null&&($=Z,L!==null&&(Z=jr(N,L),Z!=null&&le.push(Fs(N,Z,$)))),He)break;N=N.return}0<le.length&&(J=new ie(J,oe,null,a,Y),Q.push({event:J,listeners:le}))}}if((r&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",ie=e==="mouseout"||e==="pointerout",J&&a!==en&&(oe=a.relatedTarget||a.fromElement)&&(rn(oe)||oe[ar]))break e;if((ie||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,ie?(oe=a.relatedTarget||a.toElement,ie=U,oe=oe?rn(oe):null,oe!==null&&(He=ir(oe),oe!==He||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ie=null,oe=U),ie!==oe)){if(le=Sc,Z="onMouseLeave",L="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(le=Ec,Z="onPointerLeave",L="onPointerEnter",N="pointer"),He=ie==null?J:Bn(ie),$=oe==null?J:Bn(oe),J=new le(Z,N+"leave",ie,a,Y),J.target=He,J.relatedTarget=$,Z=null,rn(Y)===U&&(le=new le(L,N+"enter",oe,a,Y),le.target=$,le.relatedTarget=He,Z=le),He=Z,ie&&oe)t:{for(le=ie,L=oe,N=0,$=le;$;$=Un($))N++;for($=0,Z=L;Z;Z=Un(Z))$++;for(;0<N-$;)le=Un(le),N--;for(;0<$-N;)L=Un(L),$--;for(;N--;){if(le===L||L!==null&&le===L.alternate)break t;le=Un(le),L=Un(L)}le=null}else le=null;ie!==null&&Zc(Q,J,ie,le,!1),oe!==null&&He!==null&&Zc(Q,He,oe,le,!0)}}e:{if(J=U?Bn(U):window,ie=J.nodeName&&J.nodeName.toLowerCase(),ie==="select"||ie==="input"&&J.type==="file")var ce=R0;else if(Dc(J))if(Ac)ce=A0;else{ce=D0;var pe=O0}else(ie=J.nodeName)&&ie.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ce=P0);if(ce&&(ce=ce(e,U))){Pc(Q,ce,a,Y);break e}pe&&pe(e,J,U),e==="focusout"&&(pe=J._wrapperState)&&pe.controlled&&J.type==="number"&&Sn(J,"number",J.value)}switch(pe=U?Bn(U):window,e){case"focusin":(Dc(pe)||pe.contentEditable==="true")&&(Mn=pe,Io=U,Us=null);break;case"focusout":Us=Io=Mn=null;break;case"mousedown":Lo=!0;break;case"contextmenu":case"mouseup":case"dragend":Lo=!1,Fc(Q,a,Y);break;case"selectionchange":if(M0)break;case"keydown":case"keyup":Fc(Q,a,Y)}var me;if(Oo)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Ln?Rc(e,a)&&(_e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Tc&&a.locale!=="ko"&&(Ln||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Ln&&(me=bc()):(Dr=Y,jo="value"in Dr?Dr.value:Dr.textContent,Ln=!0)),pe=Yi(U,_e),0<pe.length&&(_e=new jc(_e,e,null,a,Y),Q.push({event:_e,listeners:pe}),me?_e.data=me:(me=Oc(a),me!==null&&(_e.data=me)))),(me=j0?E0(e,a):T0(e,a))&&(U=Yi(U,"onBeforeInput"),0<U.length&&(Y=new jc("onBeforeInput","beforeinput",null,a,Y),Q.push({event:Y,listeners:U}),Y.data=me))}Qc(Q,r)})}function Fs(e,r,a){return{instance:e,listener:r,currentTarget:a}}function Yi(e,r){for(var a=r+"Capture",l=[];e!==null;){var h=e,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=jr(e,a),f!=null&&l.unshift(Fs(e,f,h)),f=jr(e,r),f!=null&&l.push(Fs(e,f,h))),e=e.return}return l}function Un(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zc(e,r,a,l,h){for(var f=r._reactName,y=[];a!==null&&a!==l;){var b=a,E=b.alternate,U=b.stateNode;if(E!==null&&E===l)break;b.tag===5&&U!==null&&(b=U,h?(E=jr(a,f),E!=null&&y.unshift(Fs(a,E,b))):h||(E=jr(a,f),E!=null&&y.push(Fs(a,E,b)))),a=a.return}y.length!==0&&e.push({event:r,listeners:y})}var B0=/\r\n?/g,F0=/\u0000|\uFFFD/g;function ed(e){return(typeof e=="string"?e:""+e).replace(B0,`
`).replace(F0,"")}function Qi(e,r,a){if(r=ed(r),ed(e)!==r&&a)throw Error(s(425))}function Xi(){}var Fo=null,Wo=null;function Vo(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var qo=typeof setTimeout=="function"?setTimeout:void 0,W0=typeof clearTimeout=="function"?clearTimeout:void 0,td=typeof Promise=="function"?Promise:void 0,V0=typeof queueMicrotask=="function"?queueMicrotask:typeof td<"u"?function(e){return td.resolve(null).then(e).catch(q0)}:qo;function q0(e){setTimeout(function(){throw e})}function Ho(e,r){var a=r,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(l===0){e.removeChild(h),Ds(r);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=h}while(a);Ds(r)}function Ar(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function rd(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var zn=Math.random().toString(36).slice(2),Qt="__reactFiber$"+zn,Ws="__reactProps$"+zn,ar="__reactContainer$"+zn,Ko="__reactEvents$"+zn,H0="__reactListeners$"+zn,K0="__reactHandles$"+zn;function rn(e){var r=e[Qt];if(r)return r;for(var a=e.parentNode;a;){if(r=a[ar]||a[Qt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=rd(e);e!==null;){if(a=e[Qt])return a;e=rd(e)}return r}e=a,a=e.parentNode}return null}function Vs(e){return e=e[Qt]||e[ar],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Zi(e){return e[Ws]||null}var Go=[],Fn=-1;function Ir(e){return{current:e}}function Ie(e){0>Fn||(e.current=Go[Fn],Go[Fn]=null,Fn--)}function Oe(e,r){Fn++,Go[Fn]=e.current,e.current=r}var Lr={},ut=Ir(Lr),_t=Ir(!1),nn=Lr;function Wn(e,r){var a=e.type.contextTypes;if(!a)return Lr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===r)return l.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in a)h[f]=r[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=h),h}function wt(e){return e=e.childContextTypes,e!=null}function ea(){Ie(_t),Ie(ut)}function nd(e,r,a){if(ut.current!==Lr)throw Error(s(168));Oe(ut,r),Oe(_t,a)}function sd(e,r,a){var l=e.stateNode;if(r=r.childContextTypes,typeof l.getChildContext!="function")return a;l=l.getChildContext();for(var h in l)if(!(h in r))throw Error(s(108,ke(e)||"Unknown",h));return z({},a,l)}function ta(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lr,nn=ut.current,Oe(ut,e),Oe(_t,_t.current),!0}function id(e,r,a){var l=e.stateNode;if(!l)throw Error(s(169));a?(e=sd(e,r,nn),l.__reactInternalMemoizedMergedChildContext=e,Ie(_t),Ie(ut),Oe(ut,e)):Ie(_t),Oe(_t,a)}var or=null,ra=!1,Jo=!1;function ad(e){or===null?or=[e]:or.push(e)}function G0(e){ra=!0,ad(e)}function Mr(){if(!Jo&&or!==null){Jo=!0;var e=0,r=Ne;try{var a=or;for(Ne=1;e<a.length;e++){var l=a[e];do l=l(!0);while(l!==null)}or=null,ra=!1}catch(h){throw or!==null&&(or=or.slice(e+1)),Pn(yo,Mr),h}finally{Ne=r,Jo=!1}}return null}var Vn=[],qn=0,na=null,sa=0,Pt=[],At=0,sn=null,lr=1,ur="";function an(e,r){Vn[qn++]=sa,Vn[qn++]=na,na=e,sa=r}function od(e,r,a){Pt[At++]=lr,Pt[At++]=ur,Pt[At++]=sn,sn=e;var l=lr;e=ur;var h=32-zt(l)-1;l&=~(1<<h),a+=1;var f=32-zt(r)+h;if(30<f){var y=h-h%5;f=(l&(1<<y)-1).toString(32),l>>=y,h-=y,lr=1<<32-zt(r)+h|a<<h|l,ur=f+e}else lr=1<<f|a<<h|l,ur=e}function Yo(e){e.return!==null&&(an(e,1),od(e,1,0))}function Qo(e){for(;e===na;)na=Vn[--qn],Vn[qn]=null,sa=Vn[--qn],Vn[qn]=null;for(;e===sn;)sn=Pt[--At],Pt[At]=null,ur=Pt[--At],Pt[At]=null,lr=Pt[--At],Pt[At]=null}var Tt=null,Ct=null,Le=!1,Ft=null;function ld(e,r){var a=$t(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function ud(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,Tt=e,Ct=Ar(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,Tt=e,Ct=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=sn!==null?{id:lr,overflow:ur}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=$t(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,Tt=e,Ct=null,!0):!1;default:return!1}}function Xo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zo(e){if(Le){var r=Ct;if(r){var a=r;if(!ud(e,r)){if(Xo(e))throw Error(s(418));r=Ar(a.nextSibling);var l=Tt;r&&ud(e,r)?ld(l,a):(e.flags=e.flags&-4097|2,Le=!1,Tt=e)}}else{if(Xo(e))throw Error(s(418));e.flags=e.flags&-4097|2,Le=!1,Tt=e}}}function cd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function ia(e){if(e!==Tt)return!1;if(!Le)return cd(e),Le=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Vo(e.type,e.memoizedProps)),r&&(r=Ct)){if(Xo(e))throw dd(),Error(s(418));for(;r;)ld(e,r),r=Ar(r.nextSibling)}if(cd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){Ct=Ar(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}Ct=null}}else Ct=Tt?Ar(e.stateNode.nextSibling):null;return!0}function dd(){for(var e=Ct;e;)e=Ar(e.nextSibling)}function Hn(){Ct=Tt=null,Le=!1}function el(e){Ft===null?Ft=[e]:Ft.push(e)}var J0=D.ReactCurrentBatchConfig;function qs(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(s(309));var l=a.stateNode}if(!l)throw Error(s(147,e));var h=l,f=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===f?r.ref:(r=function(y){var b=h.refs;y===null?delete b[f]:b[f]=y},r._stringRef=f,r)}if(typeof e!="string")throw Error(s(284));if(!a._owner)throw Error(s(290,e))}return e}function aa(e,r){throw e=Object.prototype.toString.call(r),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function hd(e){var r=e._init;return r(e._payload)}function fd(e){function r(L,N){if(e){var $=L.deletions;$===null?(L.deletions=[N],L.flags|=16):$.push(N)}}function a(L,N){if(!e)return null;for(;N!==null;)r(L,N),N=N.sibling;return null}function l(L,N){for(L=new Map;N!==null;)N.key!==null?L.set(N.key,N):L.set(N.index,N),N=N.sibling;return L}function h(L,N){return L=qr(L,N),L.index=0,L.sibling=null,L}function f(L,N,$){return L.index=$,e?($=L.alternate,$!==null?($=$.index,$<N?(L.flags|=2,N):$):(L.flags|=2,N)):(L.flags|=1048576,N)}function y(L){return e&&L.alternate===null&&(L.flags|=2),L}function b(L,N,$,Z){return N===null||N.tag!==6?(N=ql($,L.mode,Z),N.return=L,N):(N=h(N,$),N.return=L,N)}function E(L,N,$,Z){var ce=$.type;return ce===W?Y(L,N,$.props.children,Z,$.key):N!==null&&(N.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===C&&hd(ce)===N.type)?(Z=h(N,$.props),Z.ref=qs(L,N,$),Z.return=L,Z):(Z=Ra($.type,$.key,$.props,null,L.mode,Z),Z.ref=qs(L,N,$),Z.return=L,Z)}function U(L,N,$,Z){return N===null||N.tag!==4||N.stateNode.containerInfo!==$.containerInfo||N.stateNode.implementation!==$.implementation?(N=Hl($,L.mode,Z),N.return=L,N):(N=h(N,$.children||[]),N.return=L,N)}function Y(L,N,$,Z,ce){return N===null||N.tag!==7?(N=pn($,L.mode,Z,ce),N.return=L,N):(N=h(N,$),N.return=L,N)}function Q(L,N,$){if(typeof N=="string"&&N!==""||typeof N=="number")return N=ql(""+N,L.mode,$),N.return=L,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case H:return $=Ra(N.type,N.key,N.props,null,L.mode,$),$.ref=qs(L,null,N),$.return=L,$;case K:return N=Hl(N,L.mode,$),N.return=L,N;case C:var Z=N._init;return Q(L,Z(N._payload),$)}if(Xr(N)||V(N))return N=pn(N,L.mode,$,null),N.return=L,N;aa(L,N)}return null}function J(L,N,$,Z){var ce=N!==null?N.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ce!==null?null:b(L,N,""+$,Z);if(typeof $=="object"&&$!==null){switch($.$$typeof){case H:return $.key===ce?E(L,N,$,Z):null;case K:return $.key===ce?U(L,N,$,Z):null;case C:return ce=$._init,J(L,N,ce($._payload),Z)}if(Xr($)||V($))return ce!==null?null:Y(L,N,$,Z,null);aa(L,$)}return null}function ie(L,N,$,Z,ce){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return L=L.get($)||null,b(N,L,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case H:return L=L.get(Z.key===null?$:Z.key)||null,E(N,L,Z,ce);case K:return L=L.get(Z.key===null?$:Z.key)||null,U(N,L,Z,ce);case C:var pe=Z._init;return ie(L,N,$,pe(Z._payload),ce)}if(Xr(Z)||V(Z))return L=L.get($)||null,Y(N,L,Z,ce,null);aa(N,Z)}return null}function oe(L,N,$,Z){for(var ce=null,pe=null,me=N,_e=N=0,et=null;me!==null&&_e<$.length;_e++){me.index>_e?(et=me,me=null):et=me.sibling;var Ce=J(L,me,$[_e],Z);if(Ce===null){me===null&&(me=et);break}e&&me&&Ce.alternate===null&&r(L,me),N=f(Ce,N,_e),pe===null?ce=Ce:pe.sibling=Ce,pe=Ce,me=et}if(_e===$.length)return a(L,me),Le&&an(L,_e),ce;if(me===null){for(;_e<$.length;_e++)me=Q(L,$[_e],Z),me!==null&&(N=f(me,N,_e),pe===null?ce=me:pe.sibling=me,pe=me);return Le&&an(L,_e),ce}for(me=l(L,me);_e<$.length;_e++)et=ie(me,L,_e,$[_e],Z),et!==null&&(e&&et.alternate!==null&&me.delete(et.key===null?_e:et.key),N=f(et,N,_e),pe===null?ce=et:pe.sibling=et,pe=et);return e&&me.forEach(function(Hr){return r(L,Hr)}),Le&&an(L,_e),ce}function le(L,N,$,Z){var ce=V($);if(typeof ce!="function")throw Error(s(150));if($=ce.call($),$==null)throw Error(s(151));for(var pe=ce=null,me=N,_e=N=0,et=null,Ce=$.next();me!==null&&!Ce.done;_e++,Ce=$.next()){me.index>_e?(et=me,me=null):et=me.sibling;var Hr=J(L,me,Ce.value,Z);if(Hr===null){me===null&&(me=et);break}e&&me&&Hr.alternate===null&&r(L,me),N=f(Hr,N,_e),pe===null?ce=Hr:pe.sibling=Hr,pe=Hr,me=et}if(Ce.done)return a(L,me),Le&&an(L,_e),ce;if(me===null){for(;!Ce.done;_e++,Ce=$.next())Ce=Q(L,Ce.value,Z),Ce!==null&&(N=f(Ce,N,_e),pe===null?ce=Ce:pe.sibling=Ce,pe=Ce);return Le&&an(L,_e),ce}for(me=l(L,me);!Ce.done;_e++,Ce=$.next())Ce=ie(me,L,_e,Ce.value,Z),Ce!==null&&(e&&Ce.alternate!==null&&me.delete(Ce.key===null?_e:Ce.key),N=f(Ce,N,_e),pe===null?ce=Ce:pe.sibling=Ce,pe=Ce);return e&&me.forEach(function(Cm){return r(L,Cm)}),Le&&an(L,_e),ce}function He(L,N,$,Z){if(typeof $=="object"&&$!==null&&$.type===W&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case H:e:{for(var ce=$.key,pe=N;pe!==null;){if(pe.key===ce){if(ce=$.type,ce===W){if(pe.tag===7){a(L,pe.sibling),N=h(pe,$.props.children),N.return=L,L=N;break e}}else if(pe.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===C&&hd(ce)===pe.type){a(L,pe.sibling),N=h(pe,$.props),N.ref=qs(L,pe,$),N.return=L,L=N;break e}a(L,pe);break}else r(L,pe);pe=pe.sibling}$.type===W?(N=pn($.props.children,L.mode,Z,$.key),N.return=L,L=N):(Z=Ra($.type,$.key,$.props,null,L.mode,Z),Z.ref=qs(L,N,$),Z.return=L,L=Z)}return y(L);case K:e:{for(pe=$.key;N!==null;){if(N.key===pe)if(N.tag===4&&N.stateNode.containerInfo===$.containerInfo&&N.stateNode.implementation===$.implementation){a(L,N.sibling),N=h(N,$.children||[]),N.return=L,L=N;break e}else{a(L,N);break}else r(L,N);N=N.sibling}N=Hl($,L.mode,Z),N.return=L,L=N}return y(L);case C:return pe=$._init,He(L,N,pe($._payload),Z)}if(Xr($))return oe(L,N,$,Z);if(V($))return le(L,N,$,Z);aa(L,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,N!==null&&N.tag===6?(a(L,N.sibling),N=h(N,$),N.return=L,L=N):(a(L,N),N=ql($,L.mode,Z),N.return=L,L=N),y(L)):a(L,N)}return He}var Kn=fd(!0),pd=fd(!1),oa=Ir(null),la=null,Gn=null,tl=null;function rl(){tl=Gn=la=null}function nl(e){var r=oa.current;Ie(oa),e._currentValue=r}function sl(e,r,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),e===a)break;e=e.return}}function Jn(e,r){la=e,tl=Gn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(xt=!0),e.firstContext=null)}function It(e){var r=e._currentValue;if(tl!==e)if(e={context:e,memoizedValue:r,next:null},Gn===null){if(la===null)throw Error(s(308));Gn=e,la.dependencies={lanes:0,firstContext:e}}else Gn=Gn.next=e;return r}var on=null;function il(e){on===null?on=[e]:on.push(e)}function md(e,r,a,l){var h=r.interleaved;return h===null?(a.next=a,il(r)):(a.next=h.next,h.next=a),r.interleaved=a,cr(e,l)}function cr(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var $r=!1;function al(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gd(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dr(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Ur(e,r,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Te&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,cr(e,a)}return h=l.interleaved,h===null?(r.next=r,il(l)):(r.next=h.next,h.next=r),l.interleaved=r,cr(e,a)}function ua(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var l=r.lanes;l&=e.pendingLanes,a|=l,r.lanes=a,wo(e,a)}}function yd(e,r){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var y={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?h=f=y:f=f.next=y,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function ca(e,r,a,l){var h=e.updateQueue;$r=!1;var f=h.firstBaseUpdate,y=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var E=b,U=E.next;E.next=null,y===null?f=U:y.next=U,y=E;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==y&&(b===null?Y.firstBaseUpdate=U:b.next=U,Y.lastBaseUpdate=E))}if(f!==null){var Q=h.baseState;y=0,Y=U=E=null,b=f;do{var J=b.lane,ie=b.eventTime;if((l&J)===J){Y!==null&&(Y=Y.next={eventTime:ie,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var oe=e,le=b;switch(J=r,ie=a,le.tag){case 1:if(oe=le.payload,typeof oe=="function"){Q=oe.call(ie,Q,J);break e}Q=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=le.payload,J=typeof oe=="function"?oe.call(ie,Q,J):oe,J==null)break e;Q=z({},Q,J);break e;case 2:$r=!0}}b.callback!==null&&b.lane!==0&&(e.flags|=64,J=h.effects,J===null?h.effects=[b]:J.push(b))}else ie={eventTime:ie,lane:J,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(U=Y=ie,E=Q):Y=Y.next=ie,y|=J;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;J=b,b=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);if(Y===null&&(E=Q),h.baseState=E,h.firstBaseUpdate=U,h.lastBaseUpdate=Y,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else f===null&&(h.shared.lanes=0);cn|=y,e.lanes=y,e.memoizedState=Q}}function vd(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var l=e[r],h=l.callback;if(h!==null){if(l.callback=null,l=a,typeof h!="function")throw Error(s(191,h));h.call(l)}}}var Hs={},Xt=Ir(Hs),Ks=Ir(Hs),Gs=Ir(Hs);function ln(e){if(e===Hs)throw Error(s(174));return e}function ol(e,r){switch(Oe(Gs,r),Oe(Ks,e),Oe(Xt,Hs),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ws(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=ws(r,e)}Ie(Xt),Oe(Xt,r)}function Yn(){Ie(Xt),Ie(Ks),Ie(Gs)}function _d(e){ln(Gs.current);var r=ln(Xt.current),a=ws(r,e.type);r!==a&&(Oe(Ks,e),Oe(Xt,a))}function ll(e){Ks.current===e&&(Ie(Xt),Ie(Ks))}var Ue=Ir(0);function da(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ul=[];function cl(){for(var e=0;e<ul.length;e++)ul[e]._workInProgressVersionPrimary=null;ul.length=0}var ha=D.ReactCurrentDispatcher,dl=D.ReactCurrentBatchConfig,un=0,ze=null,Je=null,Xe=null,fa=!1,Js=!1,Ys=0,Y0=0;function ct(){throw Error(s(321))}function hl(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!Bt(e[a],r[a]))return!1;return!0}function fl(e,r,a,l,h,f){if(un=f,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ha.current=e===null||e.memoizedState===null?em:tm,e=a(l,h),Js){f=0;do{if(Js=!1,Ys=0,25<=f)throw Error(s(301));f+=1,Xe=Je=null,r.updateQueue=null,ha.current=rm,e=a(l,h)}while(Js)}if(ha.current=ga,r=Je!==null&&Je.next!==null,un=0,Xe=Je=ze=null,fa=!1,r)throw Error(s(300));return e}function pl(){var e=Ys!==0;return Ys=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?ze.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Lt(){if(Je===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var r=Xe===null?ze.memoizedState:Xe.next;if(r!==null)Xe=r,Je=e;else{if(e===null)throw Error(s(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Xe===null?ze.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Qs(e,r){return typeof r=="function"?r(e):r}function ml(e){var r=Lt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=Je,h=l.baseQueue,f=a.pending;if(f!==null){if(h!==null){var y=h.next;h.next=f.next,f.next=y}l.baseQueue=h=f,a.pending=null}if(h!==null){f=h.next,l=l.baseState;var b=y=null,E=null,U=f;do{var Y=U.lane;if((un&Y)===Y)E!==null&&(E=E.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),l=U.hasEagerState?U.eagerState:e(l,U.action);else{var Q={lane:Y,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};E===null?(b=E=Q,y=l):E=E.next=Q,ze.lanes|=Y,cn|=Y}U=U.next}while(U!==null&&U!==f);E===null?y=l:E.next=b,Bt(l,r.memoizedState)||(xt=!0),r.memoizedState=l,r.baseState=y,r.baseQueue=E,a.lastRenderedState=l}if(e=a.interleaved,e!==null){h=e;do f=h.lane,ze.lanes|=f,cn|=f,h=h.next;while(h!==e)}else h===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function gl(e){var r=Lt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var y=h=h.next;do f=e(f,y.action),y=y.next;while(y!==h);Bt(f,r.memoizedState)||(xt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function wd(){}function xd(e,r){var a=ze,l=Lt(),h=r(),f=!Bt(l.memoizedState,h);if(f&&(l.memoizedState=h,xt=!0),l=l.queue,yl(Sd.bind(null,a,l,e),[e]),l.getSnapshot!==r||f||Xe!==null&&Xe.memoizedState.tag&1){if(a.flags|=2048,Xs(9,kd.bind(null,a,l,h,r),void 0,null),Ze===null)throw Error(s(349));(un&30)!==0||bd(a,r,h)}return h}function bd(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=ze.updateQueue,r===null?(r={lastEffect:null,stores:null},ze.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function kd(e,r,a,l){r.value=a,r.getSnapshot=l,jd(r)&&Ed(e)}function Sd(e,r,a){return a(function(){jd(r)&&Ed(e)})}function jd(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!Bt(e,a)}catch{return!0}}function Ed(e){var r=cr(e,1);r!==null&&Ht(r,e,1,-1)}function Td(e){var r=Zt();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},r.queue=e,e=e.dispatch=Z0.bind(null,ze,e),[r.memoizedState,e]}function Xs(e,r,a,l){return e={tag:e,create:r,destroy:a,deps:l,next:null},r=ze.updateQueue,r===null?(r={lastEffect:null,stores:null},ze.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,r.lastEffect=e)),e}function Cd(){return Lt().memoizedState}function pa(e,r,a,l){var h=Zt();ze.flags|=e,h.memoizedState=Xs(1|r,a,void 0,l===void 0?null:l)}function ma(e,r,a,l){var h=Lt();l=l===void 0?null:l;var f=void 0;if(Je!==null){var y=Je.memoizedState;if(f=y.destroy,l!==null&&hl(l,y.deps)){h.memoizedState=Xs(r,a,f,l);return}}ze.flags|=e,h.memoizedState=Xs(1|r,a,f,l)}function Nd(e,r){return pa(8390656,8,e,r)}function yl(e,r){return ma(2048,8,e,r)}function Rd(e,r){return ma(4,2,e,r)}function Od(e,r){return ma(4,4,e,r)}function Dd(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Pd(e,r,a){return a=a!=null?a.concat([e]):null,ma(4,4,Dd.bind(null,r,e),a)}function vl(){}function Ad(e,r){var a=Lt();r=r===void 0?null:r;var l=a.memoizedState;return l!==null&&r!==null&&hl(r,l[1])?l[0]:(a.memoizedState=[e,r],e)}function Id(e,r){var a=Lt();r=r===void 0?null:r;var l=a.memoizedState;return l!==null&&r!==null&&hl(r,l[1])?l[0]:(e=e(),a.memoizedState=[e,r],e)}function Ld(e,r,a){return(un&21)===0?(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=a):(Bt(a,r)||(a=hc(),ze.lanes|=a,cn|=a,e.baseState=!0),r)}function Q0(e,r){var a=Ne;Ne=a!==0&&4>a?a:4,e(!0);var l=dl.transition;dl.transition={};try{e(!1),r()}finally{Ne=a,dl.transition=l}}function Md(){return Lt().memoizedState}function X0(e,r,a){var l=Wr(e);if(a={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null},$d(e))Ud(r,a);else if(a=md(e,r,a,l),a!==null){var h=mt();Ht(a,e,l,h),zd(a,r,l)}}function Z0(e,r,a){var l=Wr(e),h={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null};if($d(e))Ud(r,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var y=r.lastRenderedState,b=f(y,a);if(h.hasEagerState=!0,h.eagerState=b,Bt(b,y)){var E=r.interleaved;E===null?(h.next=h,il(r)):(h.next=E.next,E.next=h),r.interleaved=h;return}}catch{}a=md(e,r,h,l),a!==null&&(h=mt(),Ht(a,e,l,h),zd(a,r,l))}}function $d(e){var r=e.alternate;return e===ze||r!==null&&r===ze}function Ud(e,r){Js=fa=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function zd(e,r,a){if((a&4194240)!==0){var l=r.lanes;l&=e.pendingLanes,a|=l,r.lanes=a,wo(e,a)}}var ga={readContext:It,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},em={readContext:It,useCallback:function(e,r){return Zt().memoizedState=[e,r===void 0?null:r],e},useContext:It,useEffect:Nd,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,pa(4194308,4,Dd.bind(null,r,e),a)},useLayoutEffect:function(e,r){return pa(4194308,4,e,r)},useInsertionEffect:function(e,r){return pa(4,2,e,r)},useMemo:function(e,r){var a=Zt();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var l=Zt();return r=a!==void 0?a(r):r,l.memoizedState=l.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=X0.bind(null,ze,e),[l.memoizedState,e]},useRef:function(e){var r=Zt();return e={current:e},r.memoizedState=e},useState:Td,useDebugValue:vl,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=Td(!1),r=e[0];return e=Q0.bind(null,e[1]),Zt().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var l=ze,h=Zt();if(Le){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),Ze===null)throw Error(s(349));(un&30)!==0||bd(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,Nd(Sd.bind(null,l,f,e),[e]),l.flags|=2048,Xs(9,kd.bind(null,l,f,a,r),void 0,null),a},useId:function(){var e=Zt(),r=Ze.identifierPrefix;if(Le){var a=ur,l=lr;a=(l&~(1<<32-zt(l)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ys++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Y0++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},tm={readContext:It,useCallback:Ad,useContext:It,useEffect:yl,useImperativeHandle:Pd,useInsertionEffect:Rd,useLayoutEffect:Od,useMemo:Id,useReducer:ml,useRef:Cd,useState:function(){return ml(Qs)},useDebugValue:vl,useDeferredValue:function(e){var r=Lt();return Ld(r,Je.memoizedState,e)},useTransition:function(){var e=ml(Qs)[0],r=Lt().memoizedState;return[e,r]},useMutableSource:wd,useSyncExternalStore:xd,useId:Md,unstable_isNewReconciler:!1},rm={readContext:It,useCallback:Ad,useContext:It,useEffect:yl,useImperativeHandle:Pd,useInsertionEffect:Rd,useLayoutEffect:Od,useMemo:Id,useReducer:gl,useRef:Cd,useState:function(){return gl(Qs)},useDebugValue:vl,useDeferredValue:function(e){var r=Lt();return Je===null?r.memoizedState=e:Ld(r,Je.memoizedState,e)},useTransition:function(){var e=gl(Qs)[0],r=Lt().memoizedState;return[e,r]},useMutableSource:wd,useSyncExternalStore:xd,useId:Md,unstable_isNewReconciler:!1};function Wt(e,r){if(e&&e.defaultProps){r=z({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}function _l(e,r,a,l){r=e.memoizedState,a=a(l,r),a=a==null?r:z({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ya={isMounted:function(e){return(e=e._reactInternals)?ir(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var l=mt(),h=Wr(e),f=dr(l,h);f.payload=r,a!=null&&(f.callback=a),r=Ur(e,f,h),r!==null&&(Ht(r,e,h,l),ua(r,e,h))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var l=mt(),h=Wr(e),f=dr(l,h);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=Ur(e,f,h),r!==null&&(Ht(r,e,h,l),ua(r,e,h))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=mt(),l=Wr(e),h=dr(a,l);h.tag=2,r!=null&&(h.callback=r),r=Ur(e,h,l),r!==null&&(Ht(r,e,l,a),ua(r,e,l))}};function Bd(e,r,a,l,h,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,y):r.prototype&&r.prototype.isPureReactComponent?!$s(a,l)||!$s(h,f):!0}function Fd(e,r,a){var l=!1,h=Lr,f=r.contextType;return typeof f=="object"&&f!==null?f=It(f):(h=wt(r)?nn:ut.current,l=r.contextTypes,f=(l=l!=null)?Wn(e,h):Lr),r=new r(a,f),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ya,e.stateNode=r,r._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=f),r}function Wd(e,r,a,l){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==e&&ya.enqueueReplaceState(r,r.state,null)}function wl(e,r,a,l){var h=e.stateNode;h.props=a,h.state=e.memoizedState,h.refs={},al(e);var f=r.contextType;typeof f=="object"&&f!==null?h.context=It(f):(f=wt(r)?nn:ut.current,h.context=Wn(e,f)),h.state=e.memoizedState,f=r.getDerivedStateFromProps,typeof f=="function"&&(_l(e,r,f,a),h.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&ya.enqueueReplaceState(h,h.state,null),ca(e,a,h,l),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Qn(e,r){try{var a="",l=r;do a+=fe(l),l=l.return;while(l);var h=a}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:r,stack:h,digest:null}}function xl(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function bl(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var nm=typeof WeakMap=="function"?WeakMap:Map;function Vd(e,r,a){a=dr(-1,a),a.tag=3,a.payload={element:null};var l=r.value;return a.callback=function(){Sa||(Sa=!0,Ml=l),bl(e,r)},a}function qd(e,r,a){a=dr(-1,a),a.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var h=r.value;a.payload=function(){return l(h)},a.callback=function(){bl(e,r)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){bl(e,r),typeof l!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),a}function Hd(e,r,a){var l=e.pingCache;if(l===null){l=e.pingCache=new nm;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(h.add(a),e=ym.bind(null,e,r,a),r.then(e,e))}function Kd(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Gd(e,r,a,l,h){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=dr(-1,1),r.tag=2,Ur(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var sm=D.ReactCurrentOwner,xt=!1;function pt(e,r,a,l){r.child=e===null?pd(r,null,a,l):Kn(r,e.child,a,l)}function Jd(e,r,a,l,h){a=a.render;var f=r.ref;return Jn(r,h),l=fl(e,r,a,l,f,h),a=pl(),e!==null&&!xt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~h,hr(e,r,h)):(Le&&a&&Yo(r),r.flags|=1,pt(e,r,l,h),r.child)}function Yd(e,r,a,l,h){if(e===null){var f=a.type;return typeof f=="function"&&!Vl(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=f,Qd(e,r,f,l,h)):(e=Ra(a.type,null,l,r,r.mode,h),e.ref=r.ref,e.return=r,r.child=e)}if(f=e.child,(e.lanes&h)===0){var y=f.memoizedProps;if(a=a.compare,a=a!==null?a:$s,a(y,l)&&e.ref===r.ref)return hr(e,r,h)}return r.flags|=1,e=qr(f,l),e.ref=r.ref,e.return=r,r.child=e}function Qd(e,r,a,l,h){if(e!==null){var f=e.memoizedProps;if($s(f,l)&&e.ref===r.ref)if(xt=!1,r.pendingProps=l=f,(e.lanes&h)!==0)(e.flags&131072)!==0&&(xt=!0);else return r.lanes=e.lanes,hr(e,r,h)}return kl(e,r,a,l,h)}function Xd(e,r,a){var l=r.pendingProps,h=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Zn,Nt),Nt|=a;else{if((a&1073741824)===0)return e=f!==null?f.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Oe(Zn,Nt),Nt|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:a,Oe(Zn,Nt),Nt|=l}else f!==null?(l=f.baseLanes|a,r.memoizedState=null):l=a,Oe(Zn,Nt),Nt|=l;return pt(e,r,h,a),r.child}function Zd(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function kl(e,r,a,l,h){var f=wt(a)?nn:ut.current;return f=Wn(r,f),Jn(r,h),a=fl(e,r,a,l,f,h),l=pl(),e!==null&&!xt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~h,hr(e,r,h)):(Le&&l&&Yo(r),r.flags|=1,pt(e,r,a,h),r.child)}function eh(e,r,a,l,h){if(wt(a)){var f=!0;ta(r)}else f=!1;if(Jn(r,h),r.stateNode===null)_a(e,r),Fd(r,a,l),wl(r,a,l,h),l=!0;else if(e===null){var y=r.stateNode,b=r.memoizedProps;y.props=b;var E=y.context,U=a.contextType;typeof U=="object"&&U!==null?U=It(U):(U=wt(a)?nn:ut.current,U=Wn(r,U));var Y=a.getDerivedStateFromProps,Q=typeof Y=="function"||typeof y.getSnapshotBeforeUpdate=="function";Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==l||E!==U)&&Wd(r,y,l,U),$r=!1;var J=r.memoizedState;y.state=J,ca(r,l,y,h),E=r.memoizedState,b!==l||J!==E||_t.current||$r?(typeof Y=="function"&&(_l(r,a,Y,l),E=r.memoizedState),(b=$r||Bd(r,a,b,l,J,E,U))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=E),y.props=l,y.state=E,y.context=U,l=b):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{y=r.stateNode,gd(e,r),b=r.memoizedProps,U=r.type===r.elementType?b:Wt(r.type,b),y.props=U,Q=r.pendingProps,J=y.context,E=a.contextType,typeof E=="object"&&E!==null?E=It(E):(E=wt(a)?nn:ut.current,E=Wn(r,E));var ie=a.getDerivedStateFromProps;(Y=typeof ie=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==Q||J!==E)&&Wd(r,y,l,E),$r=!1,J=r.memoizedState,y.state=J,ca(r,l,y,h);var oe=r.memoizedState;b!==Q||J!==oe||_t.current||$r?(typeof ie=="function"&&(_l(r,a,ie,l),oe=r.memoizedState),(U=$r||Bd(r,a,U,l,J,oe,E)||!1)?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,oe,E),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,oe,E)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=oe),y.props=l,y.state=oe,y.context=E,l=U):(typeof y.componentDidUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&J===e.memoizedState||(r.flags|=1024),l=!1)}return Sl(e,r,a,l,f,h)}function Sl(e,r,a,l,h,f){Zd(e,r);var y=(r.flags&128)!==0;if(!l&&!y)return h&&id(r,a,!1),hr(e,r,f);l=r.stateNode,sm.current=r;var b=y&&typeof a.getDerivedStateFromError!="function"?null:l.render();return r.flags|=1,e!==null&&y?(r.child=Kn(r,e.child,null,f),r.child=Kn(r,null,b,f)):pt(e,r,b,f),r.memoizedState=l.state,h&&id(r,a,!0),r.child}function th(e){var r=e.stateNode;r.pendingContext?nd(e,r.pendingContext,r.pendingContext!==r.context):r.context&&nd(e,r.context,!1),ol(e,r.containerInfo)}function rh(e,r,a,l,h){return Hn(),el(h),r.flags|=256,pt(e,r,a,l),r.child}var jl={dehydrated:null,treeContext:null,retryLane:0};function El(e){return{baseLanes:e,cachePool:null,transitions:null}}function nh(e,r,a){var l=r.pendingProps,h=Ue.current,f=!1,y=(r.flags&128)!==0,b;if((b=y)||(b=e!==null&&e.memoizedState===null?!1:(h&2)!==0),b?(f=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Oe(Ue,h&1),e===null)return Zo(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(y=l.children,e=l.fallback,f?(l=r.mode,f=r.child,y={mode:"hidden",children:y},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=y):f=Oa(y,l,0,null),e=pn(e,l,a,null),f.return=r,e.return=r,f.sibling=e,r.child=f,r.child.memoizedState=El(a),r.memoizedState=jl,e):Tl(r,y));if(h=e.memoizedState,h!==null&&(b=h.dehydrated,b!==null))return im(e,r,y,l,b,h,a);if(f){f=l.fallback,y=r.mode,h=e.child,b=h.sibling;var E={mode:"hidden",children:l.children};return(y&1)===0&&r.child!==h?(l=r.child,l.childLanes=0,l.pendingProps=E,r.deletions=null):(l=qr(h,E),l.subtreeFlags=h.subtreeFlags&14680064),b!==null?f=qr(b,f):(f=pn(f,y,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,y=e.child.memoizedState,y=y===null?El(a):{baseLanes:y.baseLanes|a,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~a,r.memoizedState=jl,l}return f=e.child,e=f.sibling,l=qr(f,{mode:"visible",children:l.children}),(r.mode&1)===0&&(l.lanes=a),l.return=r,l.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=l,r.memoizedState=null,l}function Tl(e,r){return r=Oa({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function va(e,r,a,l){return l!==null&&el(l),Kn(r,e.child,null,a),e=Tl(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function im(e,r,a,l,h,f,y){if(a)return r.flags&256?(r.flags&=-257,l=xl(Error(s(422))),va(e,r,y,l)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(f=l.fallback,h=r.mode,l=Oa({mode:"visible",children:l.children},h,0,null),f=pn(f,h,y,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,(r.mode&1)!==0&&Kn(r,e.child,null,y),r.child.memoizedState=El(y),r.memoizedState=jl,f);if((r.mode&1)===0)return va(e,r,y,null);if(h.data==="$!"){if(l=h.nextSibling&&h.nextSibling.dataset,l)var b=l.dgst;return l=b,f=Error(s(419)),l=xl(f,l,void 0),va(e,r,y,l)}if(b=(y&e.childLanes)!==0,xt||b){if(l=Ze,l!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(l.suspendedLanes|y))!==0?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,cr(e,h),Ht(l,e,h,-1))}return Wl(),l=xl(Error(s(421))),va(e,r,y,l)}return h.data==="$?"?(r.flags|=128,r.child=e.child,r=vm.bind(null,e),h._reactRetry=r,null):(e=f.treeContext,Ct=Ar(h.nextSibling),Tt=r,Le=!0,Ft=null,e!==null&&(Pt[At++]=lr,Pt[At++]=ur,Pt[At++]=sn,lr=e.id,ur=e.overflow,sn=r),r=Tl(r,l.children),r.flags|=4096,r)}function sh(e,r,a){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r),sl(e.return,r,a)}function Cl(e,r,a,l,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function ih(e,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(pt(e,r,l.children,a),l=Ue.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sh(e,a,r);else if(e.tag===19)sh(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Oe(Ue,l),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(a=r.child,h=null;a!==null;)e=a.alternate,e!==null&&da(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Cl(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(e=h.alternate,e!==null&&da(e)===null){r.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Cl(r,!0,a,null,f);break;case"together":Cl(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function _a(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function hr(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),cn|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(s(153));if(r.child!==null){for(e=r.child,a=qr(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=qr(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function am(e,r,a){switch(r.tag){case 3:th(r),Hn();break;case 5:_d(r);break;case 1:wt(r.type)&&ta(r);break;case 4:ol(r,r.stateNode.containerInfo);break;case 10:var l=r.type._context,h=r.memoizedProps.value;Oe(oa,l._currentValue),l._currentValue=h;break;case 13:if(l=r.memoizedState,l!==null)return l.dehydrated!==null?(Oe(Ue,Ue.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?nh(e,r,a):(Oe(Ue,Ue.current&1),e=hr(e,r,a),e!==null?e.sibling:null);Oe(Ue,Ue.current&1);break;case 19:if(l=(a&r.childLanes)!==0,(e.flags&128)!==0){if(l)return ih(e,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Oe(Ue,Ue.current),l)break;return null;case 22:case 23:return r.lanes=0,Xd(e,r,a)}return hr(e,r,a)}var ah,Nl,oh,lh;ah=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Nl=function(){},oh=function(e,r,a,l){var h=e.memoizedProps;if(h!==l){e=r.stateNode,ln(Xt.current);var f=null;switch(a){case"input":h=$e(e,h),l=$e(e,l),f=[];break;case"select":h=z({},h,{value:void 0}),l=z({},l,{value:void 0}),f=[];break;case"textarea":h=vs(e,h),l=vs(e,l),f=[];break;default:typeof h.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Xi)}Tn(a,l);var y;a=null;for(U in h)if(!l.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var b=h[U];for(y in b)b.hasOwnProperty(y)&&(a||(a={}),a[y]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?f||(f=[]):(f=f||[]).push(U,null));for(U in l){var E=l[U];if(b=h?.[U],l.hasOwnProperty(U)&&E!==b&&(E!=null||b!=null))if(U==="style")if(b){for(y in b)!b.hasOwnProperty(y)||E&&E.hasOwnProperty(y)||(a||(a={}),a[y]="");for(y in E)E.hasOwnProperty(y)&&b[y]!==E[y]&&(a||(a={}),a[y]=E[y])}else a||(f||(f=[]),f.push(U,a)),a=E;else U==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,b=b?b.__html:void 0,E!=null&&b!==E&&(f=f||[]).push(U,E)):U==="children"?typeof E!="string"&&typeof E!="number"||(f=f||[]).push(U,""+E):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(E!=null&&U==="onScroll"&&Ae("scroll",e),f||b===E||(f=[])):(f=f||[]).push(U,E))}a&&(f=f||[]).push("style",a);var U=f;(r.updateQueue=U)&&(r.flags|=4)}},lh=function(e,r,a,l){a!==l&&(r.flags|=4)};function Zs(e,r){if(!Le)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function dt(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(r)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&14680064,l|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,r}function om(e,r,a){var l=r.pendingProps;switch(Qo(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(r),null;case 1:return wt(r.type)&&ea(),dt(r),null;case 3:return l=r.stateNode,Yn(),Ie(_t),Ie(ut),cl(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ia(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ft!==null&&(zl(Ft),Ft=null))),Nl(e,r),dt(r),null;case 5:ll(r);var h=ln(Gs.current);if(a=r.type,e!==null&&r.stateNode!=null)oh(e,r,a,l,h),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!l){if(r.stateNode===null)throw Error(s(166));return dt(r),null}if(e=ln(Xt.current),ia(r)){l=r.stateNode,a=r.type;var f=r.memoizedProps;switch(l[Qt]=r,l[Ws]=f,e=(r.mode&1)!==0,a){case"dialog":Ae("cancel",l),Ae("close",l);break;case"iframe":case"object":case"embed":Ae("load",l);break;case"video":case"audio":for(h=0;h<zs.length;h++)Ae(zs[h],l);break;case"source":Ae("error",l);break;case"img":case"image":case"link":Ae("error",l),Ae("load",l);break;case"details":Ae("toggle",l);break;case"input":_r(l,f),Ae("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Ae("invalid",l);break;case"textarea":_s(l,f),Ae("invalid",l)}Tn(a,f),h=null;for(var y in f)if(f.hasOwnProperty(y)){var b=f[y];y==="children"?typeof b=="string"?l.textContent!==b&&(f.suppressHydrationWarning!==!0&&Qi(l.textContent,b,e),h=["children",b]):typeof b=="number"&&l.textContent!==""+b&&(f.suppressHydrationWarning!==!0&&Qi(l.textContent,b,e),h=["children",""+b]):o.hasOwnProperty(y)&&b!=null&&y==="onScroll"&&Ae("scroll",l)}switch(a){case"input":yr(l),ys(l,f,!0);break;case"textarea":yr(l),Ni(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=Xi)}l=h,r.updateQueue=l,l!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ri(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(a,{is:l.is}):(e=y.createElement(a),a==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,a),e[Qt]=r,e[Ws]=l,ah(e,r,!1,!1),r.stateNode=e;e:{switch(y=Cn(a,l),a){case"dialog":Ae("cancel",e),Ae("close",e),h=l;break;case"iframe":case"object":case"embed":Ae("load",e),h=l;break;case"video":case"audio":for(h=0;h<zs.length;h++)Ae(zs[h],e);h=l;break;case"source":Ae("error",e),h=l;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),h=l;break;case"details":Ae("toggle",e),h=l;break;case"input":_r(e,l),h=$e(e,l),Ae("invalid",e);break;case"option":h=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},h=z({},l,{value:void 0}),Ae("invalid",e);break;case"textarea":_s(e,l),h=vs(e,l),Ae("invalid",e);break;default:h=l}Tn(a,h),b=h;for(f in b)if(b.hasOwnProperty(f)){var E=b[f];f==="style"?xs(e,E):f==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&En(e,E)):f==="children"?typeof E=="string"?(a!=="textarea"||E!=="")&&br(e,E):typeof E=="number"&&br(e,""+E):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?E!=null&&f==="onScroll"&&Ae("scroll",e):E!=null&&M(e,f,E,y))}switch(a){case"input":yr(e),ys(e,l,!1);break;case"textarea":yr(e),Ni(e);break;case"option":l.value!=null&&e.setAttribute("value",""+xe(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?xr(e,!!l.multiple,f,!1):l.defaultValue!=null&&xr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Xi)}switch(a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return dt(r),null;case 6:if(e&&r.stateNode!=null)lh(e,r,e.memoizedProps,l);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(a=ln(Gs.current),ln(Xt.current),ia(r)){if(l=r.stateNode,a=r.memoizedProps,l[Qt]=r,(f=l.nodeValue!==a)&&(e=Tt,e!==null))switch(e.tag){case 3:Qi(l.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qi(l.nodeValue,a,(e.mode&1)!==0)}f&&(r.flags|=4)}else l=(a.nodeType===9?a:a.ownerDocument).createTextNode(l),l[Qt]=r,r.stateNode=l}return dt(r),null;case 13:if(Ie(Ue),l=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&Ct!==null&&(r.mode&1)!==0&&(r.flags&128)===0)dd(),Hn(),r.flags|=98560,f=!1;else if(f=ia(r),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Qt]=r}else Hn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;dt(r),f=!1}else Ft!==null&&(zl(Ft),Ft=null),f=!0;if(!f)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Ue.current&1)!==0?Ye===0&&(Ye=3):Wl())),r.updateQueue!==null&&(r.flags|=4),dt(r),null);case 4:return Yn(),Nl(e,r),e===null&&Bs(r.stateNode.containerInfo),dt(r),null;case 10:return nl(r.type._context),dt(r),null;case 17:return wt(r.type)&&ea(),dt(r),null;case 19:if(Ie(Ue),f=r.memoizedState,f===null)return dt(r),null;if(l=(r.flags&128)!==0,y=f.rendering,y===null)if(l)Zs(f,!1);else{if(Ye!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(y=da(e),y!==null){for(r.flags|=128,Zs(f,!1),l=y.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),r.subtreeFlags=0,l=a,a=r.child;a!==null;)f=a,e=l,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Oe(Ue,Ue.current&1|2),r.child}e=e.sibling}f.tail!==null&&qe()>es&&(r.flags|=128,l=!0,Zs(f,!1),r.lanes=4194304)}else{if(!l)if(e=da(y),e!==null){if(r.flags|=128,l=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Zs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Le)return dt(r),null}else 2*qe()-f.renderingStartTime>es&&a!==1073741824&&(r.flags|=128,l=!0,Zs(f,!1),r.lanes=4194304);f.isBackwards?(y.sibling=r.child,r.child=y):(a=f.last,a!==null?a.sibling=y:r.child=y,f.last=y)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=qe(),r.sibling=null,a=Ue.current,Oe(Ue,l?a&1|2:a&1),r):(dt(r),null);case 22:case 23:return Fl(),l=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(r.flags|=8192),l&&(r.mode&1)!==0?(Nt&1073741824)!==0&&(dt(r),r.subtreeFlags&6&&(r.flags|=8192)):dt(r),null;case 24:return null;case 25:return null}throw Error(s(156,r.tag))}function lm(e,r){switch(Qo(r),r.tag){case 1:return wt(r.type)&&ea(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Yn(),Ie(_t),Ie(ut),cl(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return ll(r),null;case 13:if(Ie(Ue),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Hn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Ie(Ue),null;case 4:return Yn(),null;case 10:return nl(r.type._context),null;case 22:case 23:return Fl(),null;case 24:return null;default:return null}}var wa=!1,ht=!1,um=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Xn(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(l){We(e,r,l)}else a.current=null}function Rl(e,r,a){try{a()}catch(l){We(e,r,l)}}var uh=!1;function cm(e,r){if(Fo=zi,e=Bc(),Ao(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var y=0,b=-1,E=-1,U=0,Y=0,Q=e,J=null;t:for(;;){for(var ie;Q!==a||h!==0&&Q.nodeType!==3||(b=y+h),Q!==f||l!==0&&Q.nodeType!==3||(E=y+l),Q.nodeType===3&&(y+=Q.nodeValue.length),(ie=Q.firstChild)!==null;)J=Q,Q=ie;for(;;){if(Q===e)break t;if(J===a&&++U===h&&(b=y),J===f&&++Y===l&&(E=y),(ie=Q.nextSibling)!==null)break;Q=J,J=Q.parentNode}Q=ie}a=b===-1||E===-1?null:{start:b,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(Wo={focusedElem:e,selectionRange:a},zi=!1,ae=r;ae!==null;)if(r=ae,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,ae=e;else for(;ae!==null;){r=ae;try{var oe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var le=oe.memoizedProps,He=oe.memoizedState,L=r.stateNode,N=L.getSnapshotBeforeUpdate(r.elementType===r.type?le:Wt(r.type,le),He);L.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var $=r.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Z){We(r,r.return,Z)}if(e=r.sibling,e!==null){e.return=r.return,ae=e;break}ae=r.return}return oe=uh,uh=!1,oe}function ei(e,r,a){var l=r.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&e)===e){var f=h.destroy;h.destroy=void 0,f!==void 0&&Rl(r,a,f)}h=h.next}while(h!==l)}}function xa(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.create;a.destroy=l()}a=a.next}while(a!==r)}}function Ol(e){var r=e.ref;if(r!==null){var a=e.stateNode;e.tag,e=a,typeof r=="function"?r(e):r.current=e}}function ch(e){var r=e.alternate;r!==null&&(e.alternate=null,ch(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Qt],delete r[Ws],delete r[Ko],delete r[H0],delete r[K0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dh(e){return e.tag===5||e.tag===3||e.tag===4}function hh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dl(e,r,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Xi));else if(l!==4&&(e=e.child,e!==null))for(Dl(e,r,a),e=e.sibling;e!==null;)Dl(e,r,a),e=e.sibling}function Pl(e,r,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Pl(e,r,a),e=e.sibling;e!==null;)Pl(e,r,a),e=e.sibling}var st=null,Vt=!1;function zr(e,r,a){for(a=a.child;a!==null;)fh(e,r,a),a=a.sibling}function fh(e,r,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Ai,a)}catch{}switch(a.tag){case 5:ht||Xn(a,r);case 6:var l=st,h=Vt;st=null,zr(e,r,a),st=l,Vt=h,st!==null&&(Vt?(e=st,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):st.removeChild(a.stateNode));break;case 18:st!==null&&(Vt?(e=st,a=a.stateNode,e.nodeType===8?Ho(e.parentNode,a):e.nodeType===1&&Ho(e,a),Ds(e)):Ho(st,a.stateNode));break;case 4:l=st,h=Vt,st=a.stateNode.containerInfo,Vt=!0,zr(e,r,a),st=l,Vt=h;break;case 0:case 11:case 14:case 15:if(!ht&&(l=a.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){h=l=l.next;do{var f=h,y=f.destroy;f=f.tag,y!==void 0&&((f&2)!==0||(f&4)!==0)&&Rl(a,r,y),h=h.next}while(h!==l)}zr(e,r,a);break;case 1:if(!ht&&(Xn(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=a.memoizedProps,l.state=a.memoizedState,l.componentWillUnmount()}catch(b){We(a,r,b)}zr(e,r,a);break;case 21:zr(e,r,a);break;case 22:a.mode&1?(ht=(l=ht)||a.memoizedState!==null,zr(e,r,a),ht=l):zr(e,r,a);break;default:zr(e,r,a)}}function ph(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new um),r.forEach(function(l){var h=_m.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}}function qt(e,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];try{var f=e,y=r,b=y;e:for(;b!==null;){switch(b.tag){case 5:st=b.stateNode,Vt=!1;break e;case 3:st=b.stateNode.containerInfo,Vt=!0;break e;case 4:st=b.stateNode.containerInfo,Vt=!0;break e}b=b.return}if(st===null)throw Error(s(160));fh(f,y,h),st=null,Vt=!1;var E=h.alternate;E!==null&&(E.return=null),h.return=null}catch(U){We(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)mh(r,e),r=r.sibling}function mh(e,r){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qt(r,e),er(e),l&4){try{ei(3,e,e.return),xa(3,e)}catch(le){We(e,e.return,le)}try{ei(5,e,e.return)}catch(le){We(e,e.return,le)}}break;case 1:qt(r,e),er(e),l&512&&a!==null&&Xn(a,a.return);break;case 5:if(qt(r,e),er(e),l&512&&a!==null&&Xn(a,a.return),e.flags&32){var h=e.stateNode;try{br(h,"")}catch(le){We(e,e.return,le)}}if(l&4&&(h=e.stateNode,h!=null)){var f=e.memoizedProps,y=a!==null?a.memoizedProps:f,b=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{b==="input"&&f.type==="radio"&&f.name!=null&&ft(h,f),Cn(b,y);var U=Cn(b,f);for(y=0;y<E.length;y+=2){var Y=E[y],Q=E[y+1];Y==="style"?xs(h,Q):Y==="dangerouslySetInnerHTML"?En(h,Q):Y==="children"?br(h,Q):M(h,Y,Q,U)}switch(b){case"input":wr(h,f);break;case"textarea":Ci(h,f);break;case"select":var J=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var ie=f.value;ie!=null?xr(h,!!f.multiple,ie,!1):J!==!!f.multiple&&(f.defaultValue!=null?xr(h,!!f.multiple,f.defaultValue,!0):xr(h,!!f.multiple,f.multiple?[]:"",!1))}h[Ws]=f}catch(le){We(e,e.return,le)}}break;case 6:if(qt(r,e),er(e),l&4){if(e.stateNode===null)throw Error(s(162));h=e.stateNode,f=e.memoizedProps;try{h.nodeValue=f}catch(le){We(e,e.return,le)}}break;case 3:if(qt(r,e),er(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ds(r.containerInfo)}catch(le){We(e,e.return,le)}break;case 4:qt(r,e),er(e);break;case 13:qt(r,e),er(e),h=e.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(Ll=qe())),l&4&&ph(e);break;case 22:if(Y=a!==null&&a.memoizedState!==null,e.mode&1?(ht=(U=ht)||Y,qt(r,e),ht=U):qt(r,e),er(e),l&8192){if(U=e.memoizedState!==null,(e.stateNode.isHidden=U)&&!Y&&(e.mode&1)!==0)for(ae=e,Y=e.child;Y!==null;){for(Q=ae=Y;ae!==null;){switch(J=ae,ie=J.child,J.tag){case 0:case 11:case 14:case 15:ei(4,J,J.return);break;case 1:Xn(J,J.return);var oe=J.stateNode;if(typeof oe.componentWillUnmount=="function"){l=J,a=J.return;try{r=l,oe.props=r.memoizedProps,oe.state=r.memoizedState,oe.componentWillUnmount()}catch(le){We(l,a,le)}}break;case 5:Xn(J,J.return);break;case 22:if(J.memoizedState!==null){vh(Q);continue}}ie!==null?(ie.return=J,ae=ie):vh(Q)}Y=Y.sibling}e:for(Y=null,Q=e;;){if(Q.tag===5){if(Y===null){Y=Q;try{h=Q.stateNode,U?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(b=Q.stateNode,E=Q.memoizedProps.style,y=E!=null&&E.hasOwnProperty("display")?E.display:null,b.style.display=Zr("display",y))}catch(le){We(e,e.return,le)}}}else if(Q.tag===6){if(Y===null)try{Q.stateNode.nodeValue=U?"":Q.memoizedProps}catch(le){We(e,e.return,le)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===e)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===e)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===e)break e;Y===Q&&(Y=null),Q=Q.return}Y===Q&&(Y=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:qt(r,e),er(e),l&4&&ph(e);break;case 21:break;default:qt(r,e),er(e)}}function er(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(dh(a)){var l=a;break e}a=a.return}throw Error(s(160))}switch(l.tag){case 5:var h=l.stateNode;l.flags&32&&(br(h,""),l.flags&=-33);var f=hh(e);Pl(e,f,h);break;case 3:case 4:var y=l.stateNode.containerInfo,b=hh(e);Dl(e,b,y);break;default:throw Error(s(161))}}catch(E){We(e,e.return,E)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function dm(e,r,a){ae=e,gh(e)}function gh(e,r,a){for(var l=(e.mode&1)!==0;ae!==null;){var h=ae,f=h.child;if(h.tag===22&&l){var y=h.memoizedState!==null||wa;if(!y){var b=h.alternate,E=b!==null&&b.memoizedState!==null||ht;b=wa;var U=ht;if(wa=y,(ht=E)&&!U)for(ae=h;ae!==null;)y=ae,E=y.child,y.tag===22&&y.memoizedState!==null?_h(h):E!==null?(E.return=y,ae=E):_h(h);for(;f!==null;)ae=f,gh(f),f=f.sibling;ae=h,wa=b,ht=U}yh(e)}else(h.subtreeFlags&8772)!==0&&f!==null?(f.return=h,ae=f):yh(e)}}function yh(e){for(;ae!==null;){var r=ae;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:ht||xa(5,r);break;case 1:var l=r.stateNode;if(r.flags&4&&!ht)if(a===null)l.componentDidMount();else{var h=r.elementType===r.type?a.memoizedProps:Wt(r.type,a.memoizedProps);l.componentDidUpdate(h,a.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=r.updateQueue;f!==null&&vd(r,f,l);break;case 3:var y=r.updateQueue;if(y!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}vd(r,y,a)}break;case 5:var b=r.stateNode;if(a===null&&r.flags&4){a=b;var E=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&a.focus();break;case"img":E.src&&(a.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var Y=U.memoizedState;if(Y!==null){var Q=Y.dehydrated;Q!==null&&Ds(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}ht||r.flags&512&&Ol(r)}catch(J){We(r,r.return,J)}}if(r===e){ae=null;break}if(a=r.sibling,a!==null){a.return=r.return,ae=a;break}ae=r.return}}function vh(e){for(;ae!==null;){var r=ae;if(r===e){ae=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ae=a;break}ae=r.return}}function _h(e){for(;ae!==null;){var r=ae;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{xa(4,r)}catch(E){We(r,a,E)}break;case 1:var l=r.stateNode;if(typeof l.componentDidMount=="function"){var h=r.return;try{l.componentDidMount()}catch(E){We(r,h,E)}}var f=r.return;try{Ol(r)}catch(E){We(r,f,E)}break;case 5:var y=r.return;try{Ol(r)}catch(E){We(r,y,E)}}}catch(E){We(r,r.return,E)}if(r===e){ae=null;break}var b=r.sibling;if(b!==null){b.return=r.return,ae=b;break}ae=r.return}}var hm=Math.ceil,ba=D.ReactCurrentDispatcher,Al=D.ReactCurrentOwner,Mt=D.ReactCurrentBatchConfig,Te=0,Ze=null,Ke=null,it=0,Nt=0,Zn=Ir(0),Ye=0,ti=null,cn=0,ka=0,Il=0,ri=null,bt=null,Ll=0,es=1/0,fr=null,Sa=!1,Ml=null,Br=null,ja=!1,Fr=null,Ea=0,ni=0,$l=null,Ta=-1,Ca=0;function mt(){return(Te&6)!==0?qe():Ta!==-1?Ta:Ta=qe()}function Wr(e){return(e.mode&1)===0?1:(Te&2)!==0&&it!==0?it&-it:J0.transition!==null?(Ca===0&&(Ca=hc()),Ca):(e=Ne,e!==0||(e=window.event,e=e===void 0?16:xc(e.type)),e)}function Ht(e,r,a,l){if(50<ni)throw ni=0,$l=null,Error(s(185));Ts(e,a,l),((Te&2)===0||e!==Ze)&&(e===Ze&&((Te&2)===0&&(ka|=a),Ye===4&&Vr(e,it)),kt(e,l),a===1&&Te===0&&(r.mode&1)===0&&(es=qe()+500,ra&&Mr()))}function kt(e,r){var a=e.callbackNode;Jp(e,r);var l=Mi(e,e===Ze?it:0);if(l===0)a!==null&&Di(a),e.callbackNode=null,e.callbackPriority=0;else if(r=l&-l,e.callbackPriority!==r){if(a!=null&&Di(a),r===1)e.tag===0?G0(xh.bind(null,e)):ad(xh.bind(null,e)),V0(function(){(Te&6)===0&&Mr()}),a=null;else{switch(fc(l)){case 1:a=yo;break;case 4:a=cc;break;case 16:a=Pi;break;case 536870912:a=dc;break;default:a=Pi}a=Nh(a,wh.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function wh(e,r){if(Ta=-1,Ca=0,(Te&6)!==0)throw Error(s(327));var a=e.callbackNode;if(ts()&&e.callbackNode!==a)return null;var l=Mi(e,e===Ze?it:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||r)r=Na(e,l);else{r=l;var h=Te;Te|=2;var f=kh();(Ze!==e||it!==r)&&(fr=null,es=qe()+500,hn(e,r));do try{mm();break}catch(b){bh(e,b)}while(!0);rl(),ba.current=f,Te=h,Ke!==null?r=0:(Ze=null,it=0,r=Ye)}if(r!==0){if(r===2&&(h=vo(e),h!==0&&(l=h,r=Ul(e,h))),r===1)throw a=ti,hn(e,0),Vr(e,l),kt(e,qe()),a;if(r===6)Vr(e,l);else{if(h=e.current.alternate,(l&30)===0&&!fm(h)&&(r=Na(e,l),r===2&&(f=vo(e),f!==0&&(l=f,r=Ul(e,f))),r===1))throw a=ti,hn(e,0),Vr(e,l),kt(e,qe()),a;switch(e.finishedWork=h,e.finishedLanes=l,r){case 0:case 1:throw Error(s(345));case 2:fn(e,bt,fr);break;case 3:if(Vr(e,l),(l&130023424)===l&&(r=Ll+500-qe(),10<r)){if(Mi(e,0)!==0)break;if(h=e.suspendedLanes,(h&l)!==l){mt(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=qo(fn.bind(null,e,bt,fr),r);break}fn(e,bt,fr);break;case 4:if(Vr(e,l),(l&4194240)===l)break;for(r=e.eventTimes,h=-1;0<l;){var y=31-zt(l);f=1<<y,y=r[y],y>h&&(h=y),l&=~f}if(l=h,l=qe()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*hm(l/1960))-l,10<l){e.timeoutHandle=qo(fn.bind(null,e,bt,fr),l);break}fn(e,bt,fr);break;case 5:fn(e,bt,fr);break;default:throw Error(s(329))}}}return kt(e,qe()),e.callbackNode===a?wh.bind(null,e):null}function Ul(e,r){var a=ri;return e.current.memoizedState.isDehydrated&&(hn(e,r).flags|=256),e=Na(e,r),e!==2&&(r=bt,bt=a,r!==null&&zl(r)),e}function zl(e){bt===null?bt=e:bt.push.apply(bt,e)}function fm(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Bt(f(),h))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Vr(e,r){for(r&=~Il,r&=~ka,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-zt(r),l=1<<a;e[a]=-1,r&=~l}}function xh(e){if((Te&6)!==0)throw Error(s(327));ts();var r=Mi(e,0);if((r&1)===0)return kt(e,qe()),null;var a=Na(e,r);if(e.tag!==0&&a===2){var l=vo(e);l!==0&&(r=l,a=Ul(e,l))}if(a===1)throw a=ti,hn(e,0),Vr(e,r),kt(e,qe()),a;if(a===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,fn(e,bt,fr),kt(e,qe()),null}function Bl(e,r){var a=Te;Te|=1;try{return e(r)}finally{Te=a,Te===0&&(es=qe()+500,ra&&Mr())}}function dn(e){Fr!==null&&Fr.tag===0&&(Te&6)===0&&ts();var r=Te;Te|=1;var a=Mt.transition,l=Ne;try{if(Mt.transition=null,Ne=1,e)return e()}finally{Ne=l,Mt.transition=a,Te=r,(Te&6)===0&&Mr()}}function Fl(){Nt=Zn.current,Ie(Zn)}function hn(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,W0(a)),Ke!==null)for(a=Ke.return;a!==null;){var l=a;switch(Qo(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ea();break;case 3:Yn(),Ie(_t),Ie(ut),cl();break;case 5:ll(l);break;case 4:Yn();break;case 13:Ie(Ue);break;case 19:Ie(Ue);break;case 10:nl(l.type._context);break;case 22:case 23:Fl()}a=a.return}if(Ze=e,Ke=e=qr(e.current,null),it=Nt=r,Ye=0,ti=null,Il=ka=cn=0,bt=ri=null,on!==null){for(r=0;r<on.length;r++)if(a=on[r],l=a.interleaved,l!==null){a.interleaved=null;var h=l.next,f=a.pending;if(f!==null){var y=f.next;f.next=h,l.next=y}a.pending=l}on=null}return e}function bh(e,r){do{var a=Ke;try{if(rl(),ha.current=ga,fa){for(var l=ze.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}fa=!1}if(un=0,Xe=Je=ze=null,Js=!1,Ys=0,Al.current=null,a===null||a.return===null){Ye=1,ti=r,Ke=null;break}e:{var f=e,y=a.return,b=a,E=r;if(r=it,b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var U=E,Y=b,Q=Y.tag;if((Y.mode&1)===0&&(Q===0||Q===11||Q===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ie=Kd(y);if(ie!==null){ie.flags&=-257,Gd(ie,y,b,f,r),ie.mode&1&&Hd(f,U,r),r=ie,E=U;var oe=r.updateQueue;if(oe===null){var le=new Set;le.add(E),r.updateQueue=le}else oe.add(E);break e}else{if((r&1)===0){Hd(f,U,r),Wl();break e}E=Error(s(426))}}else if(Le&&b.mode&1){var He=Kd(y);if(He!==null){(He.flags&65536)===0&&(He.flags|=256),Gd(He,y,b,f,r),el(Qn(E,b));break e}}f=E=Qn(E,b),Ye!==4&&(Ye=2),ri===null?ri=[f]:ri.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,r&=-r,f.lanes|=r;var L=Vd(f,E,r);yd(f,L);break e;case 1:b=E;var N=f.type,$=f.stateNode;if((f.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Br===null||!Br.has($)))){f.flags|=65536,r&=-r,f.lanes|=r;var Z=qd(f,b,r);yd(f,Z);break e}}f=f.return}while(f!==null)}jh(a)}catch(ce){r=ce,Ke===a&&a!==null&&(Ke=a=a.return);continue}break}while(!0)}function kh(){var e=ba.current;return ba.current=ga,e===null?ga:e}function Wl(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Ze===null||(cn&268435455)===0&&(ka&268435455)===0||Vr(Ze,it)}function Na(e,r){var a=Te;Te|=2;var l=kh();(Ze!==e||it!==r)&&(fr=null,hn(e,r));do try{pm();break}catch(h){bh(e,h)}while(!0);if(rl(),Te=a,ba.current=l,Ke!==null)throw Error(s(261));return Ze=null,it=0,Ye}function pm(){for(;Ke!==null;)Sh(Ke)}function mm(){for(;Ke!==null&&!go();)Sh(Ke)}function Sh(e){var r=Ch(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,r===null?jh(e):Ke=r,Al.current=null}function jh(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=om(a,r,Nt),a!==null){Ke=a;return}}else{if(a=lm(a,r),a!==null){a.flags&=32767,Ke=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Ke=null;return}}if(r=r.sibling,r!==null){Ke=r;return}Ke=r=e}while(r!==null);Ye===0&&(Ye=5)}function fn(e,r,a){var l=Ne,h=Mt.transition;try{Mt.transition=null,Ne=1,gm(e,r,a,l)}finally{Mt.transition=h,Ne=l}return null}function gm(e,r,a,l){do ts();while(Fr!==null);if((Te&6)!==0)throw Error(s(327));a=e.finishedWork;var h=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=a.lanes|a.childLanes;if(Yp(e,f),e===Ze&&(Ke=Ze=null,it=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ja||(ja=!0,Nh(Pi,function(){return ts(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=Mt.transition,Mt.transition=null;var y=Ne;Ne=1;var b=Te;Te|=4,Al.current=null,cm(e,a),mh(a,e),L0(Wo),zi=!!Fo,Wo=Fo=null,e.current=a,dm(a),Bp(),Te=b,Ne=y,Mt.transition=f}else e.current=a;if(ja&&(ja=!1,Fr=e,Ea=h),f=e.pendingLanes,f===0&&(Br=null),Vp(a.stateNode),kt(e,qe()),r!==null)for(l=e.onRecoverableError,a=0;a<r.length;a++)h=r[a],l(h.value,{componentStack:h.stack,digest:h.digest});if(Sa)throw Sa=!1,e=Ml,Ml=null,e;return(Ea&1)!==0&&e.tag!==0&&ts(),f=e.pendingLanes,(f&1)!==0?e===$l?ni++:(ni=0,$l=e):ni=0,Mr(),null}function ts(){if(Fr!==null){var e=fc(Ea),r=Mt.transition,a=Ne;try{if(Mt.transition=null,Ne=16>e?16:e,Fr===null)var l=!1;else{if(e=Fr,Fr=null,Ea=0,(Te&6)!==0)throw Error(s(331));var h=Te;for(Te|=4,ae=e.current;ae!==null;){var f=ae,y=f.child;if((ae.flags&16)!==0){var b=f.deletions;if(b!==null){for(var E=0;E<b.length;E++){var U=b[E];for(ae=U;ae!==null;){var Y=ae;switch(Y.tag){case 0:case 11:case 15:ei(8,Y,f)}var Q=Y.child;if(Q!==null)Q.return=Y,ae=Q;else for(;ae!==null;){Y=ae;var J=Y.sibling,ie=Y.return;if(ch(Y),Y===U){ae=null;break}if(J!==null){J.return=ie,ae=J;break}ae=ie}}}var oe=f.alternate;if(oe!==null){var le=oe.child;if(le!==null){oe.child=null;do{var He=le.sibling;le.sibling=null,le=He}while(le!==null)}}ae=f}}if((f.subtreeFlags&2064)!==0&&y!==null)y.return=f,ae=y;else e:for(;ae!==null;){if(f=ae,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:ei(9,f,f.return)}var L=f.sibling;if(L!==null){L.return=f.return,ae=L;break e}ae=f.return}}var N=e.current;for(ae=N;ae!==null;){y=ae;var $=y.child;if((y.subtreeFlags&2064)!==0&&$!==null)$.return=y,ae=$;else e:for(y=N;ae!==null;){if(b=ae,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:xa(9,b)}}catch(ce){We(b,b.return,ce)}if(b===y){ae=null;break e}var Z=b.sibling;if(Z!==null){Z.return=b.return,ae=Z;break e}ae=b.return}}if(Te=h,Mr(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Ai,e)}catch{}l=!0}return l}finally{Ne=a,Mt.transition=r}}return!1}function Eh(e,r,a){r=Qn(a,r),r=Vd(e,r,1),e=Ur(e,r,1),r=mt(),e!==null&&(Ts(e,1,r),kt(e,r))}function We(e,r,a){if(e.tag===3)Eh(e,e,a);else for(;r!==null;){if(r.tag===3){Eh(r,e,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Br===null||!Br.has(l))){e=Qn(a,e),e=qd(r,e,1),r=Ur(r,e,1),e=mt(),r!==null&&(Ts(r,1,e),kt(r,e));break}}r=r.return}}function ym(e,r,a){var l=e.pingCache;l!==null&&l.delete(r),r=mt(),e.pingedLanes|=e.suspendedLanes&a,Ze===e&&(it&a)===a&&(Ye===4||Ye===3&&(it&130023424)===it&&500>qe()-Ll?hn(e,0):Il|=a),kt(e,r)}function Th(e,r){r===0&&((e.mode&1)===0?r=1:(r=Li,Li<<=1,(Li&130023424)===0&&(Li=4194304)));var a=mt();e=cr(e,r),e!==null&&(Ts(e,r,a),kt(e,a))}function vm(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),Th(e,a)}function _m(e,r){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(s(314))}l!==null&&l.delete(r),Th(e,a)}var Ch;Ch=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||_t.current)xt=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return xt=!1,am(e,r,a);xt=(e.flags&131072)!==0}else xt=!1,Le&&(r.flags&1048576)!==0&&od(r,sa,r.index);switch(r.lanes=0,r.tag){case 2:var l=r.type;_a(e,r),e=r.pendingProps;var h=Wn(r,ut.current);Jn(r,a),h=fl(null,r,l,e,h,a);var f=pl();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,wt(l)?(f=!0,ta(r)):f=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,al(r),h.updater=ya,r.stateNode=h,h._reactInternals=r,wl(r,l,e,a),r=Sl(null,r,l,!0,f,a)):(r.tag=0,Le&&f&&Yo(r),pt(null,r,h,a),r=r.child),r;case 16:l=r.elementType;e:{switch(_a(e,r),e=r.pendingProps,h=l._init,l=h(l._payload),r.type=l,h=r.tag=xm(l),e=Wt(l,e),h){case 0:r=kl(null,r,l,e,a);break e;case 1:r=eh(null,r,l,e,a);break e;case 11:r=Jd(null,r,l,e,a);break e;case 14:r=Yd(null,r,l,Wt(l.type,e),a);break e}throw Error(s(306,l,""))}return r;case 0:return l=r.type,h=r.pendingProps,h=r.elementType===l?h:Wt(l,h),kl(e,r,l,h,a);case 1:return l=r.type,h=r.pendingProps,h=r.elementType===l?h:Wt(l,h),eh(e,r,l,h,a);case 3:e:{if(th(r),e===null)throw Error(s(387));l=r.pendingProps,f=r.memoizedState,h=f.element,gd(e,r),ca(r,l,null,a);var y=r.memoizedState;if(l=y.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){h=Qn(Error(s(423)),r),r=rh(e,r,l,a,h);break e}else if(l!==h){h=Qn(Error(s(424)),r),r=rh(e,r,l,a,h);break e}else for(Ct=Ar(r.stateNode.containerInfo.firstChild),Tt=r,Le=!0,Ft=null,a=pd(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Hn(),l===h){r=hr(e,r,a);break e}pt(e,r,l,a)}r=r.child}return r;case 5:return _d(r),e===null&&Zo(r),l=r.type,h=r.pendingProps,f=e!==null?e.memoizedProps:null,y=h.children,Vo(l,h)?y=null:f!==null&&Vo(l,f)&&(r.flags|=32),Zd(e,r),pt(e,r,y,a),r.child;case 6:return e===null&&Zo(r),null;case 13:return nh(e,r,a);case 4:return ol(r,r.stateNode.containerInfo),l=r.pendingProps,e===null?r.child=Kn(r,null,l,a):pt(e,r,l,a),r.child;case 11:return l=r.type,h=r.pendingProps,h=r.elementType===l?h:Wt(l,h),Jd(e,r,l,h,a);case 7:return pt(e,r,r.pendingProps,a),r.child;case 8:return pt(e,r,r.pendingProps.children,a),r.child;case 12:return pt(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(l=r.type._context,h=r.pendingProps,f=r.memoizedProps,y=h.value,Oe(oa,l._currentValue),l._currentValue=y,f!==null)if(Bt(f.value,y)){if(f.children===h.children&&!_t.current){r=hr(e,r,a);break e}}else for(f=r.child,f!==null&&(f.return=r);f!==null;){var b=f.dependencies;if(b!==null){y=f.child;for(var E=b.firstContext;E!==null;){if(E.context===l){if(f.tag===1){E=dr(-1,a&-a),E.tag=2;var U=f.updateQueue;if(U!==null){U=U.shared;var Y=U.pending;Y===null?E.next=E:(E.next=Y.next,Y.next=E),U.pending=E}}f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),sl(f.return,a,r),b.lanes|=a;break}E=E.next}}else if(f.tag===10)y=f.type===r.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(s(341));y.lanes|=a,b=y.alternate,b!==null&&(b.lanes|=a),sl(y,a,r),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===r){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}pt(e,r,h.children,a),r=r.child}return r;case 9:return h=r.type,l=r.pendingProps.children,Jn(r,a),h=It(h),l=l(h),r.flags|=1,pt(e,r,l,a),r.child;case 14:return l=r.type,h=Wt(l,r.pendingProps),h=Wt(l.type,h),Yd(e,r,l,h,a);case 15:return Qd(e,r,r.type,r.pendingProps,a);case 17:return l=r.type,h=r.pendingProps,h=r.elementType===l?h:Wt(l,h),_a(e,r),r.tag=1,wt(l)?(e=!0,ta(r)):e=!1,Jn(r,a),Fd(r,l,h),wl(r,l,h,a),Sl(null,r,l,!0,e,a);case 19:return ih(e,r,a);case 22:return Xd(e,r,a)}throw Error(s(156,r.tag))};function Nh(e,r){return Pn(e,r)}function wm(e,r,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,r,a,l){return new wm(e,r,a,l)}function Vl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xm(e){if(typeof e=="function")return Vl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ne)return 11;if(e===O)return 14}return 2}function qr(e,r){var a=e.alternate;return a===null?(a=$t(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Ra(e,r,a,l,h,f){var y=2;if(l=e,typeof e=="function")Vl(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case W:return pn(a.children,h,f,r);case te:y=8,h|=8;break;case de:return e=$t(12,a,r,h|2),e.elementType=de,e.lanes=f,e;case q:return e=$t(13,a,r,h),e.elementType=q,e.lanes=f,e;case X:return e=$t(19,a,r,h),e.elementType=X,e.lanes=f,e;case F:return Oa(a,h,f,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ee:y=10;break e;case G:y=9;break e;case ne:y=11;break e;case O:y=14;break e;case C:y=16,l=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return r=$t(y,a,r,h),r.elementType=e,r.type=l,r.lanes=f,r}function pn(e,r,a,l){return e=$t(7,e,l,r),e.lanes=a,e}function Oa(e,r,a,l){return e=$t(22,e,l,r),e.elementType=F,e.lanes=a,e.stateNode={isHidden:!1},e}function ql(e,r,a){return e=$t(6,e,null,r),e.lanes=a,e}function Hl(e,r,a){return r=$t(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function bm(e,r,a,l,h){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_o(0),this.expirationTimes=_o(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_o(0),this.identifierPrefix=l,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Kl(e,r,a,l,h,f,y,b,E){return e=new bm(e,r,a,b,E),r===1?(r=1,f===!0&&(r|=8)):r=0,f=$t(3,null,null,r),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},al(f),e}function km(e,r,a){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:l==null?null:""+l,children:e,containerInfo:r,implementation:a}}function Rh(e){if(!e)return Lr;e=e._reactInternals;e:{if(ir(e)!==e||e.tag!==1)throw Error(s(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(wt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(s(171))}if(e.tag===1){var a=e.type;if(wt(a))return sd(e,a,r)}return r}function Oh(e,r,a,l,h,f,y,b,E){return e=Kl(a,l,!0,e,h,f,y,b,E),e.context=Rh(null),a=e.current,l=mt(),h=Wr(a),f=dr(l,h),f.callback=r??null,Ur(a,f,h),e.current.lanes=h,Ts(e,h,l),kt(e,l),e}function Da(e,r,a,l){var h=r.current,f=mt(),y=Wr(h);return a=Rh(a),r.context===null?r.context=a:r.pendingContext=a,r=dr(f,y),r.payload={element:e},l=l===void 0?null:l,l!==null&&(r.callback=l),e=Ur(h,r,y),e!==null&&(Ht(e,h,y,f),ua(e,h,y)),y}function Pa(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function Dh(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Gl(e,r){Dh(e,r),(e=e.alternate)&&Dh(e,r)}function Sm(){return null}var Ph=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}Aa.prototype.render=Jl.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(s(409));Da(e,r,null,null)},Aa.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;dn(function(){Da(null,e,null,null)}),r[ar]=null}};function Aa(e){this._internalRoot=e}Aa.prototype.unstable_scheduleHydration=function(e){if(e){var r=gc();e={blockedOn:null,target:e,priority:r};for(var a=0;a<Or.length&&r!==0&&r<Or[a].priority;a++);Or.splice(a,0,e),a===0&&_c(e)}};function Yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ia(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ah(){}function jm(e,r,a,l,h){if(h){if(typeof l=="function"){var f=l;l=function(){var U=Pa(y);f.call(U)}}var y=Oh(r,l,e,0,null,!1,!1,"",Ah);return e._reactRootContainer=y,e[ar]=y.current,Bs(e.nodeType===8?e.parentNode:e),dn(),y}for(;h=e.lastChild;)e.removeChild(h);if(typeof l=="function"){var b=l;l=function(){var U=Pa(E);b.call(U)}}var E=Kl(e,0,!1,null,null,!1,!1,"",Ah);return e._reactRootContainer=E,e[ar]=E.current,Bs(e.nodeType===8?e.parentNode:e),dn(function(){Da(r,E,a,l)}),E}function La(e,r,a,l,h){var f=a._reactRootContainer;if(f){var y=f;if(typeof h=="function"){var b=h;h=function(){var E=Pa(y);b.call(E)}}Da(r,y,e,h)}else y=jm(a,r,e,h,l);return Pa(y)}pc=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=Es(r.pendingLanes);a!==0&&(wo(r,a|1),kt(r,qe()),(Te&6)===0&&(es=qe()+500,Mr()))}break;case 13:dn(function(){var l=cr(e,1);if(l!==null){var h=mt();Ht(l,e,1,h)}}),Gl(e,1)}},xo=function(e){if(e.tag===13){var r=cr(e,134217728);if(r!==null){var a=mt();Ht(r,e,134217728,a)}Gl(e,134217728)}},mc=function(e){if(e.tag===13){var r=Wr(e),a=cr(e,r);if(a!==null){var l=mt();Ht(a,e,r,l)}Gl(e,r)}},gc=function(){return Ne},yc=function(e,r){var a=Ne;try{return Ne=e,r()}finally{Ne=a}},Nn=function(e,r,a){switch(r){case"input":if(wr(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==e&&l.form===e.form){var h=Zi(l);if(!h)throw Error(s(90));Qr(l),wr(l,h)}}}break;case"textarea":Ci(e,a);break;case"select":r=a.value,r!=null&&xr(e,!!a.multiple,r,!1)}},Re=Bl,jt=dn;var Em={usingClientEntryPoint:!1,Events:[Vs,Bn,Zi,nt,tn,Bl]},si={findFiberByHostInstance:rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tm={bundleType:si.bundleType,version:si.version,rendererPackageName:si.rendererPackageName,rendererConfig:si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yt(e),e===null?null:e.stateNode},findFiberByHostInstance:si.findFiberByHostInstance||Sm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{Ai=Ma.inject(Tm),Yt=Ma}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Em,St.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yl(r))throw Error(s(200));return km(e,r,null,a)},St.createRoot=function(e,r){if(!Yl(e))throw Error(s(299));var a=!1,l="",h=Ph;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Kl(e,1,!1,null,null,a,!1,l,h),e[ar]=r.current,Bs(e.nodeType===8?e.parentNode:e),new Jl(r)},St.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=yt(r),e=e===null?null:e.stateNode,e},St.flushSync=function(e){return dn(e)},St.hydrate=function(e,r,a){if(!Ia(r))throw Error(s(200));return La(null,e,r,!0,a)},St.hydrateRoot=function(e,r,a){if(!Yl(e))throw Error(s(405));var l=a!=null&&a.hydratedSources||null,h=!1,f="",y=Ph;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),r=Oh(r,null,e,1,a??null,h,!1,f,y),e[ar]=r.current,Bs(e),l)for(e=0;e<l.length;e++)a=l[e],h=a._getVersion,h=h(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,h]:r.mutableSourceEagerHydrationData.push(a,h);return new Aa(r)},St.render=function(e,r,a){if(!Ia(r))throw Error(s(200));return La(null,e,r,!1,a)},St.unmountComponentAtNode=function(e){if(!Ia(e))throw Error(s(40));return e._reactRootContainer?(dn(function(){La(null,null,e,!1,function(){e._reactRootContainer=null,e[ar]=null})}),!0):!1},St.unstable_batchedUpdates=Bl,St.unstable_renderSubtreeIntoContainer=function(e,r,a,l){if(!Ia(a))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return La(e,r,a,!1,l)},St.version="18.3.1-next-f1338f8080-20240426",St}var Fh;function Im(){if(Fh)return Zl.exports;Fh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Zl.exports=Am(),Zl.exports}var Wh;function Lm(){if(Wh)return $a;Wh=1;var n=Im();return $a.createRoot=n.createRoot,$a.hydrateRoot=n.hydrateRoot,$a}var Mm=Lm();const $m=Af(Mm);function ro(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s}function Um(n,t,s,i){function o(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function p(v){try{g(i.next(v))}catch(w){d(w)}}function m(v){try{g(i.throw(v))}catch(w){d(w)}}function g(v){v.done?u(v.value):o(v.value).then(p,m)}g((i=i.apply(n,t||[])).next())})}const zm=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class Hu extends Error{constructor(t,s="FunctionsError",i){super(t),this.name=s,this.context=i}}class Bm extends Hu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Vh extends Hu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class qh extends Hu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var vu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(vu||(vu={}));class Fm{constructor(t,{headers:s={},customFetch:i,region:o=vu.Any}={}){this.url=t,this.headers=s,this.region=o,this.fetch=zm(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Um(this,arguments,void 0,function*(s,i={}){var o;let u,d;try{const{headers:p,method:m,body:g,signal:v,timeout:w}=i;let _={},{region:x}=i;x||(x=this.region);const j=new URL(`${this.url}/${s}`);x&&x!=="any"&&(_["x-region"]=x,j.searchParams.set("forceFunctionRegion",x));let R;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",R=g):typeof g=="string"?(_["Content-Type"]="text/plain",R=g):typeof FormData<"u"&&g instanceof FormData?R=g:(_["Content-Type"]="application/json",R=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?R=JSON.stringify(g):R=g;let k=v;w&&(d=new AbortController,u=setTimeout(()=>d.abort(),w),v?(k=d.signal,v.addEventListener("abort",()=>d.abort())):k=d.signal);const T=yield this.fetch(j.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),p),body:R,signal:k}).catch(H=>{throw new Bm(H)}),B=T.headers.get("x-relay-error");if(B&&B==="true")throw new Vh(T);if(!T.ok)throw new qh(T);let M=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),D;return M==="application/json"?D=yield T.json():M==="application/octet-stream"||M==="application/pdf"?D=yield T.blob():M==="text/event-stream"?D=T:M==="multipart/form-data"?D=yield T.formData():D=yield T.text(),{data:D,error:null,response:T}}catch(p){return{data:null,error:p,response:p instanceof qh||p instanceof Vh?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var Wm=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Vm=class{constructor(n){var t,s;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let d=null,p=null,m=null,g=u.status,v=u.statusText;if(u.ok){var w,_;if(s.method!=="HEAD"){var x;const T=await u.text();T===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((x=s.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?p=T:p=JSON.parse(T))}const R=(w=s.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),k=(_=u.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");R&&k&&k.length>1&&(m=parseInt(k[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(p)&&(p.length>1?(d={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,g=406,v="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var j;const R=await u.text();try{d=JSON.parse(R),Array.isArray(d)&&u.status===404&&(p=[],d=null,g=200,v="OK")}catch{u.status===404&&R===""?(g=204,v="No Content"):d={message:R}}if(d&&s.isMaybeSingle&&(!(d==null||(j=d.details)===null||j===void 0)&&j.includes("0 rows"))&&(d=null,g=200,v="OK"),d&&s.shouldThrowOnError)throw new Wm(d)}return{error:d,data:p,count:m,status:g,statusText:v}});return this.shouldThrowOnError||(o=o.catch(u=>{var d;let p="";const m=u?.cause;if(m){var g,v,w,_;const j=(g=m?.message)!==null&&g!==void 0?g:"",R=(v=m?.code)!==null&&v!==void 0?v:"";p=`${(w=u?.name)!==null&&w!==void 0?w:"FetchError"}: ${u?.message}`,p+=`

Caused by: ${(_=m?.name)!==null&&_!==void 0?_:"Error"}: ${j}`,R&&(p+=` (${R})`),m?.stack&&(p+=`
${m.stack}`)}else{var x;p=(x=u?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(d=u?.name)!==null&&d!==void 0?d:"FetchError"}: ${u?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(n,t)}returns(){return this}overrideTypes(){return this}},qm=class extends Vm{select(n){let t=!1;const s=(n??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:s,foreignTable:i,referencedTable:o=i}={}){const u=o?`${o}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${n}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:s=t}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${n}`),this}range(n,t,{foreignTable:s,referencedTable:i=s}={}){const o=typeof i>"u"?"offset":`${i}.offset`,u=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${n}`),this.url.searchParams.set(u,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:s=!1,buffers:i=!1,wal:o=!1,format:u="text"}={}){var d;const p=[n?"analyze":null,t?"verbose":null,s?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${p};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const Hh=new RegExp("[,()]");var ls=class extends qm{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const s=Array.from(new Set(t)).map(i=>typeof i=="string"&&Hh.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,t){const s=Array.from(new Set(t)).map(i=>typeof i=="string"&&Hh.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:s,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const u=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${o}fts${u}.${t}`),this}match(n){return Object.entries(n).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(n,t,s){return this.url.searchParams.append(n,`not.${t}.${s}`),this}or(n,{foreignTable:t,referencedTable:s=t}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${n})`),this}filter(n,t,s){return this.url.searchParams.append(n,`${t}.${s}`),this}},Hm=class{constructor(n,{headers:t={},schema:s,fetch:i}){this.url=n,this.headers=new Headers(t),this.schema=s,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,t){const{head:s=!1,count:i}=t??{},o=s?"HEAD":"GET";let u=!1;const d=(n??"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join(""),{url:p,headers:m}=this.cloneRequestState();return p.searchParams.set("select",d),i&&m.append("Prefer",`count=${i}`),new ls({method:o,url:p,headers:m,schema:this.schema,fetch:this.fetch})}insert(n,{count:t,defaultToNull:s=!0}={}){var i;const o="POST",{url:u,headers:d}=this.cloneRequestState();if(t&&d.append("Prefer",`count=${t}`),s||d.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);u.searchParams.set("columns",m.join(","))}}return new ls({method:o,url:u,headers:d,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(n,{onConflict:t,ignoreDuplicates:s=!1,count:i,defaultToNull:o=!0}={}){var u;const d="POST",{url:p,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&p.searchParams.set("on_conflict",t),i&&m.append("Prefer",`count=${i}`),o||m.append("Prefer","missing=default"),Array.isArray(n)){const g=n.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(g.length>0){const v=[...new Set(g)].map(w=>`"${w}"`);p.searchParams.set("columns",v.join(","))}}return new ls({method:d,url:p,headers:m,schema:this.schema,body:n,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(n,{count:t}={}){var s;const i="PATCH",{url:o,headers:u}=this.cloneRequestState();return t&&u.append("Prefer",`count=${t}`),new ls({method:i,url:o,headers:u,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:n}={}){var t;const s="DELETE",{url:i,headers:o}=this.cloneRequestState();return n&&o.append("Prefer",`count=${n}`),new ls({method:s,url:i,headers:o,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Km=class If{constructor(t,{headers:s={},schema:i,fetch:o}={}){this.url=t,this.headers=new Headers(s),this.schemaName=i,this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Hm(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new If(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:i=!1,get:o=!1,count:u}={}){var d;let p;const m=new URL(`${this.url}/rpc/${t}`);let g;const v=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(v)),w=i&&Object.values(s).some(v);w?(p="POST",g=s):i||o?(p=i?"HEAD":"GET",Object.entries(s).filter(([x,j])=>j!==void 0).map(([x,j])=>[x,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([x,j])=>{m.searchParams.append(x,j)})):(p="POST",g=s);const _=new Headers(this.headers);return w?_.set("Prefer",u?`count=${u},return=minimal`:"return=minimal"):u&&_.set("Prefer",`count=${u}`),new ls({method:p,url:m,headers:_,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class Gm{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const i=s.versions;if(i&&i.node){const o=i.node,u=parseInt(o.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const i=this.getWebSocketConstructor();return new i(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Jm="2.90.1",Ym=`realtime-js/${Jm}`,Lf="1.0.0",Qm="2.0.0",Kh=Lf,_u=1e4,Xm=1e3,Zm=100;var Kr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Kr||(Kr={}));var Qe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Qe||(Qe={}));var Jt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Jt||(Jt={}));var wu;(function(n){n.websocket="websocket"})(wu||(wu={}));var vn;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(vn||(vn={}));class eg{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,i;const o=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var s,i;const o=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:{},d=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(t,s,i){var o,u;const d=t.topic,p=(o=t.ref)!==null&&o!==void 0?o:"",m=(u=t.join_ref)!==null&&u!==void 0?u:"",g=t.payload.event,v=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},w=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+d.length+g.length+w.length,x=new ArrayBuffer(this.HEADER_LENGTH+_);let j=new DataView(x),R=0;j.setUint8(R++,this.KINDS.userBroadcastPush),j.setUint8(R++,m.length),j.setUint8(R++,p.length),j.setUint8(R++,d.length),j.setUint8(R++,g.length),j.setUint8(R++,w.length),j.setUint8(R++,s),Array.from(m,T=>j.setUint8(R++,T.charCodeAt(0))),Array.from(p,T=>j.setUint8(R++,T.charCodeAt(0))),Array.from(d,T=>j.setUint8(R++,T.charCodeAt(0))),Array.from(g,T=>j.setUint8(R++,T.charCodeAt(0))),Array.from(w,T=>j.setUint8(R++,T.charCodeAt(0)));var k=new Uint8Array(x.byteLength+i.byteLength);return k.set(new Uint8Array(x),0),k.set(new Uint8Array(i),x.byteLength),k.buffer}decode(t,s){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return s(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,u,d,p,m]=i;return s({join_ref:o,ref:u,topic:d,event:p,payload:m})}return s({})}_binaryDecode(t){const s=new DataView(t),i=s.getUint8(0),o=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,s,o)}_decodeUserBroadcast(t,s,i){const o=s.getUint8(1),u=s.getUint8(2),d=s.getUint8(3),p=s.getUint8(4);let m=this.HEADER_LENGTH+4;const g=i.decode(t.slice(m,m+o));m=m+o;const v=i.decode(t.slice(m,m+u));m=m+u;const w=i.decode(t.slice(m,m+d));m=m+d;const _=t.slice(m,t.byteLength),x=p===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,j={type:this.BROADCAST_EVENT,event:v,payload:x};return d>0&&(j.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>s.includes(i)))}}class Mf{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(De||(De={}));const Gh=(n,t,s={})=>{var i;const o=(i=s.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((u,d)=>(u[d]=tg(d,n,t,o),u),{}):{}},tg=(n,t,s,i)=>{const o=t.find(p=>p.name===n),u=o?.type,d=s[n];return u&&!i.includes(u)?$f(u,d):xu(d)},$f=(n,t)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return ig(t,s)}switch(n){case De.bool:return rg(t);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return ng(t);case De.json:case De.jsonb:return sg(t);case De.timestamp:return ag(t);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return xu(t);default:return xu(t)}},xu=n=>n,rg=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ng=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},sg=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},ig=(n,t)=>{if(typeof n!="string")return n;const s=n.length-1,i=n[s];if(n[0]==="{"&&i==="}"){let u;const d=n.slice(1,s);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(p=>$f(t,p))}return n},ag=n=>typeof n=="string"?n.replace(" ","T"):n,Uf=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ru{constructor(t,s,i={},o=_u){this.channel=t,this.event=s,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var i;return this._hasReceived(t)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Jh;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Jh||(Jh={}));class ci{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ci.syncState(this.state,o,u,d),this.pendingDiffs.forEach(m=>{this.state=ci.syncDiff(this.state,m,u,d)}),this.pendingDiffs=[],p()}),this.channel._on(i.diff,{},o=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ci.syncDiff(this.state,o,u,d),p())}),this.onJoin((o,u,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:d})}),this.onLeave((o,u,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,i,o){const u=this.cloneDeep(t),d=this.transformState(s),p={},m={};return this.map(u,(g,v)=>{d[g]||(m[g]=v)}),this.map(d,(g,v)=>{const w=u[g];if(w){const _=v.map(k=>k.presence_ref),x=w.map(k=>k.presence_ref),j=v.filter(k=>x.indexOf(k.presence_ref)<0),R=w.filter(k=>_.indexOf(k.presence_ref)<0);j.length>0&&(p[g]=j),R.length>0&&(m[g]=R)}else p[g]=v}),this.syncDiff(u,{joins:p,leaves:m},i,o)}static syncDiff(t,s,i,o){const{joins:u,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(u,(p,m)=>{var g;const v=(g=t[p])!==null&&g!==void 0?g:[];if(t[p]=this.cloneDeep(m),v.length>0){const w=t[p].map(x=>x.presence_ref),_=v.filter(x=>w.indexOf(x.presence_ref)<0);t[p].unshift(..._)}i(p,v,m)}),this.map(d,(p,m)=>{let g=t[p];if(!g)return;const v=m.map(w=>w.presence_ref);g=g.filter(w=>v.indexOf(w.presence_ref)<0),t[p]=g,o(p,g,m),g.length===0&&delete t[p]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(i=>s(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,i)=>{const o=t[i];return"metas"in o?s[i]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[i]=o,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yh;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Yh||(Yh={}));var di;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(di||(di={}));var pr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(pr||(pr={}));class ds{constructor(t,s={config:{}},i){var o,u;if(this.topic=t,this.params=s,this.socket=i,this.bindings={},this.state=Qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new ru(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new Mf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qe.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(d,p)=>{this._trigger(this._replyEventName(p),d)}),this.presence=new ci(this),this.broadcastEndpointURL=Uf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var i,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Qe.closed){const{config:{broadcast:d,presence:p,private:m}}=this.params,g=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[di.PRESENCE]&&this.bindings[di.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},_={broadcast:d,presence:Object.assign(Object.assign({},p),{enabled:v}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>t?.(pr.CHANNEL_ERROR,x)),this._onClose(()=>t?.(pr.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t?.(pr.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,k=(j=R?.length)!==null&&j!==void 0?j:0,T=[];for(let B=0;B<k;B++){const M=R[B],{filter:{event:D,schema:H,table:K,filter:W}}=M,te=x&&x[B];if(te&&te.event===D&&ds.isFilterValueEqual(te.schema,H)&&ds.isFilterValueEqual(te.table,K)&&ds.isFilterValueEqual(te.filter,W))T.push(Object.assign(Object.assign({},M),{id:te.id}));else{this.unsubscribe(),this.state=Qe.errored,t?.(pr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(pr.SUBSCRIBED);return}}).receive("error",x=>{this.state=Qe.errored,t?.(pr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t?.(pr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,i){return this.state===Qe.joined&&t===di.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,i)}async httpSend(t,s,i={}){var o;if(s==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(t,s={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=t,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,p,m;const g=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(p=(d=this.params)===null||d===void 0?void 0:d.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qe.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new ru(this,Jt.leave,{},t),i.receive("ok",()=>{s(),o("ok")}).receive("timeout",()=>{s(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qe.closed,this.bindings={}}async _fetchWithTimeout(t,s,i){const o=new AbortController,u=setTimeout(()=>o.abort(),i),d=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:o.signal}));return clearTimeout(u),d}_push(t,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ru(this,t,s,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Zm){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,i){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,i){var o,u;const d=t.toLocaleLowerCase(),{close:p,error:m,leave:g,join:v}=Jt;if(i&&[p,m,g,v].indexOf(d)>=0&&i!==this._joinRef())return;let _=this._onMessage(d,s,i);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var j,R,k;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((k=(R=x.filter)===null||R===void 0?void 0:R.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===d}).map(x=>x.callback(_,i)):(u=this.bindings[d])===null||u===void 0||u.filter(x=>{var j,R,k,T,B,M,D,H;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in x){const K=x.id,W=(j=x.filter)===null||j===void 0?void 0:j.event;return K&&((R=s.ids)===null||R===void 0?void 0:R.includes(K))&&(W==="*"||W?.toLocaleLowerCase()===((k=s.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))&&(!(!((T=x.filter)===null||T===void 0)&&T.table)||x.filter.table===((B=s.data)===null||B===void 0?void 0:B.table))}else{const K=(D=(M=x?.filter)===null||M===void 0?void 0:M.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return K==="*"||K===((H=s?.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===d}).map(x=>{if(typeof _=="object"&&"ids"in _){const j=_.data,{schema:R,table:k,commit_timestamp:T,type:B,errors:M}=j;_=Object.assign(Object.assign({},{schema:R,table:k,commit_timestamp:T,eventType:B,new:{},old:{},errors:M}),this._getPayloadRecords(j))}x.callback(_,i)})}_isClosed(){return this.state===Qe.closed}_isJoined(){return this.state===Qe.joined}_isJoining(){return this.state===Qe.joining}_isLeaving(){return this.state===Qe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,i){const o=t.toLocaleLowerCase(),u={type:o,filter:s,callback:i};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(t,s){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&ds.isEqual(o.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const i in t)if(t[i]!==s[i])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Jt.close,{},t)}_onError(t){this._on(Jt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Gh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Gh(t.columns,t.old_record)),s}}const nu=()=>{},Ua={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},og=[1e3,2e3,5e3,1e4],lg=1e4,ug=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cg{constructor(t,s){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_u,this.transport=null,this.heartbeatIntervalMs=Ua.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nu,this.ref=0,this.reconnectTimer=null,this.vsn=Kh,this.logger=nu,this.conn=null,this.sendBuffer=[],this.serializer=new eg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((i=s?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${wu.websocket}`,this.httpEndpoint=Uf(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gm.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,i){this.logger(t,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Kr.connecting:return vn.Connecting;case Kr.open:return vn.Open;case Kr.closing:return vn.Closing;default:return vn.Closed}}isConnected(){return this.connectionState()===vn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(u=>u.topic===i);if(o)return o;{const u=new ds(`realtime:${t}`,s,this);return this.channels.push(u),u}}push(t){const{topic:s,event:i,payload:o,ref:u}=t,d=()=>{this.encode(t,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${s} ${i} (${u})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Xm,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Ua.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",g)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:u,ref:d}=s,p=d?`(${d})`:"",m=u.status||"";this.log("receive",`${m} ${i} ${o} ${p}`.trim(),u),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(o,u,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Kr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Kr.open||this.conn.readyState===Kr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Jt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(s);return`${t}${i}${o}`}_workerObjectUrl(t){let s;if(t)s=t;else{const i=new Blob([ug],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,i=!1;if(t)s=t,i=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),s=this.accessTokenValue}else s=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const u={access_token:s,version:Ym};s&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(Jt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(s)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Mf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ua.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,i,o,u,d,p,m,g,v,w,_,x;switch(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:_u,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Ua.HEARTBEAT_INTERVAL,this.worker=(u=t?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(p=t?.heartbeatCallback)!==null&&p!==void 0?p:nu,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:Kh,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=t?.reconnectAfterMs)!==null&&g!==void 0?g:(j=>og[j-1]||lg),this.vsn){case Lf:this.encode=(v=t?.encode)!==null&&v!==void 0?v:((j,R)=>R(JSON.stringify(j))),this.decode=(w=t?.decode)!==null&&w!==void 0?w:((j,R)=>R(JSON.parse(j)));break;case Qm:this.encode=(_=t?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var hi=class extends Error{constructor(n,t){super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function dg(n,t,s){const i=new URL(t,n);if(s)for(const[o,u]of Object.entries(s))u!==void 0&&i.searchParams.set(o,u);return i.toString()}async function hg(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function fg(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:i,query:o,body:u,headers:d}){const p=dg(n.baseUrl,i,o),m=await hg(n.auth),g=await t(p,{method:s,headers:{...u?{"Content-Type":"application/json"}:{},...m,...d},body:u?JSON.stringify(u):void 0}),v=await g.text(),w=(g.headers.get("content-type")||"").includes("application/json"),_=w&&v?JSON.parse(v):v;if(!g.ok){const x=w?_:void 0,j=x?.error;throw new hi(j?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:j?.type,icebergCode:j?.code,details:x})}return{status:g.status,headers:g.headers,data:_}}}}function za(n){return n.join("")}var pg=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:za(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,t){const s={namespace:n.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${za(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${za(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${za(n.namespace)}`}),!0}catch(t){if(t instanceof hi&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(s){if(s instanceof hi&&s.status===409)return;throw s}}};function rs(n){return n.join("")}var mg=class{constructor(n,t="",s){this.client=n,this.prefix=t,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rs(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${rs(n.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(n,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${rs(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rs(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rs(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rs(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(s){if(s instanceof hi&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(s){if(s instanceof hi&&s.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw s}}},gg=class{constructor(n){let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=fg({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new pg(this.client,t),this.tableOps=new mg(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},no=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function Be(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var yg=class extends no{constructor(n,t,s){super(n),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},bu=class extends no{constructor(n,t){super(n),this.name="StorageUnknownError",this.originalError=t}};const Ku=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),vg=()=>Response,ku=n=>{if(Array.isArray(n))return n.map(s=>ku(s));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([s,i])=>{const o=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[o]=ku(i)}),t},_g=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},wg=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function fi(n){"@babel/helpers - typeof";return fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fi(n)}function xg(n,t){if(fi(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var i=s.call(n,t);if(fi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function bg(n){var t=xg(n,"string");return fi(t)=="symbol"?t:t+""}function kg(n,t,s){return(t=bg(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function Qh(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),s.push.apply(s,i)}return s}function ye(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Qh(Object(s),!0).forEach(function(i){kg(n,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Qh(Object(s)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(s,i))})}return n}const su=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},Sg=async(n,t,s)=>{n instanceof await vg()&&!s?.noResolveJson?n.json().then(i=>{const o=n.status||500,u=i?.statusCode||o+"";t(new yg(su(i),o,u))}).catch(i=>{t(new bu(su(i),i))}):t(new bu(su(n),n))},jg=(n,t,s,i)=>{const o={method:n,headers:t?.headers||{}};return n==="GET"||!i?o:(_g(i)?(o.headers=ye({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,t?.duplex&&(o.duplex=t.duplex),ye(ye({},o),s))};async function bi(n,t,s,i,o,u){return new Promise((d,p)=>{n(s,jg(t,i,o,u)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>Sg(m,p,i))})}async function pi(n,t,s,i){return bi(n,"GET",t,s,i)}async function Gt(n,t,s,i,o){return bi(n,"POST",t,i,o,s)}async function Su(n,t,s,i,o){return bi(n,"PUT",t,i,o,s)}async function Eg(n,t,s,i){return bi(n,"HEAD",t,ye(ye({},s),{},{noResolveJson:!0}),i)}async function Gu(n,t,s,i,o){return bi(n,"DELETE",t,i,o,s)}var Tg=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Be(t))return{data:null,error:t};throw t}}};let zf;zf=Symbol.toStringTag;var Cg=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[zf]="BlobDownloadBuilder",this.promise=null}asStream(){return new Tg(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Be(t))return{data:null,error:t};throw t}}};const Ng={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Rg=class{constructor(n,t={},s,i){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.bucketId=s,this.fetch=Ku(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,t,s,i){var o=this;try{let u;const d=ye(ye({},Xh),i);let p=ye(ye({},o.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&s instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",o.encodeMetadata(m)),u.append("",s)):typeof FormData<"u"&&s instanceof FormData?(u=s,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),m&&!u.has("metadata")&&u.append("metadata",o.encodeMetadata(m))):(u=s,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType,m&&(p["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),i?.headers&&(p=ye(ye({},p),i.headers));const g=o._removeEmptyFolders(t),v=o._getFinalPath(g),w=await(n=="PUT"?Su:Gt)(o.fetch,`${o.url}/object/${v}`,u,ye({headers:p},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Be(u))return{data:null,error:u};throw u}}async upload(n,t,s){return this.uploadOrUpdate("POST",n,t,s)}async uploadToSignedUrl(n,t,s,i){var o=this;const u=o._removeEmptyFolders(n),d=o._getFinalPath(u),p=new URL(o.url+`/object/upload/sign/${d}`);p.searchParams.set("token",t);try{let m;const g=ye({upsert:Xh.upsert},i),v=ye(ye({},o.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",g.cacheControl)):(m=s,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType),{data:{path:u,fullPath:(await Su(o.fetch,p.toString(),m,{headers:v})).Key},error:null}}catch(m){if(o.shouldThrowOnError)throw m;if(Be(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(n,t){var s=this;try{let i=s._getFinalPath(n);const o=ye({},s.headers);t?.upsert&&(o["x-upsert"]="true");const u=await Gt(s.fetch,`${s.url}/object/upload/sign/${i}`,{},{headers:o}),d=new URL(s.url+u.url),p=d.searchParams.get("token");if(!p)throw new no("No token returned by API");return{data:{signedUrl:d.toString(),path:n,token:p},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}}async update(n,t,s){return this.uploadOrUpdate("PUT",n,t,s)}async move(n,t,s){var i=this;try{return{data:await Gt(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Be(o))return{data:null,error:o};throw o}}async copy(n,t,s){var i=this;try{return{data:{path:(await Gt(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:i.headers})).Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Be(o))return{data:null,error:o};throw o}}async createSignedUrl(n,t,s){var i=this;try{let o=i._getFinalPath(n),u=await Gt(i.fetch,`${i.url}/object/sign/${o}`,ye({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:i.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return u={signedUrl:encodeURI(`${i.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Be(o))return{data:null,error:o};throw o}}async createSignedUrls(n,t,s){var i=this;try{const o=await Gt(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:n},{headers:i.headers}),u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(d=>ye(ye({},d),{},{signedUrl:d.signedURL?encodeURI(`${i.url}${d.signedURL}${u}`):null})),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Be(o))return{data:null,error:o};throw o}}download(n,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),o=i?`?${i}`:"",u=this._getFinalPath(n),d=()=>pi(this.fetch,`${this.url}/${s}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new Cg(d,this.shouldThrowOnError)}async info(n){var t=this;const s=t._getFinalPath(n);try{return{data:ku(await pi(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}}async exists(n){var t=this;const s=t._getFinalPath(n);try{return await Eg(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Be(i)&&i instanceof bu){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}}getPublicUrl(n,t){const s=this._getFinalPath(n),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const u=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&i.push(d);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${p}`)}}}async remove(n){var t=this;try{return{data:await Gu(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}}async list(n,t,s){var i=this;try{const o=ye(ye(ye({},Ng),t),{},{prefix:n||""});return{data:await Gt(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},s),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Be(o))return{data:null,error:o};throw o}}async listV2(n,t){var s=this;try{const i=ye({},n);return{data:await Gt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,i,{headers:s.headers},t),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const Bf="2.90.1",Ff={"X-Client-Info":`storage-js/${Bf}`};var Og=class{constructor(n,t={},s,i){this.shouldThrowOnError=!1;const o=new URL(n);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=ye(ye({},Ff),t),this.fetch=Ku(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var t=this;try{const s=t.listBucketOptionsToQueryString(n);return{data:await pi(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}}async getBucket(n){var t=this;try{return{data:await pi(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}}async createBucket(n,t={public:!1}){var s=this;try{return{data:await Gt(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}}async updateBucket(n,t){var s=this;try{return{data:await Su(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}}async emptyBucket(n){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}}async deleteBucket(n){var t=this;try{return{data:await Gu(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Dg=class{constructor(n,t={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ye(ye({},Ff),t),this.fetch=Ku(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}}async listBuckets(n){var t=this;try{const s=new URLSearchParams;n?.limit!==void 0&&s.set("limit",n.limit.toString()),n?.offset!==void 0&&s.set("offset",n.offset.toString()),n?.sortColumn&&s.set("sortColumn",n.sortColumn),n?.sortOrder&&s.set("sortOrder",n.sortOrder),n?.search&&s.set("search",n.search);const i=s.toString(),o=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return{data:await pi(t.fetch,o,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}}async deleteBucket(n){var t=this;try{return{data:await Gu(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}}from(n){var t=this;if(!wg(n))throw new no("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new gg({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(s,{get(o,u){const d=o[u];return typeof d!="function"?d:async(...p)=>{try{return{data:await d.apply(o,p),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}};const Ju={"X-Client-Info":`storage-js/${Bf}`,"Content-Type":"application/json"};var Wf=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ot(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var iu=class extends Wf{constructor(n,t,s){super(n),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Pg=class extends Wf{constructor(n,t){super(n),this.name="StorageVectorsUnknownError",this.originalError=t}};const Yu=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Ag=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Zh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ig=async(n,t,s)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!s?.noResolveJson){const i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(u=>{const d=u?.statusCode||u?.code||i+"";t(new iu(Zh(u),i,d))}).catch(()=>{const u=i+"";t(new iu(o.statusText||`HTTP ${i} error`,i,u))});else{const u=i+"";t(new iu(o.statusText||`HTTP ${i} error`,i,u))}}else t(new Pg(Zh(n),n))},Lg=(n,t,s,i)=>{const o={method:n,headers:t?.headers||{}};return i?(Ag(i)?(o.headers=ye({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,ye(ye({},o),s)):o};async function Mg(n,t,s,i,o,u){return new Promise((d,p)=>{n(s,Lg(t,i,o,u)).then(m=>{if(!m.ok)throw m;if(i?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>d(m)).catch(m=>Ig(m,p,i))})}async function Dt(n,t,s,i,o){return Mg(n,"POST",t,i,o,s)}var $g=class{constructor(n,t={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ye(ye({},Ju),t),this.fetch=Yu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var t=this;try{return{data:await Dt(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async getIndex(n,t){var s=this;try{return{data:await Dt(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}async listIndexes(n){var t=this;try{return{data:await Dt(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async deleteIndex(n,t){var s=this;try{return{data:await Dt(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers})||{},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}},Ug=class{constructor(n,t={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ye(ye({},Ju),t),this.fetch=Yu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var t=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Dt(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async getVectors(n){var t=this;try{return{data:await Dt(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async listVectors(n){var t=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await Dt(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async queryVectors(n){var t=this;try{return{data:await Dt(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async deleteVectors(n){var t=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Dt(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}},zg=class{constructor(n,t={},s){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=ye(ye({},Ju),t),this.fetch=Yu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var t=this;try{return{data:await Dt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async getBucket(n){var t=this;try{return{data:await Dt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async listBuckets(n={}){var t=this;try{return{data:await Dt(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}async deleteBucket(n){var t=this;try{return{data:await Dt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}}},Bg=class extends zg{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new Fg(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,s=this;return t().call(s,n)}async getBucket(n){var t=()=>super.getBucket,s=this;return t().call(s,n)}async listBuckets(n={}){var t=()=>super.listBuckets,s=this;return t().call(s,n)}async deleteBucket(n){var t=()=>super.deleteBucket,s=this;return t().call(s,n)}},Fg=class extends $g{constructor(n,t,s,i){super(n,t,i),this.vectorBucketName=s}async createIndex(n){var t=()=>super.createIndex,s=this;return t().call(s,ye(ye({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,s=this;return t().call(s,ye(ye({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,n)}index(n){return new Wg(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},Wg=class extends Ug{constructor(n,t,s,i,o){super(n,t,o),this.vectorBucketName=s,this.indexName=i}async putVectors(n){var t=()=>super.putVectors,s=this;return t().call(s,ye(ye({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var t=()=>super.getVectors,s=this;return t().call(s,ye(ye({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,s=this;return t().call(s,ye(ye({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,s=this;return t().call(s,ye(ye({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,s=this;return t().call(s,ye(ye({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Vg=class extends Og{constructor(n,t={},s,i){super(n,t,s,i)}from(n){return new Rg(this.url,this.headers,n,this.fetch)}get vectors(){return new Bg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Dg(this.url+"/iceberg",this.headers,this.fetch)}};const Vf="2.90.1",us=30*1e3,ju=3,au=ju*us,qg="http://localhost:9999",Hg="supabase.auth.token",Kg={"X-Client-Info":`gotrue-js/${Vf}`},Eu="X-Supabase-Api-Version",qf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jg=600*1e3;class mi extends Error{constructor(t,s,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function he(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Yg extends mi{constructor(t,s,i){super(t,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function Qg(n){return he(n)&&n.name==="AuthApiError"}class _n extends mi{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class mr extends mi{constructor(t,s,i,o){super(t,i,o),this.name=s,this.status=i}}class Rt extends mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xg(n){return he(n)&&n.name==="AuthSessionMissingError"}class ns extends mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ba extends mr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fa extends mr{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zg(n){return he(n)&&n.name==="AuthImplicitGrantRedirectError"}class ef extends mr{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ey extends mr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Tu extends mr{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function ou(n){return he(n)&&n.name==="AuthRetryableFetchError"}class tf extends mr{constructor(t,s,i){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class Cu extends mr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rf=` 	
\r=`.split(""),ty=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<rf.length;t+=1)n[rf[t].charCodeAt(0)]=-2;for(let t=0;t<Ja.length;t+=1)n[Ja[t].charCodeAt(0)]=t;return n})();function nf(n,t,s){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;s(Ja[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;s(Ja[i]),t.queuedBits-=6}}function Hf(n,t,s){const i=ty[n];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function sf(n){const t=[],s=d=>{t.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=d=>{sy(d,i,s)};for(let d=0;d<n.length;d+=1)Hf(n.charCodeAt(d),o,u);return t.join("")}function ry(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function ny(n,t){for(let s=0;s<n.length;s+=1){let i=n.charCodeAt(s);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(n.charCodeAt(s+1)-56320&65535|o)+65536,s+=1}ry(i,t)}}function sy(n,t,s){if(t.utf8seq===0){if(n<=127){s(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function ps(n){const t=[],s={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<n.length;o+=1)Hf(n.charCodeAt(o),s,i);return new Uint8Array(t)}function iy(n){const t=[];return ny(n,s=>t.push(s)),new Uint8Array(t)}function wn(n){const t=[],s={queue:0,queuedBits:0},i=o=>{t.push(o)};return n.forEach(o=>nf(o,s,i)),nf(null,s,i),t.join("")}function ay(n){return Math.round(Date.now()/1e3)+n}function oy(){return Symbol("auth-callback")}const ot=()=>typeof window<"u"&&typeof document<"u",mn={tested:!1,writable:!1},Kf=()=>{if(!ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mn.tested)return mn.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),mn.tested=!0,mn.writable=!0}catch{mn.tested=!0,mn.writable=!1}return mn.writable};function ly(n){const t={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((o,u)=>{t[u]=o})}catch{}return s.searchParams.forEach((i,o)=>{t[o]=i}),t}const Gf=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),uy=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",cs=async(n,t,s)=>{await n.setItem(t,JSON.stringify(s))},gn=async(n,t)=>{const s=await n.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},at=async(n,t)=>{await n.removeItem(t)};class so{constructor(){this.promise=new so.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}so.promiseConstructor=Promise;function lu(n){const t=n.split(".");if(t.length!==3)throw new Cu("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!Gg.test(t[i]))throw new Cu("JWT not in base64url format");return{header:JSON.parse(sf(t[0])),payload:JSON.parse(sf(t[1])),signature:ps(t[2]),raw:{header:t[0],payload:t[1]}}}async function cy(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function dy(n,t){return new Promise((i,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await n(u);if(!t(u,null,d)){i(d);return}}catch(d){if(!t(u,d)){o(d);return}}})()})}function hy(n){return("0"+n.toString(16)).substr(-2)}function fy(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let o="";for(let u=0;u<56;u++)o+=s.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,hy).join("")}async function py(n){const s=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",s),o=new Uint8Array(i);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function my(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await py(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ss(n,t,s=!1){const i=fy();let o=i;s&&(o+="/PASSWORD_RECOVERY"),await cs(n,`${t}-code-verifier`,o);const u=await my(i);return[u,i===u?"plain":"s256"]}const gy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yy(n){const t=n.headers.get(Eu);if(!t||!t.match(gy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vy(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function _y(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function is(n){if(!wy.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uu(){const n={};return new Proxy(n,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xy(n,t){return new Proxy(n,{get:(s,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const u=i.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,i,o)}})}function af(n){return JSON.parse(JSON.stringify(n))}const yn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),by=[502,503,504];async function of(n){var t;if(!uy(n))throw new Tu(yn(n),0);if(by.includes(n.status))throw new Tu(yn(n),n.status);let s;try{s=await n.json()}catch(u){throw new _n(yn(u),u)}let i;const o=yy(n);if(o&&o.getTime()>=qf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new tf(yn(s),n.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Rt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new tf(yn(s),n.status,s.weak_password.reasons);throw new Yg(yn(s),n.status||500,i)}const ky=(n,t,s,i)=>{const o={method:n,headers:t?.headers||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),s))};async function ge(n,t,s,i){var o;const u=Object.assign({},i?.headers);u[Eu]||(u[Eu]=qf["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const d=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(d.redirect_to=i.redirectTo);const p=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await Sy(n,t,s+p,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function Sy(n,t,s,i,o,u){const d=ky(t,i,o,u);let p;try{p=await n(s,Object.assign({},d))}catch(m){throw console.error(m),new Tu(yn(m),0)}if(p.ok||await of(p),i?.noResolveJson)return p;try{return await p.json()}catch(m){await of(m)}}function Kt(n){var t;let s=null;Ty(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=ay(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:s,user:i},error:null}}function lf(n){const t=Kt(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Gr(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function jy(n){return{data:n,error:null}}function Ey(n){const{action_link:t,email_otp:s,hashed_token:i,redirect_to:o,verification_type:u}=n,d=ro(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:t,email_otp:s,hashed_token:i,redirect_to:o,verification_type:u},m=Object.assign({},d);return{data:{properties:p,user:m},error:null}}function uf(n){return n}function Ty(n){return n.access_token&&n.refresh_token&&n.expires_in}const cu=["global","local","others"];class Cy{constructor({url:t="",headers:s={},fetch:i}){this.url=t,this.headers=s,this.fetch=Gf(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=cu[0]){if(cu.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cu.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,s={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Gr})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:s}=t,i=ro(t,["options"]),o=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Ey,redirectTo:s?.redirectTo})}catch(s){if(he(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Gr})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,i,o,u,d,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:uf});if(v.error)throw v.error;const w=await v.json(),_=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,x=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(j=>{const R=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(j.split(";")[1].split("=")[1]);g[`${k}Page`]=R}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(he(g))return{data:{users:[]},error:g};throw g}}async getUserById(t){is(t);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Gr})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){is(t);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Gr})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,s=!1){is(t);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Gr})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){is(t.userId);try{const{data:s,error:i}=await ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:s,error:i}}catch(s){if(he(s))return{data:null,error:s};throw s}}async _deleteFactor(t){is(t.userId),is(t.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,i,o,u,d,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:uf});if(v.error)throw v.error;const w=await v.json(),_=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,x=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(j=>{const R=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(j.split(";")[1].split("=")[1]);g[`${k}Page`]=R}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(he(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(he(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(he(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(he(s))return{data:null,error:s};throw s}}}function cf(n={}){return{getItem:t=>n[t]||null,setItem:(t,s)=>{n[t]=s},removeItem:t=>{delete n[t]}}}const as={debug:!!(globalThis&&Kf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ny extends Jf{}async function Ry(n,t,s){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),as.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await s()}finally{as.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(t===0)throw as.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Ny(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(as.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Oy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Yf(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Dy(n){return parseInt(n,16)}function Py(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function Ay(n){var t;const{chainId:s,domain:i,expirationTime:o,issuedAt:u=new Date,nonce:d,notBefore:p,requestId:m,resources:g,scheme:v,uri:w,version:_}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const x=Yf(n.address),j=v?`${v}://${i}`:i,R=n.statement?`${n.statement}
`:"",k=`${j} wants you to sign in with your Ethereum account:
${x}

${R}`;let T=`URI: ${w}
Version: ${_}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(o&&(T+=`
Expiration Time: ${o.toISOString()}`),p&&(T+=`
Not Before: ${p.toISOString()}`),m&&(T+=`
Request ID: ${m}`),g){let B=`
Resources:`;for(const M of g){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);B+=`
- ${M}`}T+=B}return`${k}
${T}`}class Ge extends Error{constructor({message:t,code:s,cause:i,name:o}){var u;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=o??(i instanceof Error?i.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class Ya extends Ge{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function Iy({error:n,options:t}){var s,i,o;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ge({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const d=window.location.hostname;if(Qf(d)){if(u.rp.id!==d)return new Ge({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Ly({error:n,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ge({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(Qf(i)){if(s.rpId!==i)return new Ge({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class My{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const $y=new My;function Uy(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:s,excludeCredentials:i}=n,o=ro(n,["challenge","user","excludeCredentials"]),u=ps(t).buffer,d=Object.assign(Object.assign({},s),{id:ps(s.id).buffer}),p=Object.assign(Object.assign({},o),{challenge:u,user:d});if(i&&i.length>0){p.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const g=i[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:ps(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function zy(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:s}=n,i=ro(n,["challenge","allowCredentials"]),o=ps(t).buffer,u=Object.assign(Object.assign({},i),{challenge:o});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const p=s[d];u.allowCredentials[d]=Object.assign(Object.assign({},p),{id:ps(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function By(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:wn(new Uint8Array(n.response.attestationObject)),clientDataJSON:wn(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Fy(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,i=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:wn(new Uint8Array(o.authenticatorData)),clientDataJSON:wn(new Uint8Array(o.clientDataJSON)),signature:wn(new Uint8Array(o.signature)),userHandle:o.userHandle?wn(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Qf(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function df(){var n,t;return!!(ot()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Wy(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ya("Browser returned unexpected credential type",t)}:{data:null,error:new Ya("Empty credential response",t)}}catch(t){return{data:null,error:Iy({error:t,options:n})}}}async function Vy(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ya("Browser returned unexpected credential type",t)}:{data:null,error:new Ya("Empty credential response",t)}}catch(t){return{data:null,error:Ly({error:t,options:n})}}}const qy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Hy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qa(...n){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),s=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of n)if(o)for(const u in o){const d=o[u];if(d!==void 0)if(Array.isArray(d))i[u]=d;else if(s(d))i[u]=d;else if(t(d)){const p=i[u];t(p)?i[u]=Qa(p,d):i[u]=Qa(d)}else i[u]=d}return i}function Ky(n,t){return Qa(qy,n,t||{})}function Gy(n,t){return Qa(Hy,n,t||{})}class Jy{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:i,signal:o},u){try{const{data:d,error:p}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!d)return{data:null,error:p};const m=o??$y.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:g}=d.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${i}`),g.displayName||(g.displayName=g.name)}switch(d.webauthn.type){case"create":{const g=Ky(d.webauthn.credential_options.publicKey,u?.create),{data:v,error:w}=await Wy({publicKey:g,signal:m});return v?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}case"request":{const g=Gy(d.webauthn.credential_options.publicKey,u?.request),{data:v,error:w}=await Vy(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g,signal:m}));return v?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}}}catch(d){return he(d)?{data:null,error:d}:{data:null,error:new _n("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:s,webauthn:i}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!s)return{data:null,error:new mi("rpId is required for WebAuthn authentication")};try{if(!df())return{data:null,error:new _n("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:i},signal:o},{request:u});if(!d)return{data:null,error:p};const{webauthn:m}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:i,credential_response:m.credential_response}})}catch(d){return he(d)?{data:null,error:d}:{data:null,error:new _n("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!s)return{data:null,error:new mi("rpId is required for WebAuthn registration")};try{if(!df())return{data:null,error:new _n("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===t&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:i},signal:o},{create:u});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(d){return he(d)?{data:null,error:d}:{data:null,error:new _n("Unexpected error in register",d)}}}}Oy();const Yy={url:qg,storageKey:Hg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function hf(n,t,s){return await s()}const os={};class gi{get jwks(){var t,s;return(s=(t=os[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=os[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{cachedAt:t})}constructor(t){var s,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Yy),t);if(this.storageKey=u.storageKey,this.instanceID=(s=gi.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,gi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&ot()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Cy({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Gf(u.fetch),this.lock=u.lock||hf,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,this.lockAcquireTimeout=u.lockAcquireTimeout,u.lock?this.lock=u.lock:this.persistSession&&ot()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Ry:this.lock=hf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Jy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Kf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cf(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=cf(this.memoryStorage)),ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},i="none";if(ot()&&(s=ly(window.location.href),this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce")),ot()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:u}=await this._getSessionFromURL(s,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Zg(u)){const m=(t=u.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return{error:u}}const{session:d,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",p),await this._saveSession(d),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return he(s)?this._returnResult({error:s}):this._returnResult({error:new _n("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,i,o;try{const u=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Kt}),{data:d,error:p}=u;if(p||!d)return this._returnResult({data:{user:null,session:null},error:p});const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(he(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(t){var s,i,o;try{let u;if("email"in t){const{email:v,password:w,options:_}=t;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await ss(this.storage,this.storageKey)),u=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:w,data:(s=_?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:x,code_challenge_method:j},xform:Kt})}else if("phone"in t){const{phone:v,password:w,options:_}=t;u=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(o=_?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Kt})}else throw new Ba("You must provide either an email or phone number and a password");const{data:d,error:p}=u;if(p||!d)return await at(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(await at(this.storage,`${this.storageKey}-code-verifier`),he(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(t){try{let s;if("email"in t){const{email:u,password:d,options:p}=t;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:lf})}else if("phone"in t){const{phone:u,password:d,options:p}=t;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:lf})}else throw new Ba("You must provide either an email or phone number and a password");const{data:i,error:o}=s;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const u=new ns;return this._returnResult({data:{user:null,session:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,i,o,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,i,o,u,d,p,m,g,v,w,_;let x,j;if("message"in t)x=t.message,j=t.signature;else{const{chain:R,wallet:k,statement:T,options:B}=t;let M;if(ot())if(typeof k=="object")M=k;else{const de=window;if("ethereum"in de&&typeof de.ethereum=="object"&&"request"in de.ethereum&&typeof de.ethereum.request=="function")M=de.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=k}const D=new URL((s=B?.url)!==null&&s!==void 0?s:window.location.href),H=await M.request({method:"eth_requestAccounts"}).then(de=>de).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=Yf(H[0]);let W=(i=B?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!W){const de=await M.request({method:"eth_chainId"});W=Dy(de)}const te={domain:D.host,address:K,statement:T,uri:D.href,version:"1",chainId:W,nonce:(o=B?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(u=B?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(p=B?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=B?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=B?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=B?.signInWithEthereum)===null||v===void 0?void 0:v.resources};x=Ay(te),j=await M.request({method:"personal_sign",params:[Py(x),K]})}try{const{data:R,error:k}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Kt});if(k)throw k;if(!R||!R.session||!R.user){const T=new ns;return this._returnResult({data:{user:null,session:null},error:T})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:k})}catch(R){if(he(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(t){var s,i,o,u,d,p,m,g,v,w,_,x;let j,R;if("message"in t)j=t.message,R=t.signature;else{const{chain:k,wallet:T,statement:B,options:M}=t;let D;if(ot())if(typeof T=="object")D=T;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))D=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=T}const H=new URL((s=M?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in D&&D.signIn){const K=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),B?{statement:B}:null));let W;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")W=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)W=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)j=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),R=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${H.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(o=(i=M?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=M?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((d=M?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((p=M?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((m=M?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((g=M?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((w=(v=M?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...M.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const K=await D.signMessage(new TextEncoder().encode(j),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=K}}try{const{data:k,error:T}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:wn(R)},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Kt});if(T)throw T;if(!k||!k.session||!k.user){const B=new ns;return this._returnResult({data:{user:null,session:null},error:B})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:T})}catch(k){if(he(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const s=await gn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(s??"").split("/");try{if(!i&&this.flowType==="pkce")throw new ey;const{data:u,error:d}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Kt});if(await at(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const p=new ns;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:d})}catch(u){if(await at(this.storage,`${this.storageKey}-code-verifier`),he(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(t){try{const{options:s,provider:i,token:o,access_token:u,nonce:d}=t,p=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Kt}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const v=new ns;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,i,o,u,d;try{if("email"in t){const{email:p,options:m}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await ss(this.storage,this.storageKey));const{error:w}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in t){const{phone:p,options:m}=t,{data:g,error:v}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:v})}throw new Ba("You must provide either an email or phone number.")}catch(p){if(await at(this.storage,`${this.storageKey}-code-verifier`),he(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(t){var s,i;try{let o,u;"options"in t&&(o=(s=t.options)===null||s===void 0?void 0:s.redirectTo,u=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:p}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:Kt});if(p)throw p;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,g=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(o){if(he(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var s,i,o,u,d;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await ss(this.storage,this.storageKey));const g=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:jy});return!((u=g.data)===null||u===void 0)&&u.url&&ot()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await at(this.storage,`${this.storageKey}-code-verifier`),he(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:i}=t;if(i)throw i;if(!s)throw new Rt;const{error:o}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(he(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:u}=t,{error:d}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:i,type:o,options:u}=t,{data:d,error:p}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:p})}throw new Ba("You must provide either an email or phone number and a type")}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await gn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<au:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const d=await gn(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=uu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=xy(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Gr}):await this._useSession(async s=>{var i,o,u;const{data:d,error:p}=s;if(p)throw p;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rt}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:Gr})})}catch(s){if(he(s))return Xg(s)&&(await this._removeSession(),await at(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async i=>{const{data:o,error:u}=i;if(u)throw u;if(!o.session)throw new Rt;const d=o.session;let p=null,m=null;this.flowType==="pkce"&&t.email!=null&&([p,m]=await ss(this.storage,this.storageKey));const{data:g,error:v}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:p,code_challenge_method:m}),jwt:d.access_token,xform:Gr});if(v)throw v;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(i){if(await at(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Rt;const s=Date.now()/1e3;let i=s,o=!0,u=null;const{payload:d}=lu(t.access_token);if(d.exp&&(i=d.exp,o=i<=s),o){const{data:p,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(t.access_token);if(m)throw m;u={access_token:t.access_token,refresh_token:t.refresh_token,user:p.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(s){if(he(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var i;if(!t){const{data:d,error:p}=s;if(p)throw p;t=(i=d.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new Rt;const{data:o,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!ot())throw new Fa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ef("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fa("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ef("No code detected.");const{data:B,error:M}=await this._exchangeCodeForSession(t.code);if(M)throw M;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:u,refresh_token:d,expires_in:p,expires_at:m,token_type:g}=t;if(!u||!p||!d||!g)throw new Fa("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(p);let _=v+w;m&&(_=parseInt(m));const x=_-v;x*1e3<=us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const j=_-w;v-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,_,v):v-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,_,v);const{data:R,error:k}=await this._getUser(u);if(k)throw k;const T={provider_token:i,provider_refresh_token:o,access_token:u,expires_in:w,expires_at:_,refresh_token:d,token_type:g,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:t.type},error:null})}catch(i){if(he(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await gn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:o,error:u}=s;if(u)return this._returnResult({error:u});const d=(i=o.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:p}=await this.admin.signOut(d,t);if(p&&!(Qg(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return t!=="others"&&(await this._removeSession(),await at(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=oy(),i={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async s=>{var i,o;try{const{data:{session:u},error:d}=s;if(d)throw d;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,s={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await ss(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(await at(this.storage,`${this.storageKey}-code-verifier`),he(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var t;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:i,error:o}=await this._useSession(async u=>{var d,p,m,g,v;const{data:w,error:_}=u;if(_)throw _;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(p=t.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",x,{headers:this.headers,jwt:(v=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return ot()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(he(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var i;try{const{error:o,data:{session:u}}=s;if(o)throw o;const{options:d,provider:p,token:m,access_token:g,nonce:v}=t,w=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=u?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:p,id_token:m,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Kt}),{data:_,error:x}=w;return x?this._returnResult({data:{user:null,session:null},error:x}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new ns}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:x}))}catch(o){if(await at(this.storage,`${this.storageKey}-code-verifier`),he(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var i,o;const{data:u,error:d}=s;if(d)throw d;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await dy(async o=>(o>0&&await cy(200*Math.pow(2,o-1)),this._debug(s,"refreshing attempt",o),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Kt})),(o,u)=>{const d=200*Math.pow(2,o);return u&&ou(u)&&Date.now()+d-i<us})}catch(i){if(this._debug(s,"error",i),he(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",i),ot()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,s;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await gn(this.storage,this.storageKey);if(o&&this.userStorage){let d=await gn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await cs(this.userStorage,this.storageKey+"-user",d)),o.user=(t=d?.user)!==null&&t!==void 0?t:uu()}else if(o&&!o.user&&!o.user){const d=await gn(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await at(this.storage,this.storageKey+"-user"),await cs(this.storage,this.storageKey,o)):o.user=uu()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const u=((s=o.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<au;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${au}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),ou(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:p}=await this._getUser(o.access_token);!p&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var s,i;if(!t)throw new Rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new so;const{data:u,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!u.session)throw new Rt;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(o,"error",u),he(u)){const d={data:null,error:u};return ou(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,s,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:s});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(t,s)}catch(m){u.push(m)}});if(await Promise.all(d),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await at(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),i=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&s.user&&await cs(this.userStorage,this.storageKey+"-user",{user:s.user});const o=Object.assign({},s);delete o.user;const u=af(o);await cs(this.storage,this.storageKey,u)}else{const o=af(s);await cs(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await at(this.storage,this.storageKey),await at(this.storage,this.storageKey+"-code-verifier"),await at(this.storage,this.storageKey+"-user"),this.userStorage&&await at(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ot()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),us);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${us}ms, refresh threshold is ${ju} ticks`),o<=ju&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Jf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ot()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,i){const o=[`provider=${encodeURIComponent(s)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,d]=await ss(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(p.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);o.push(u.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var i;const{data:o,error:u}=s;return u?this._returnResult({data:null,error:u}):await ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var i,o;const{data:u,error:d}=s;if(d)return this._returnResult({data:null,error:d});const p=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:g}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var i;const{data:o,error:u}=s;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?By(t.webauthn.credential_response):Fy(t.webauthn.credential_response)})}:{code:t.code}),{data:p,error:m}=await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var i;const{data:o,error:u}=s;if(u)return this._returnResult({data:null,error:u});const d=await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(d.error)return d;const{data:p}=d;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Uy(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:zy(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=s?.factors)!==null&&t!==void 0?t:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,s;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=lu(i.access_token);let d=null;u.aal&&(d=u.aal);let p=d;((s=(t=i.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:i},error:o}=s;return o?this._returnResult({data:null,error:o}):i?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Rt})})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new Rt});const d=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&ot()&&!s?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,s){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new Rt});const d=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&ot()&&!s?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:i}=t;return i?this._returnResult({data:null,error:i}):s?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Rt})})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:i},error:o}=s;return o?this._returnResult({data:null,error:o}):i?(await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Rt})})}catch(s){if(he(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let i=s.keys.find(p=>p.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(p=>p.kid===t),i&&this.jwks_cached_at+Jg>o)return i;const{data:u,error:d}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,i=u.keys.find(p=>p.kid===t),!i)?null:i}async getClaims(t,s={}){try{let i=t;if(!i){const{data:x,error:j}=await this.getSession();if(j||!x.session)return this._returnResult({data:null,error:j});i=x.session.access_token}const{header:o,payload:u,signature:d,raw:{header:p,payload:m}}=lu(i);s?.allowExpired||vy(u.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!g){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:u,header:o,signature:d},error:null}}const v=_y(o.alg),w=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,d,iy(`${p}.${m}`)))throw new Cu("Invalid JWT signature");return{data:{claims:u,header:o,signature:d},error:null}}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}}gi.nextInstanceID={};const Qy=gi,Xy="2.90.1";let li="";typeof Deno<"u"?li="deno":typeof document<"u"?li="web":typeof navigator<"u"&&navigator.product==="ReactNative"?li="react-native":li="node";const Zy={"X-Client-Info":`supabase-js-${li}/${Xy}`},ev={headers:Zy},tv={schema:"public"},rv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nv={};function yi(n){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(n)}function sv(n,t){if(yi(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var i=s.call(n,t);if(yi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function iv(n){var t=sv(n,"string");return yi(t)=="symbol"?t:t+""}function av(n,t,s){return(t=iv(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function ff(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),s.push.apply(s,i)}return s}function Ve(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ff(Object(s),!0).forEach(function(i){av(n,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):ff(Object(s)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(s,i))})}return n}const ov=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),lv=()=>Headers,uv=(n,t,s)=>{const i=ov(s),o=lv();return async(u,d)=>{var p;const m=(p=await t())!==null&&p!==void 0?p:n;let g=new o(d?.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),i(u,Ve(Ve({},d),{},{headers:g}))}};function cv(n){return n.endsWith("/")?n:n+"/"}function dv(n,t){var s,i;const{db:o,auth:u,realtime:d,global:p}=n,{db:m,auth:g,realtime:v,global:w}=t,_={db:Ve(Ve({},m),o),auth:Ve(Ve({},g),u),realtime:Ve(Ve({},v),d),storage:{},global:Ve(Ve(Ve({},w),p),{},{headers:Ve(Ve({},(s=w?.headers)!==null&&s!==void 0?s:{}),(i=p?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?_.accessToken=n.accessToken:delete _.accessToken,_}function hv(n){const t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cv(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var fv=class extends Qy{constructor(n){super(n)}},pv=class{constructor(n,t,s){var i,o;this.supabaseUrl=n,this.supabaseKey=t;const u=hv(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:tv,realtime:nv,auth:Ve(Ve({},rv),{},{storageKey:d}),global:ev},m=dv(s??{},p);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=m.auth)!==null&&g!==void 0?g:{},this.headers,m.global.fetch)}this.fetch=uv(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Ve({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new Km(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new Vg(this.storageUrl.href,this.headers,this.fetch,s?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Fm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,s)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,s;if(n.accessToken)return await n.accessToken();const{data:i}=await n.auth.getSession();return(t=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:i,userStorage:o,storageKey:u,flowType:d,lock:p,debug:m,throwOnError:g},v,w){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fv({url:this.authUrl.href,headers:Ve(Ve({},_),v),storageKey:u,autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:i,userStorage:o,flowType:d,lock:p,debug:m,throwOnError:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new cg(this.realtimeUrl.href,Ve(Ve({},n),{},{params:Ve(Ve({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t?.access_token)})}_handleTokenChanged(n,t,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const mv=(n,t,s)=>new pv(n,t,s);function gv(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const t=n.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}gv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yv=(n,t,s)=>{const i=(s.workout_logs||[]).filter(m=>m.user_id===n&&m.scheduled_for===t),o=(s.daily_checklist_logs||[]).filter(m=>m.user_id===n&&m.scheduled_for===t&&m.item_id.includes("nutr"));(s.daily_checklist_logs||[]).filter(m=>m.user_id===n&&m.scheduled_for===t&&m.item_id.includes("supp"));const u=i.length,d=o.filter(m=>m.completed).length;let p="";return u===0&&d===0?p="I see you haven't logged anything for today yet. Remember, consistency is key! Start with your first meal or a light walk.":u>0&&d>0?p=`Great work today! You smashed ${u} exercise sets and stayed on track with your nutrition. Your metabolic momentum is high. Keep hydrating!`:u>0?p=`Solid training session with ${u} sets logged. Don't forget to check off your nutrition items to ensure proper recovery!`:p=`Nutrition is looking good! You've checked off ${d} items. Are we hitting the gym later, or is this a recovery day?`,i.some(m=>m.intensity>80)&&(p+=" I noticed some high-intensity cardio - great for fat oxidation!"),{summary:p,generated_at:new Date().toISOString()}},Nu=()=>JSON.parse(localStorage.getItem("mock_db")||"{}"),Xf=n=>localStorage.setItem("mock_db",JSON.stringify(n)),ai={requests:0,egressBytes:0,logRequest(n,t,s){const i=new Blob([JSON.stringify(s)]).size;this.requests++,this.egressBytes+=i;const o=JSON.parse(localStorage.getItem("mock_monitor_stats")||'{"requests":0, "egressBytes":0, "logs":[], "breakdown":{}}');o.requests=(o.requests||0)+1,o.egressBytes=(o.egressBytes||0)+i,o.logs=[{id:o.requests,timestamp:new Date().toISOString(),type:n,table:t,size:i},...o.logs||[]].slice(0,50),o.breakdown||(o.breakdown={});const u=`${n} ${t}`;o.breakdown[u]||(o.breakdown[u]={count:0,size:0}),o.breakdown[u].count++,o.breakdown[u].size+=i,localStorage.setItem("mock_monitor_stats",JSON.stringify(o))}};class vv{constructor(t){this.table=t,this.db=Nu(),this.data=this.db[t]||[],this.filters=[],this.orders=[],this.limitVal=null,this.isSingle=!1,this.mutation=null,this.shouldSelect=!1}select(t){return this.shouldSelect=!0,this}eq(t,s){return this.filters.push(i=>i[t]===s),this}lte(t,s){return this.filters.push(i=>i[t]<=s),this}gte(t,s){return this.filters.push(i=>i[t]>=s),this}ilike(t,s){const i=new RegExp(s.replace(/%/g,".*"),"i");return this.filters.push(o=>i.test(o[t])),this}or(t){return this}order(t,{ascending:s=!0}={}){return this.orders.push({column:t,ascending:s}),this}limit(t){return this.limitVal=t,this}single(){return this.isSingle=!0,this}maybeSingle(){return this.isSingle=!0,this}insert(t){return this.mutation={type:"INSERT",data:t},this}upsert(t,s){return this.mutation={type:"UPSERT",data:t},this}update(t){return this.mutation={type:"UPDATE",data:t},this}delete(){return this.mutation={type:"DELETE"},this}async then(t,s){await new Promise(d=>setTimeout(d,50)),this.db=Nu(),this.data=this.db[this.table]||[];let i=null;if(this.mutation){const{type:d,data:p}=this.mutation;if(d==="INSERT"){const m={...p,id:p.id||crypto.randomUUID(),created_at:new Date().toISOString()};this.db[this.table]||(this.db[this.table]=[]),this.db[this.table].push(m),i=[m],ai.logRequest("INSERT",this.table,m)}else if(d==="UPSERT"){this.db[this.table]||(this.db[this.table]=[]);const m=this.db[this.table].findIndex(g=>!!(p.id&&g.id===p.id||this.table==="daily_exercise_status"&&g.user_id===p.user_id&&g.date===p.date&&g.exercise_index===p.exercise_index||this.table==="daily_checklist_logs"&&g.user_id===p.user_id&&g.item_id===p.item_id&&g.scheduled_for===p.scheduled_for||this.table==="user_routine_status"&&g.user_id===p.user_id&&g.active_routine_id===p.active_routine_id||this.table==="profiles"&&g.id===p.id));if(m>=0)this.db[this.table][m]={...this.db[this.table][m],...p},i=[this.db[this.table][m]];else{const g={...p,id:p.id||crypto.randomUUID()};this.db[this.table].push(g),i=[g]}ai.logRequest("UPSERT",this.table,p)}else d==="UPDATE"?(this.db[this.table]=this.db[this.table].map(m=>this.filters.every(g=>g(m))?{...m,...p}:m),i=null,ai.logRequest("UPDATE",this.table,p)):d==="DELETE"&&(this.db[this.table]=this.db[this.table].filter(m=>!this.filters.every(g=>g(m))),i=null,ai.logRequest("DELETE",this.table,{}));if(Xf(this.db),this.shouldSelect){i&&this.isSingle?t({data:i[0],error:null}):t({data:i,error:null});return}t({data:null,error:null});return}let o=this.data.filter(d=>this.filters.every(p=>p(d)));this.orders.length>0&&o.sort((d,p)=>{for(const m of this.orders){if(d[m.column]<p[m.column])return m.ascending?-1:1;if(d[m.column]>p[m.column])return m.ascending?1:-1}return 0}),this.limitVal&&(o=o.slice(0,this.limitVal));let u;this.isSingle?u=o.length>0?o[0]:null:u=o,ai.logRequest("SELECT",this.table,u||{}),t({data:u,error:null})}}let Ka=[];const du=(n,t)=>{Ka.forEach(s=>s(n,t))},_v={from:n=>new vv(n),auth:{getSession:async()=>{const n=JSON.parse(localStorage.getItem("mock_session")||"null");if(localStorage.getItem("mock_session")===null){const t={user:{id:"mock-user-id",email:"test@local.com"}};return localStorage.setItem("mock_session",JSON.stringify(t)),{data:{session:t}}}return{data:{session:n}}},onAuthStateChange:n=>(Ka.push(n),{data:{subscription:{unsubscribe:()=>{Ka=Ka.filter(t=>t!==n)}}}}),signInWithPassword:async({email:n})=>{const t={id:"mock-user-id",email:n},s={user:t,access_token:"mock-token",refresh_token:"mock-refresh"};return localStorage.setItem("mock_session",JSON.stringify(s)),du("SIGNED_IN",s),{data:{user:t,session:s},error:null}},signUp:async({email:n})=>{const t={id:"mock-user-id",email:n},s={user:t,access_token:"mock-token",refresh_token:"mock-refresh"};return localStorage.setItem("mock_session",JSON.stringify(s)),du("SIGNED_IN",s),{data:{user:t,session:s},error:null}},signOut:async()=>{localStorage.removeItem("mock_session"),localStorage.setItem("mock_session","null"),du("SIGNED_OUT",null)}},functions:{invoke:async(n,{body:t})=>{if(await new Promise(s=>setTimeout(s,1500)),n==="analyze-day"){const s=Nu(),i=yv(t.userId,t.date,s);s.daily_analytics||(s.daily_analytics=[]);const o=s.daily_analytics.findIndex(u=>u.user_id===t.userId&&u.date===t.date);return o>=0?s.daily_analytics[o]={...s.daily_analytics[o],...i}:s.daily_analytics.push({user_id:t.userId,date:t.date,...i}),Xf(s),{data:i,error:null}}return{data:{},error:null}}}},wv="https://vhqgufwgzspwmztpswdn.supabase.co",xv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZocWd1ZndnenNwd216dHBzd2RuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3NTc2NjUsImV4cCI6MjA4MzMzMzY2NX0.0z_hSGbzjzSWkXaZjgJ76uWsVdBa4h0OCkzEXs727pc",bv=sessionStorage.getItem("mp_is_temp_online")==="true";let Xa=!0;bv?(Xa=!1,localStorage.setItem("mp_use_mock_db","false")):(Xa=!0,localStorage.setItem("mp_use_mock_db","true"));console.log("[Supabase] Mode:",Xa?"MOCK (Offline)":"REAL (Cloud)");const ue=Xa?_v:mv(wv,xv),pf={mon:{training:{title:"Active Recovery",rest:0,instructions:"<ul><li>Goal: Recovery, improved circulation, and fat burning during the 42-hour fast.</li><li>Intensity: Low, you should be able to hold a conversation without gasping.</li></ul>",exercises:[{exercise:"Active Recovery",type:"Cardio",config:"30-60 min",focus:"<ul><li>Walk at a light to moderate pace outdoors or on a treadmill.</li></ul>"}],type:"list"},nutrition:{title:"42-hour Fast",input:"~0 kcal (p: 0g / f: 0g / c: 0g)",output:"~2400 kcal (BMR: ~1850 kcal + Activity: ~550 kcal)",deficit:"~2400",events:[]},supplements:{title:"Supplementation",events:[{time:"07:00",action:"On Waking / As Needed",items:[{name:"Electrolytes",dosage:"As needed (Lo Salt + Non-iodized salt)"}]},{time:"22:30",action:"Bedtime (Fasted)",items:[{name:"KSM-66 Ashwagandha",dosage:"4 caps"},{name:"OptiZinc (Zinc + Copper)",dosage:"1 cap"},{name:"Boron",dosage:"1 cap"},{name:"Vitamin B6 P-5-P",dosage:"1 cap"}]}]}},tue:{training:{title:"Heavy Leg Workout (Glycogen Depletion)",rest:60,instructions:"<ul><li>Goal: Maximal muscle glycogen depletion through high volume.</li><li>Rest between sets: 45-60 seconds.</li><li>Target RPE 9-10 (close to or at muscle failure).</li></ul>",exercises:[{exercise:"Goblet Squats",config:"4 x 15-20 @ 9 RPE",focus:"<ul><li>Keep dumbbell tight to chest, elbows pointing down.</li><li>Descend deep and controlled.</li><li>This is your main volume mover.</li></ul>"},{exercise:"Leg Press",config:"4 x 15-20 @ 10 RPE",focus:"<ul><li>Place feet shoulder-width apart.</li><li>Lower slowly and drive up explosively, do not lock knees at the top.</li></ul>"},{exercise:"Leg Extensions",config:"3 x 12-15 @ 10 RPE",focus:"<ul><li>Isolate the quadriceps.</li><li>Squeeze the muscle for a second at the top before starting the slow descent.</li></ul>"},{exercise:"Lying Leg Curls",config:"3 x 12-15 @ 10 RPE",focus:"<ul><li>Focus on the mind-muscle connection with the hamstrings.</li><li>Movement should be smooth, without using momentum from the hips.</li></ul>"},{exercise:"Dumbbell RDL",config:"3 x 12-15 @ 9 RPE",focus:"<ul><li>With slight knee bend, push hips back until you feel max stretch in hamstrings.</li><li>Keep back straight.</li></ul>"},{exercise:"Calf Raises",config:"4 x 20-25 @ 10 RPE",focus:"<ul><li>Perform full stretch at bottom position and hold for a second at the very top.</li></ul>"},{exercise:"PLANK - Core Finisher",config:"3 x To Failure @ 10 RPE",focus:"<ul><li>Keep body in a perfectly straight line from shoulders to heels.</li><li>Tighten core and glutes.</li><li>Do not let hips sag.</li></ul>"}],type:"list"},nutrition:{title:"Refeed & Fast Breaking",input:"~1541 kcal (p: 158g / f: 7g / c: 209g)",output:"~2850 kcal (BMR: ~1850 kcal + Activity: ~1000 kcal)",deficit:"~1308",events:[{time:"~14:00",action:"Post-Workout Shake",items:[{name:"Skimmed Curd",dosage:"250 g <span class='macro-stats'>(p:37.5 f:2.3 c:1.3)</span>"}]},{time:"Meal 1",action:"First Meal",items:[{name:"Hake Fillet",dosage:"300 g <span class='macro-stats'>(p:54.0 f:1.8 c:0.0)</span>"},{name:"White Rice",dosage:"150 g <span class='macro-stats'>(p:10.5 f:1.0 c:120.0)</span>"},{name:"Cucumber",dosage:"150 g <span class='macro-stats'>(p:1.0 f:0.2 c:5.4)</span>"}]},{time:"Meal 2",action:"Second Meal",items:[{name:"Hake Fillet",dosage:"260 g <span class='macro-stats'>(p:46.8 f:1.6 c:0.0)</span>"},{name:"White Rice",dosage:"100 g <span class='macro-stats'>(p:7.0 f:0.7 c:80.0)</span>"},{name:"Lettuce",dosage:"100 g <span class='macro-stats'>(p:1.4 f:0.2 c:2.9)</span>"}]}]},supplements:{title:"Supplementation",events:[{time:"07:00",action:"On Waking (Fasted)",items:[{name:"Electrolytes",dosage:"As needed"}]},{time:"12:30",action:"Pre-Workout",items:[{name:"Creatine Monohydrate",dosage:"1 scoop (5 g)"},{name:"Citrulline Malate",dosage:"2 scoops (6 g)"}]},{time:"13:00",action:"Intra-Workout",items:[{name:"EAA",dosage:"3 scoops (20 g)"}]},{time:"~14:00",action:"Post-Workout (Fasted)",items:[{name:"Marine Collagen",dosage:"5 scoops (12.5 g)"}]},{time:"Meal 1",action:"With Meal 1",items:[{name:"Creatine Monohydrate",dosage:"1 scoop (5 g)"},{name:"Vit&Min FORTE",dosage:"2 tabs"},{name:"Calcium Citrate",dosage:"1.5 tsp (3 g)"},{name:"Kelp (Iodine)",dosage:"1 tab"},{name:"Vitamin C",dosage:"1 scoop (1 g)"}]},{time:"Meal 2",action:"With Meal 2",items:[{name:"Magnesium Citrate",dosage:"3 scoops (2.7 g)"}]},{time:"22:30",action:"Bedtime (Fasted)",items:[{name:"KSM-66 Ashwagandha",dosage:"4 caps"},{name:"OptiZinc",dosage:"1 cap"},{name:"Boron",dosage:"1 cap"},{name:"Vitamin B6 P-5-P",dosage:"1 cap"}]}]}},wed:{training:{title:"Push (Chest/Shoulders/Triceps) - TUT Focus",rest:75,instructions:"<ul><li>Goal: Stimulate chest, shoulders, and triceps.</li><li>Focus on Time Under Tension (TUT).</li><li>Tempo: 3-1-1-0.</li><li>Rest between sets: 60-75 seconds.</li></ul>",exercises:[{exercise:"Flat Dumbbell Press",config:"4 x 8-12 @ 8-9 RPE",focus:"<ul><li>Tempo: 3-1-1-0.</li><li>Control the descent for 3 seconds.</li><li>Feel the stretch in chest at bottom before pushing explosively.</li></ul>"},{exercise:"Incline Dumbbell Press",config:"3 x 10-12 @ 9 RPE",focus:"<ul><li>Tempo: 3-1-1-0.</li><li>Bench angle 30-45 degrees.</li><li>Focus on upper chest. Elbows slightly tucked.</li></ul>"},{exercise:"Seated Dumbbell Shoulder Press",config:"3 x 10-12 @ 9 RPE",focus:"<ul><li>Tempo: 3-1-1-0.</li><li>Keep back straight.</li><li>Lower dumbbells to ear level and drive up without clanking them.</li></ul>"},{exercise:"Dumbbell Lateral Raises",config:"3 x 12-15 @ 9-10 RPE",focus:"<ul><li>Lead the movement with elbows, not wrists.</li><li>Imagine pouring two pitchers of water.</li><li>Target side delts.</li></ul>"},{exercise:"Cable Tricep Pushdowns (Rope)",config:"3 x 10-12 @ 9 RPE",focus:"<ul><li>Keep elbows tight to body.</li><li>Spread rope at bottom to max activate triceps.</li></ul>"},{exercise:"Overhead Cable Tricep Extension",config:"3 x 12-15 @ 10 RPE",focus:"<ul><li>Targets long head of triceps.</li><li>Full stretch and focus on full contraction.</li></ul>"},{exercise:"Ab Wheel Rollout - Core Finisher",config:"3 x 8-12 @ 9 RPE",focus:"<ul><li>Control movement slowly forward from knees as far as possible without arching back.</li><li>Use abs to pull back.</li></ul>"}],type:"list"},nutrition:{title:"PSMF/Keto Nutrition",input:"~1566 kcal (p: 166g / f: 89g / c: 22g)",output:"~2700 kcal (BMR: ~1850 kcal + Activity: ~850 kcal)",deficit:"~1133",events:[{time:"~14:00",action:"Post-Workout Shake",items:[{name:"Skimmed Curd",dosage:"300 g <span class='macro-stats'>(p:45.0 f:2.7 c:1.5)</span>"}]},{time:"Meal 1",action:"First Meal",items:[{name:"Pork Loin (trimmed)",dosage:"450 g <span class='macro-stats'>(p:112.5 f:15.8 c:0.0)</span>"},{name:"Cabbage",dosage:"200 g <span class='macro-stats'>(p:2.6 f:0.2 c:11.6)</span>"}]},{time:"Meal 2",action:"Second Meal",items:[{name:"Cod Liver (Officer)",dosage:"1 can (120 g) <span class='macro-stats'>(p:5.8 f:70.8 c:4.3)</span>"},{name:"Cucumber",dosage:"150 g <span class='macro-stats'>(p:1.0 f:0.2 c:5.4)</span>"}]}]},supplements:{title:"Supplementation",events:[{time:"07:00",action:"On Waking (Fasted)",items:[{name:"Electrolytes",dosage:"As needed"}]},{time:"12:30",action:"Pre-Workout",items:[{name:"Creatine Monohydrate",dosage:"1 scoop (5 g)"},{name:"Citrulline Malate",dosage:"2 scoops (6 g)"}]},{time:"13:00",action:"Intra-Workout",items:[{name:"EAA",dosage:"3 scoops (20 g)"}]},{time:"~14:00",action:"Post-Workout (Fasted)",items:[{name:"Marine Collagen",dosage:"5 scoops (12.5 g)"}]},{time:"Meal 1",action:"With Meal 1",items:[{name:"Calcium Citrate",dosage:"1.5 tsp (3 g)"},{name:"Vitamin C",dosage:"1 scoop (1 g)"}]},{time:"Meal 2",action:"With Meal 2",items:[{name:"Magnesium Citrate",dosage:"3 scoops (2.7 g)"}]},{time:"22:30",action:"Bedtime (Fasted)",items:[{name:"KSM-66 Ashwagandha",dosage:"4 caps"},{name:"OptiZinc",dosage:"1 cap"},{name:"Boron",dosage:"1 cap"},{name:"Vitamin B6 P-5-P",dosage:"1 cap"}]}]}},thu:{training:{title:"Pull (Back/Biceps) - TUT Focus",rest:75,instructions:"<ul><li>Goal: Stimulate back and biceps.</li><li>Focus on Time Under Tension (TUT).</li><li>Tempo: 3-1-1-0.</li><li>Rest between sets: 60-75 seconds.</li></ul>",exercises:[{exercise:"Wide Grip Lat Pulldown",config:"4 x 10-12 @ 8-9 RPE",focus:"<ul><li>Tempo: 3-1-1-0.</li><li>Think about pulling with elbows, not hands.</li><li>Squeeze shoulder blades hard at bottom.</li><li>Control weight all the way up.</li></ul>"},{exercise:"Seated Cable Row (V-Grip)",config:"4 x 10-12 @ 9 RPE",focus:"<ul><li>Tempo: 3-1-1-0.</li><li>Keep chest out and back straight.</li><li>Pull handle towards lower abdomen.</li></ul>"},{exercise:"One Arm Dumbbell Row",config:"3 x 8-10 @ 9 RPE",focus:"<ul><li>Max stretch at bottom, pull dumbbell in an arc towards hip, not straight up.</li><li>This maximizes lat activation.</li></ul>"},{exercise:"Face Pulls",config:"3 x 15-20 @ 8 RPE",focus:"<ul><li>Critical for shoulder and upper back health.</li><li>Pull towards face, ending in a 'double bicep' pose.</li></ul>"},{exercise:"Incline Dumbbell Curl",config:"3 x 10-12 @ 9-10 RPE",focus:"<ul><li>Bench incline 60-75 degrees.</li><li>Puts biceps under constant tension and stretch.</li><li>Elbows point to floor, curl only with biceps.</li></ul>"},{exercise:"Dumbbell Hammer Curls",config:"3 x 10-12 @ 9-10 RPE",focus:"<ul><li>Targets brachialis/forearm, adding arm thickness.</li><li>Strict movement, no swinging.</li></ul>"},{exercise:"Toes to Bar - Core Finisher",config:"3 x To Failure @ 10 RPE",focus:"<ul><li>If full range is hard, do Knees to Chest.</li><li>Avoid swinging.</li></ul>"}],type:"list"},nutrition:{title:"PSMF/Keto Nutrition",input:"~1234 kcal (p: 197g / f: 39g / c: 22g)",output:"~2700 kcal (BMR: ~1850 kcal + Activity: ~850 kcal)",deficit:"~1465",events:[{time:"~14:00",action:"Post-Workout Shake",items:[{name:"Skimmed Curd",dosage:"300 g <span class='macro-stats'>(p:45.0 f:2.7 c:1.5)</span>"}]},{time:"Meal 1",action:"First Meal",items:[{name:"Chicken Breast Fillet",dosage:"500 g <span class='macro-stats'>(p:115.0 f:6.0 c:0.0)</span>"},{name:"Broccoli",dosage:"250 g <span class='macro-stats'>(p:7.0 f:0.9 c:15.0)</span>"},{name:"Olive Oil",dosage:"2 tsp (8 ml) <span class='macro-stats'>(p:0.0 f:8.0 c:0.0)</span>"}]},{time:"Meal 2",action:"Second Meal",items:[{name:"Tuna in brine (drained)",dosage:"112 g <span class='macro-stats'>(p:28.0 f:1.1 c:0.0)</span>"},{name:"Zucchini",dosage:"200 g <span class='macro-stats'>(p:2.4 f:0.6 c:6.2)</span>"},{name:"Olive Oil",dosage:"2 tbsp (20 ml) <span class='macro-stats'>(p:0.0 f:20.0 c:0.0)</span>"}]}]},supplements:{title:"Supplementation",events:[{time:"07:00",action:"On Waking (Fasted)",items:[{name:"Electrolytes",dosage:"As needed"}]},{time:"12:30",action:"Pre-Workout",items:[{name:"Creatine Monohydrate",dosage:"1 scoop (5 g)"},{name:"Citrulline Malate",dosage:"2 scoops (6 g)"}]},{time:"13:00",action:"Intra-Workout",items:[{name:"EAA",dosage:"3 scoops (20 g)"}]},{time:"~14:00",action:"Post-Workout (Fasted)",items:[{name:"Marine Collagen",dosage:"5 scoops (12.5 g)"}]},{time:"Meal 1",action:"With Meal 1",items:[{name:"Omega 3 Ultra",dosage:"4 caps"},{name:"Vitamin D3 4000 + K2",dosage:"1 tab"},{name:"Vit&Min FORTE",dosage:"2 tabs"},{name:"Calcium Citrate",dosage:"1.5 tsp (3 g)"},{name:"Kelp (Iodine)",dosage:"1 tab"},{name:"Vitamin C",dosage:"1 scoop (1 g)"}]},{time:"Meal 2",action:"With Meal 2",items:[{name:"Magnesium Citrate",dosage:"3 scoops (2.7 g)"}]},{time:"22:30",action:"Bedtime (Fasted)",items:[{name:"KSM-66 Ashwagandha",dosage:"4 caps"},{name:"OptiZinc",dosage:"1 cap"},{name:"Boron",dosage:"1 cap"},{name:"Vitamin B6 P-5-P",dosage:"1 cap"}]}]}},fri:{training:{title:"Light to Moderate Swimming",rest:0,instructions:"<ul><li>Goal: Active recovery, improve cardiovascular system, fat burning with low joint stress.</li><li>Low to moderate intensity, steady state (LISS).</li><li>Focus on breathing technique and smooth movement.</li></ul>",exercises:[{exercise:"Light to Moderate Swimming",type:"Cardio",config:"30-45 min",focus:""}],type:"list"},nutrition:{title:"PSMF/Keto Nutrition",input:"~1119 kcal (p: 162g / f: 44g / c: 17g)",output:"~2550 kcal (BMR: ~1850 kcal + Activity: ~700 kcal)",deficit:"~1430",events:[{time:"~14:00",action:"Post-Workout Shake",items:[{name:"Skimmed Curd",dosage:"350 g <span class='macro-stats'>(p:52.5 f:3.2 c:1.8)</span>"}]},{time:"Meal 1",action:"First Meal",items:[{name:"Mackerel (whole)",dosage:"~400 g <span class='macro-stats'>(p:52.0 f:39.0 c:0.0)</span>"},{name:"Lettuce/Iceberg",dosage:"200 g <span class='macro-stats'>(p:2.8 f:0.4 c:5.8)</span>"}]},{time:"Meal 2",action:"Second Meal",items:[{name:"Tuna in brine (drained)",dosage:"112 g <span class='macro-stats'>(p:28.0 f:1.1 c:0.0)</span>"},{name:"Billa Skyr",dosage:"250 g <span class='macro-stats'>(p:27.5 f:0.5 c:10.0)</span>"}]}]},supplements:{title:"Supplementation",events:[{time:"07:00",action:"On Waking (Fasted)",items:[{name:"Electrolytes",dosage:"As needed"}]},{time:"13:00",action:"Intra-Workout",items:[{name:"EAA",dosage:"3 scoops (20 g)"}]},{time:"~14:00",action:"Post-Workout (Fasted)",items:[{name:"Marine Collagen",dosage:"5 scoops (12.5 g)"}]},{time:"Meal 1",action:"With Meal 1",items:[{name:"Vitamin D3 4000 + K2",dosage:"1 tab"},{name:"Vit&Min FORTE",dosage:"2 tabs"},{name:"Calcium Citrate",dosage:"1.5 tsp (3 g)"},{name:"Kelp (Iodine)",dosage:"1 tab"},{name:"Vitamin C",dosage:"1 scoop (1 g)"}]},{time:"Meal 2",action:"With Meal 2",items:[{name:"Magnesium Citrate",dosage:"3 scoops (2.7 g)"}]},{time:"22:30",action:"Bedtime (Fasted)",items:[{name:"KSM-66 Ashwagandha",dosage:"4 caps"},{name:"OptiZinc",dosage:"1 cap"},{name:"Boron",dosage:"1 cap"},{name:"Vitamin B6 P-5-P",dosage:"1 cap"}]}]}},sat:{training:{title:"Intensive Swimming (Intervals)",rest:90,instructions:"<ul><li>Goal: Max calorie burn, improve anaerobic capacity and metabolic stress.</li><li>Interval Training (HIIT).</li><li>Warm up 5-10 min, then alternate 1 length sprint (~90% effort) with 2 lengths very slow recovery swimming.</li><li>Cool down 5 min.</li></ul>",exercises:[{exercise:"Intensive Swimming (Intervals)",type:"Cardio",config:"15-20 min",focus:""}],type:"list"},nutrition:{title:"PSMF/Keto Nutrition",input:"~1161 kcal (p: 180g / f: 38g / c: 22g)",output:"~2750 kcal (BMR: ~1850 kcal + Activity: ~900 kcal)",deficit:"~1588",events:[{time:"~14:00",action:"Post-Workout Shake",items:[{name:"Skimmed Curd",dosage:"250 g <span class='macro-stats'>(p:37.5 f:2.3 c:1.3)</span>"}]},{time:"Meal 1",action:"First Meal",items:[{name:"Pork Loin (trimmed)",dosage:"450 g <span class='macro-stats'>(p:112.5 f:15.8 c:0.0)</span>"},{name:"Cabbage",dosage:"200 g <span class='macro-stats'>(p:2.6 f:0.2 c:11.6)</span>"},{name:"Olive Oil",dosage:"1 tbsp (10 ml) <span class='macro-stats'>(p:0.0 f:10.0 c:0.0)</span>"}]},{time:"Meal 2",action:"Second Meal",items:[{name:"Billa Skyr",dosage:"250 g <span class='macro-stats'>(p:27.5 f:0.5 c:10.0)</span>"},{name:"Olive Oil",dosage:"1 tbsp (10 ml) <span class='macro-stats'>(p:0.0 f:10.0 c:0.0)</span>"}]}]},supplements:{title:"Supplementation",events:[{time:"07:00",action:"On Waking (Fasted)",items:[{name:"Electrolytes",dosage:"As needed"}]},{time:"12:30",action:"Pre-Workout",items:[{name:"Creatine Monohydrate",dosage:"1 scoop (5 g)"},{name:"Citrulline Malate",dosage:"2 scoops (6 g)"}]},{time:"13:00",action:"Intra-Workout",items:[{name:"EAA",dosage:"3 scoops (20 g)"}]},{time:"~14:00",action:"Post-Workout (Fasted)",items:[{name:"Marine Collagen",dosage:"5 scoops (12.5 g)"}]},{time:"Meal 1",action:"With Meal 1",items:[{name:"Omega 3 Ultra",dosage:"4 caps"},{name:"Vitamin D3 4000 + K2",dosage:"1 tab"},{name:"Vit&Min FORTE",dosage:"2 tabs"},{name:"Calcium Citrate",dosage:"1.5 tsp (3 g)"},{name:"Kelp (Iodine)",dosage:"1 tab"},{name:"Vitamin C",dosage:"1 scoop (1 g)"}]},{time:"Meal 2",action:"With Meal 2",items:[{name:"Magnesium Citrate",dosage:"3 scoops (2.7 g)"}]},{time:"22:30",action:"Bedtime (Fasted)",items:[{name:"KSM-66 Ashwagandha",dosage:"4 caps"},{name:"OptiZinc",dosage:"1 cap"},{name:"Boron",dosage:"1 cap"},{name:"Vitamin B6 P-5-P",dosage:"1 cap"}]}]}},sun:{training:{title:"Metabolic Workout",rest:120,instructions:"<ul><li>Goal: Final glycogen depletion before fast.</li><li>Circuit training.</li><li>Perform exercises back-to-back with 15-20 sec rest.</li><li>After circuit ends, rest 90-120 sec.</li><li>Perform 3-4 total circuits.</li></ul>",exercises:[{exercise:"Goblet Squats - Circuit",config:"3-4 x 12-15 @ 8 RPE",focus:"<ul><li>Keep tempo high but form good.</li><li>Legs and core focus.</li></ul>"},{exercise:"Push-ups - Circuit",config:"3-4 x To Failure @ 10 RPE",focus:"<ul><li>Elevate feet if too easy.</li><li>Use knees if too hard.</li></ul>"},{exercise:"Bent-Over DB Rows - Circuit",config:"3-4 x 12-15 @ 8-9 RPE",focus:"<ul><li>Keep back straight.</li><li>Pull dumbbells to hip, squeezing shoulder blades.</li></ul>"},{exercise:"Standing DB Shoulder Press - Circuit",config:"3-4 x 10-12 @ 9 RPE",focus:"<ul><li>Use legs for slight initial push (Push Press) to maintain intensity.</li></ul>"},{exercise:"Kettlebell/DB Swings - Circuit",config:"3-4 x 20-25 @ 9 RPE",focus:"<ul><li>Metabolic finisher.</li><li>Movement comes from hips, not arms.</li><li>Squeeze core and glutes.</li></ul>"},{exercise:"Cable Crunches - Core Finisher",config:"3 x 12-15 @ 9-10 RPE",focus:"<ul><li>Perform AFTER all circuits.</li><li>Use rope.</li><li>Focus on curling torso, bringing ribs to hips.</li><li>Do not pull with arms.</li></ul>"}],type:"list"},nutrition:{title:"PSMF/Keto Nutrition",input:"~1176 kcal (p: 204g / f: 31g / c: 17g)",output:"~2750 kcal (BMR: ~1850 kcal + Activity: ~900 kcal)",deficit:"~1573",events:[{time:"~14:00",action:"Post-Workout Shake",items:[{name:"Skimmed Curd",dosage:"300 g <span class='macro-stats'>(p:45.0 f:2.7 c:1.5)</span>"}]},{time:"Meal 1",action:"First Meal",items:[{name:"Chicken Breast Fillet",dosage:"500 g <span class='macro-stats'>(p:115.0 f:6.0 c:0.0)</span>"},{name:"Broccoli",dosage:"250 g <span class='macro-stats'>(p:7.0 f:0.9 c:15.0)</span>"},{name:"Olive Oil",dosage:"1 tbsp (10 ml) <span class='macro-stats'>(p:0.0 f:10.0 c:0.0)</span>"}]},{time:"Meal 2",action:"Second Meal",items:[{name:"Skimmed Curd",dosage:"250 g <span class='macro-stats'>(p:37.5 f:2.3 c:1.3)</span>"},{name:"Olive Oil",dosage:"1 tbsp (10 ml) <span class='macro-stats'>(p:0.0 f:10.0 c:0.0)</span>"}]}]},supplements:{title:"Supplementation",events:[{time:"07:00",action:"On Waking (Fasted)",items:[{name:"Electrolytes",dosage:"As needed"}]},{time:"12:30",action:"Pre-Workout",items:[{name:"Creatine Monohydrate",dosage:"1 scoop (5 g)"},{name:"Citrulline Malate",dosage:"2 scoops (6 g)"}]},{time:"13:00",action:"Intra-Workout",items:[{name:"EAA",dosage:"3 scoops (20 g)"}]},{time:"~14:00",action:"Post-Workout (Fasted)",items:[{name:"Marine Collagen",dosage:"5 scoops (12.5 g)"}]},{time:"Meal 1",action:"With Meal 1",items:[{name:"Omega 3 Ultra",dosage:"4 caps"},{name:"Vitamin D3 4000 + K2",dosage:"1 tab"},{name:"Vit&Min FORTE",dosage:"2 tabs"},{name:"Calcium Citrate",dosage:"1.5 tsp (3 g)"},{name:"Kelp (Iodine)",dosage:"1 tab"},{name:"Vitamin C",dosage:"1 scoop (1 g)"}]},{time:"Meal 2",action:"With Meal 2",items:[{name:"Magnesium Citrate",dosage:"3 scoops (2.7 g)"}]},{time:"22:30",action:"Bedtime (Fasted)",items:[{name:"KSM-66 Ashwagandha",dosage:"4 caps"},{name:"OptiZinc",dosage:"1 cap"},{name:"Boron",dosage:"1 cap"},{name:"Vitamin B6 P-5-P",dosage:"1 cap"}]}]}}},mf={mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"},we=(function(){const n=O=>O?O.replace(/<ul[^>]*>/g,"").replace(/<\/ul>/g,"").replace(/<li>/g,"").replace(/<\/li>/g,`
`).replace(/\n\n+/g,`
`).trim():"";function t(O){const C={};Object.keys(mf).forEach(V=>{const z=pf[V];C[V]={training:{title:n(z.training.title),rest:z.training.rest,instructions:n(z.training.instructions),exercises:[],type:"list"},nutrition:JSON.parse(JSON.stringify(z.nutrition)),supplements:JSON.parse(JSON.stringify(z.supplements))}});const P=["mon","tue","wed","thu","fri","sat","sun"];return O&&O.length>0&&O.forEach(V=>{const z=P[V.day_number-1];z&&C[z]&&(C[z].training.title=V.title,C[z].training.instructions=n(V.instructions),C[z].training.exercises=(V.exercises||[]).map(S=>({...S,focus:n(S.focus),type:S.type||"Resistance"})))}),C}async function s(O,C){const{data:F}=await ue.from("routines").select("*").eq("id",C).single();if(!F)return null;const{data:P,error:V}=await ue.from("routines").insert({name:F.name+" (Custom)",description:F.description,cycle_length:F.cycle_length,is_system_default:!1,owner_user_id:O}).select().single();if(V)return null;const{data:z}=await ue.from("routine_days").select("*").eq("routine_id",C),S=z.map(I=>({routine_id:P.id,day_number:I.day_number,day_type:I.day_type,title:I.title,instructions:I.instructions,exercises:I.exercises}));return await ue.from("routine_days").insert(S),await ue.from("user_routine_status").upsert({user_id:O,active_routine_id:P.id,updated_at:new Date}),P.id}async function i(O,C=new Date().toISOString().split("T")[0]){const{data:F}=await ue.from("user_routine_status").select("active_routine_id, cycle_start_date").eq("user_id",O).lte("cycle_start_date",C).or(`cycle_end_date.gte.${C},cycle_end_date.is.null`).order("id",{ascending:!1}).limit(1).maybeSingle();if(F)return F;const{data:P}=await ue.from("routines").select("id").eq("is_system_default",!0).limit(1).single();return P?{active_routine_id:P.id,cycle_start_date:new Date().toISOString()}:null}async function o(O){return(await i(O))?.active_routine_id}const u={};async function d(O,C,F){const P=`${O}-${C}-${F}`,V=Date.now();if(u[P]&&V-u[P].timestamp<2e3)return console.log("[DataModule] Throttling frequent request:",P),u[P].promise;if(console.log("Loading Raw Plan for:",O),!O)return null;const z=(async()=>{const S=C||new Date().toISOString().split("T")[0],I=await i(O,S);if(!I?.active_routine_id)return null;const re=`cached_routine_v2_${I.active_routine_id}`,se=localStorage.getItem(re);let fe;if(se)console.log("[DataModule] Using cached routine structure."),fe=JSON.parse(se);else{console.log("[DataModule] Fetching full routine from DB...");const{data:ke}=await ue.from("routines").select("id, name, description, cycle_length, is_system_default").eq("id",I.active_routine_id).single(),{data:xe}=await ue.from("routine_days").select("id, day_number, day_type, title, instructions, exercises").eq("routine_id",I.active_routine_id).order("day_number");fe={...ke,days:xe||[]},ke&&xe&&localStorage.setItem(re,JSON.stringify(fe))}let ve=[];if(C&&F){const{data:ke}=await ue.from("daily_plan_modifications").select("date, modified_data").eq("user_id",O).gte("date",C).lte("date",F);ve=ke||[]}return{...fe,startDate:I.cycle_start_date,modifications:ve}})();return u[P]={timestamp:V,promise:z},z}async function p(O,C,F){if(!O||!C)return;const{data:P,error:V}=await ue.from("daily_plan_modifications").upsert({user_id:O,date:C,modified_data:F,updated_at:new Date}).select("id, date").single();return P}async function m(O){if(!O)return t([]);const C=await o(O);if(!C)return t([]);const{data:F}=await ue.from("routine_days").select("day_number, day_type, title, instructions, exercises").eq("routine_id",C).order("day_number");return F&&F.length>0?t(F):t([])}async function g(O,C,F){if(console.log(`[DataModule] Saving update for Day ${C}...`),!O)return;let P=await o(O);const{data:V}=await ue.from("routines").select("is_system_default").eq("id",P).single();V?.is_system_default&&(P=await s(O,P));const{error:z}=await ue.from("routine_days").update({exercises:F.exercises,instructions:F.instructions}).eq("routine_id",P).eq("day_number",C);return await d(O)}async function v(O){if(!O)return;const{data:C}=await ue.from("routines").select("id").eq("is_system_default",!0).limit(1).single();if(C)return await ue.from("user_routine_status").update({active_routine_id:C.id}).eq("user_id",O),await m(O)}async function w(O,C,F,P){if(!O)return JSON.parse(localStorage.getItem(`training_logs_${C}`)||"{}");if(!P)return console.warn("[Sync] Skipping log sync: No target date provided."),JSON.parse(localStorage.getItem(`training_logs_${C}`)||"{}");const{data:V,error:z}=await ue.from("workout_logs").select("id, exercise_name, weight, reps, rpe, tempo, intensity, duration_minutes, logged_at, scheduled_for, day_key").eq("user_id",O).eq("scheduled_for",P).order("logged_at",{ascending:!0});if(z)return console.error("Sync Error:",z),{};if(console.log(`[Sync] Found ${V?.length} logs from DB for ${P}.`),!V||V.length===0)return{};const S={};return V.forEach(I=>{const re=I.exercise_name.toLowerCase().replace(/[^a-z0-9]/g,""),se=F.findIndex(fe=>{const ve=fe.exercise.toLowerCase().replace(/[^a-z0-9]/g,"");return ve===re||ve.includes(re)||re.includes(ve)});se!==-1?(S[se]||(S[se]=[]),S[se].push({id:I.id,weight:I.weight,reps:I.reps,rpe:I.rpe,tempo:I.tempo,intensity:I.intensity,duration_minutes:I.duration_minutes,timestamp:I.logged_at})):console.warn(`[Sync] Unmatched log: ${I.exercise_name}`)}),localStorage.setItem(`training_logs_${C}`,JSON.stringify(S)),S}async function _(O,C){if(!O)return null;console.log(`[Log] Saving for ${C.scheduledDate}`);const{data:F,error:P}=await ue.from("workout_logs").insert({user_id:O,exercise_name:C.exercise,weight:C.weight,reps:parseInt(C.reps,10),rpe:C.rpe?parseFloat(C.rpe):null,intensity:C.intensity?parseFloat(C.intensity):null,tempo:C.tempo,duration_minutes:C.duration?parseFloat(C.duration):null,day_key:C.dayKey,logged_at:C.timestamp,scheduled_for:C.scheduledDate}).select();return P?(console.error("Log Error:",P),null):F?F[0]:null}async function x(O){if(!O)return;const{error:C}=await ue.from("workout_logs").delete().eq("id",O);C&&console.error("Delete Error:",C)}async function j(O,C){if(!O||!C)return;const{data:F}=await ue.from("push_subscriptions").select("id").eq("user_id",O).eq("subscription->>endpoint",C.endpoint).single();if(F)await ue.from("push_subscriptions").update({last_used_at:new Date}).eq("id",F.id);else{const{error:P}=await ue.from("push_subscriptions").insert({user_id:O,subscription:C,user_agent:navigator.userAgent});P&&console.error("Push Sub Error:",P)}}async function R(O){if(!O)return[];const{data:C,error:F}=await ue.from("routines").select("id, name, description, cycle_length, is_system_default").or(`is_system_default.eq.true,owner_user_id.eq.${O}`).order("is_system_default",{ascending:!1});return C||[]}async function k(O,C,F=""){const{data:P,error:V}=await ue.from("routines").insert({name:C,description:F,owner_user_id:O,is_system_default:!1,cycle_length:7}).select().single();return P}async function T(O){await ue.from("routines").delete().eq("id",O).eq("is_system_default",!1)}async function B(O){const{data:C}=await ue.from("routines").select("id, name, description, cycle_length, is_system_default").eq("id",O).single();if(!C)return null;const{data:F}=await ue.from("routine_days").select("day_number, day_type, title, instructions, exercises").eq("routine_id",O).order("day_number",{ascending:!0});return{...C,days:F||[]}}async function M(O,C){await ue.from("routines").update({cycle_length:C.length}).eq("id",O);const F=C.map((V,z)=>({...V,day_number:z+1,routine_id:O}));await ue.from("routine_days").delete().eq("routine_id",O);const{error:P}=await ue.from("routine_days").insert(F);P&&console.error("Structure Update Error:",P)}async function D(O,C,F,P){await ue.from("user_routine_status").insert({user_id:O,active_routine_id:C,cycle_start_date:F||new Date().toISOString(),cycle_end_date:P||null,updated_at:new Date})}async function H(O,C,F,P,V,z={}){if(!O){const re=JSON.parse(localStorage.getItem("nutrition_plan_checkboxes")||"{}");re[C]=F,localStorage.setItem("nutrition_plan_checkboxes",JSON.stringify(re));return}const S=JSON.parse(localStorage.getItem("nutrition_plan_checkboxes")||"{}");S[C]=F,localStorage.setItem("nutrition_plan_checkboxes",JSON.stringify(S));const{error:I}=await ue.from("daily_checklist_logs").upsert({user_id:O,item_id:C,day_key:V,completed:F,scheduled_for:P,meta_data:z,updated_at:new Date},{onConflict:"user_id, item_id, scheduled_for"});I&&console.error("Checklist Save Error:",I)}async function K(O,C){if(!O||!C)return{};const F=Object.values(C).map(re=>re.fullDate);if(F.length===0)return{};const P=F.reduce((re,se)=>re<se?re:se),V=F.reduce((re,se)=>re>se?re:se),{data:z,error:S}=await ue.from("daily_checklist_logs").select("item_id, completed, scheduled_for, meta_data").eq("user_id",O).gte("scheduled_for",P).lte("scheduled_for",V);if(S)return console.error("Checklist Sync Error:",S),{};const I={};return z.forEach(re=>{re.completed&&(I[`${re.scheduled_for}_${re.item_id}`]=!0)}),I}async function W(O,C,F,P,V){if(!O||!C)return;const{error:z}=await ue.from("daily_exercise_status").upsert({user_id:O,date:C,day_key:F,exercise_index:P,is_completed:V,updated_at:new Date},{onConflict:"user_id, date, exercise_index"});z&&console.error("Ex Status Save Error:",z)}async function te(O,C){if(!O||!C)return[];const{data:F,error:P}=await ue.from("daily_exercise_status").select("exercise_index").eq("user_id",O).eq("date",C).eq("is_completed",!0);return P?(console.error("Ex Status Sync Error:",P),[]):F.map(V=>V.exercise_index)}async function de(O,C,F){O&&await ue.from("active_timers").upsert({user_id:O,timer_id:C,end_time:new Date(F).toISOString(),status:"running",updated_at:new Date})}async function ee(O){if(!O)return null;const{data:C,error:F}=await ue.from("profiles").select("full_name, age, weight, theme_preference, navigation_mode").eq("id",O).single();return F&&F.code!=="PGRST116"&&console.error("Get Profile Error:",F),C||{full_name:"",age:"",weight:"",theme_preference:"default",navigation_mode:"week"}}async function G(O,C){if(!O)return null;const{data:F,error:P}=await ue.from("profiles").upsert({id:O,...C,updated_at:new Date}).select("id").single();return P&&console.error("Save Profile Error:",P),F}async function ne(O,C,F){if(!O||!C||!F)return[];const{data:P,error:V}=await ue.from("daily_plan_modifications").select("date, modified_data").eq("user_id",O).gte("date",C).lte("date",F);return V&&console.error("Fetch Mods Error:",V),P||[]}async function q(O){if(!O)return[];const{data:C,error:F}=await ue.from("user_routine_status").select(`
                id,
                cycle_start_date,
                cycle_end_date,
                routines ( name, cycle_length )
            `).eq("user_id",O).order("cycle_start_date",{ascending:!0});return F&&console.error("History Fetch Error:",F),C||[]}async function X(O,C,F,P){if(!O)return;const{routineId:V,start:z,end:S}=F;if(C==="DELETE_EXISTING"){const I=P.map(re=>re.id);await ue.from("user_routine_status").delete().in("id",I)}else if(C==="OVERWRITE_OVERLAP")for(const I of P){const re=I.cycle_start_date,se=I.cycle_end_date;if(se){if(z<=re&&S>=se)await ue.from("user_routine_status").delete().eq("id",I.id);else if(z>re&&S<se)await ue.from("user_routine_status").update({cycle_end_date:new Date(new Date(z).getTime()-864e5).toISOString().split("T")[0]}).eq("id",I.id);else if(S>=re&&S<se){const fe=new Date(new Date(S).getTime()+864e5).toISOString().split("T")[0];await ue.from("user_routine_status").update({cycle_start_date:fe}).eq("id",I.id)}else if(z>re&&z<=se){const fe=new Date(new Date(z).getTime()-864e5).toISOString().split("T")[0];await ue.from("user_routine_status").update({cycle_end_date:fe}).eq("id",I.id)}}else{const fe=new Date(new Date(S).getTime()+864e5).toISOString().split("T")[0];await ue.from("user_routine_status").update({cycle_start_date:fe}).eq("id",I.id)}}else if(C==="PUSH_EXISTING")for(const I of P){const re=I.cycle_end_date?new Date(I.cycle_end_date)-new Date(I.cycle_start_date):0,se=new Date(new Date(S).getTime()+864e5),fe=I.cycle_end_date?new Date(se.getTime()+re):null;await ue.from("user_routine_status").update({cycle_start_date:se.toISOString().split("T")[0],cycle_end_date:fe?fe.toISOString().split("T")[0]:null}).eq("id",I.id)}await D(O,V,z,S)}return{getDaysMap:()=>mf,getDefaultPlan:()=>pf,loadPlan:m,syncLogsForDay:w,updateSection:async(O,C,F,P)=>F==="training"?await g(O,C,P):null,revertToDefault:v,getTrainingLogs:O=>JSON.parse(localStorage.getItem(`training_logs_${O}`)||"{}"),saveTrainingLogs:(O,C)=>localStorage.setItem(`training_logs_${O}`,JSON.stringify(C)),getTrainingState:O=>JSON.parse(localStorage.getItem(`training_state_${O}`)||"[]"),saveTrainingState:(O,C)=>localStorage.setItem(`training_state_${O}`,JSON.stringify(C)),getCheckboxState:O=>JSON.parse(localStorage.getItem("nutrition_plan_checkboxes")||"{}")[O]||!1,saveCheckboxState:H,syncChecklistLogs:K,updateActiveTimer:de,getProfile:ee,saveProfile:G,saveDailyModification:p,fetchModifications:ne,fetchRoutineHistory:q,resolveRoutineConflict:X,resetCheckboxes:(O,C)=>{if(C==="training")localStorage.removeItem(`training_state_${O}`);else{const F=JSON.parse(localStorage.getItem("nutrition_plan_checkboxes")||"{}"),P=`${O}-${C.slice(0,4)}`;Object.keys(F).forEach(V=>{V.startsWith(P)&&delete F[V]}),localStorage.setItem("nutrition_plan_checkboxes",JSON.stringify(F))}},addLog:_,deleteLog:x,cleanHtml:n,searchExercises:async O=>{if(!O||O.length<2)return[];const{data:C,error:F}=await ue.from("exercise_library").select("*").ilike("name",`%${O}%`).limit(5);return F?(console.error("Search Error:",F),[]):C||[]},savePushSubscription:j,listRoutines:R,createRoutine:k,deleteRoutine:T,activateRoutine:D,getActiveRoutineId:o,getRoutineDetails:B,updateRoutineStructure:M,loadRawRoutine:d,saveExerciseStatus:W,syncExerciseStatus:te}})(),kv=()=>{const[n,t]=A.useState(null),[s,i]=A.useState(null),[o,u]=A.useState(!0),d=async m=>{const g=await we.getProfile(m);i(g)};return A.useEffect(()=>{ue.auth.getSession().then(({data:{session:g}})=>{t(g),g?d(g.user.id).finally(()=>u(!1)):u(!1)});const{data:{subscription:m}}=ue.auth.onAuthStateChange((g,v)=>{t(v),v&&d(v.user.id)});return()=>m.unsubscribe()},[]),{session:n,profile:s,loading:o,logout:async()=>{await ue.auth.signOut(),sessionStorage.removeItem("mp_is_temp_online"),localStorage.setItem("mp_use_mock_db","true"),t(null),i(null),window.location.reload()},refreshProfile:d,setLoading:u}},Sv=()=>{const[n,t]=A.useState(()=>{const s=localStorage.getItem("mp_timer_state");return s?JSON.parse(s):{isActive:!1,endTime:null,duration:60}});return A.useEffect(()=>{localStorage.setItem("mp_timer_state",JSON.stringify(n)),n.isActive&&n.endTime&&Date.now()>n.endTime+5e3&&t(s=>({...s,isActive:!1,endTime:null}))},[n]),{timerState:n,setTimerState:t}},jv=(n,t)=>{const[s,i]=A.useState({});return A.useEffect(()=>{if(n?.user?.id&&Object.keys(t).length>0)we.syncChecklistLogs(n.user.id,t).then(u=>{const d=JSON.parse(localStorage.getItem("nutrition_plan_checkboxes")||"{}");i({...d,...u})});else{const u=JSON.parse(localStorage.getItem("nutrition_plan_checkboxes")||"{}");i(u)}},[n,t]),{checklistState:s,toggleChecklist:(u,d,p,m={})=>{const g=t[p]?.fullDate;if(!g)return;const v=`${g}_${u}`,w={...s,[v]:d};i(w);const _=JSON.parse(localStorage.getItem("nutrition_plan_checkboxes")||"{}");_[v]=d,localStorage.setItem("nutrition_plan_checkboxes",JSON.stringify(_)),we.saveCheckboxState(n?.user?.id,u,d,g,p,m)}}},hu=n=>{const t=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${t}-${s}-${i}`},gf=n=>{const t=new Date(n),s=t.getDay(),i=t.getDate()-s+(s===0?-6:1);return new Date(t.setDate(i))},Ev=(n,t)=>{const[s,i]=A.useState(null),[o,u]=A.useState(()=>{const G=new Date,ne=["mon","tue","wed","thu","fri","sat","sun"],q=G.getDay()===0?6:G.getDay()-1;return ne[q]}),[d,p]=A.useState(!1),[m,g]=A.useState(0),[v,w]=A.useState({}),[_,x]=A.useState({}),[j,R]=A.useState(1),[k,T]=A.useState(2026),B=()=>g(G=>G+1),M=()=>g(G=>G-1),D=()=>{g(0);const G=new Date,ne=["mon","tue","wed","thu","fri","sat","sun"],q=G.getDay()===0?6:G.getDay()-1;u(ne[q])},H=A.useRef(""),K=async(G,ne,q,X=!1)=>{const O=`${G}-${ne}-${q}`;if(O===H.current)return;H.current=O,X||t(!0);const C=await we.loadRawRoutine(G,ne,q);if(i(C||{days:[]}),C?.modifications){const F={};C.modifications.forEach(P=>{F[P.date]=P.modified_data}),x(P=>({...P,...F}))}X||t(!1)},W=A.useCallback(G=>{const ne=new Date,q=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate()+G*7),X=gf(q),O=["mon","tue","wed","thu","fri","sat","sun"],C={};return O.forEach((F,P)=>{const V=new Date(X);V.setDate(X.getDate()+P);let z=null,S=0;if(s&&s.startDate&&s.days.length>0){const I=new Date(s.startDate),re=new Date(V.getFullYear(),V.getMonth(),V.getDate()),se=new Date(I.getFullYear(),I.getMonth(),I.getDate()),fe=re-se,ve=Math.floor(fe/(1e3*60*60*24));if(ve>=0){const ke=s.days.length;S=ve%ke;const xe=s.days[S];z=xe?xe.title||`Day ${xe.day_number}`:`Day ${S+1}`}}C[F]={dateObj:V,label:V.toLocaleDateString("en-US",{month:"short",day:"2-digit"}),fullDate:hu(V),cycleLabel:z,cycleDayIndex:S}}),C},[s]);A.useEffect(()=>{const G=W(m),ne=G.mon.dateObj,q=new Date(ne);q.setHours(0,0,0,0),q.setDate(q.getDate()+3-(q.getDay()+6)%7);const X=new Date(q.getFullYear(),0,4),O=1+Math.round(((q.getTime()-X.getTime())/864e5-3+(X.getDay()+6)%7)/7);if(R(O),T(ne.getFullYear()),w(C=>JSON.stringify(C)===JSON.stringify(G)?C:G),m===0&&!o){const C=new Date,F=["mon","tue","wed","thu","fri","sat","sun"],P=C.getDay()===0?6:C.getDay()-1;u(F[P])}},[m,s,W,o]),A.useEffect(()=>{if(n?.user?.id){const G=new Date,ne=new Date(G.getFullYear(),G.getMonth(),G.getDate()+m*7),q=gf(ne),X=new Date(q);X.setDate(q.getDate()+6);const O=hu(q),C=hu(X);K(n.user.id,O,C,!0)}},[m,n?.user?.id]);const te=A.useCallback((G,ne)=>{if(!G[ne]||!s||!s.days)return null;const q=G[ne].fullDate,{cycleDayIndex:X}=G[ne];if(X===void 0||X<0)return null;const O=s.days[X];if(!O)return null;let C={meal_plan:[],notes:"No Plan"},F={stack:[],notes:"No Stack"};const P=we.getDefaultPlan(),z=["mon","tue","wed","thu","fri","sat","sun"][X%7];P[z]&&(C=P[z].nutrition,F=P[z].supplements);const S={training:{title:we.cleanHtml(O.title),day_type:O.day_type,instructions:we.cleanHtml(O.instructions),exercises:(O.exercises||[]).map(I=>({...I,focus:we.cleanHtml(I.focus),type:I.type||"Resistance"}))},nutrition:C,supplements:F};return _[q]&&_[q].training&&(S.training={...S.training,..._[q].training}),S},[s,_]),de=A.useCallback(G=>te(v,G),[v,te]),ee=A.useCallback(async(G,ne,q)=>{if(!n)return;const X=v[G]?.fullDate;if(!X)return;const C={..._[X]||{},[ne]:q};x(F=>({...F,[X]:C})),await we.saveDailyModification(n.user.id,X,C)},[n,v,_]);return{planData:s,currentDay:o,setCurrentDay:u,isEditMode:d,setIsEditMode:p,toggleEditMode:()=>p(!d),weekOffset:m,weekDates:v,weekNumber:j,year:k,nextWeek:B,prevWeek:M,resetToToday:D,getResolvedDayData:de,updateSection:ee,updateTraining:(G,ne)=>ee(G,"training",ne),getWeekMap:W,resolveDayData:te,setWeekOffset:g}},Zf=A.createContext(),ep=({children:n})=>{const t=kv(),s=Sv(),i=Ev(t.session,t.setLoading),o=jv(t.session,i.weekDates),u=Ut.useCallback(async g=>{if(!t.session?.user?.id)return null;const v=i.weekDates[g.dayKey]?.fullDate,w=await we.addLog(t.session.user.id,{...g,dayKey:g.dayKey,scheduledDate:v}),_=we.getTrainingLogs(g.dayKey),x=g.exerciseIndex;return _[x]||(_[x]=[]),_[x].push(w||g),we.saveTrainingLogs(g.dayKey,_),w},[t.session?.user?.id,i.weekDates]),d=Ut.useCallback(async(g,v,w)=>{g&&await we.deleteLog(g);const _=we.getTrainingLogs(i.currentDay);_[v]&&(_[v].splice(w,1),we.saveTrainingLogs(i.currentDay,_))},[i.currentDay]),p=Ut.useCallback(async()=>{t.session&&(t.setLoading(!0),await we.revertToDefault(t.session.user.id),window.location.reload())},[t.session,t.setLoading]),m=Ut.useMemo(()=>({...t,...i,...s,...o,logExerciseSet:u,deleteExerciseSet:d,revertPlan:p,daysMap:we.getDaysMap()}),[t,i,s,o,u,d,p]);return c.jsx(Zf.Provider,{value:m,children:n})},gt=()=>A.useContext(Zf);var Tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Cv=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),be=(n,t)=>{const s=A.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:p="",children:m,...g},v)=>A.createElement("svg",{ref:v,...Tv,width:o,height:o,stroke:i,strokeWidth:d?Number(u)*24/Number(o):u,className:["lucide",`lucide-${Cv(n)}`,p].join(" "),...g},[...t.map(([w,_])=>A.createElement(w,_)),...Array.isArray(m)?m:[m]]));return s.displayName=`${n}`,s};const tp=be("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const rp=be("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const np=be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Nv=be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const Rv=be("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);const Ov=be("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);const Dv=be("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Pv=be("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const vi=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Qu=be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Xu=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Av=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Iv=be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Lv=be("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);const _i=be("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const Mv=be("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);const $v=be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const sp=be("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const Uv=be("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const zv=be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Bv=be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Fv=be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Wv=be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Vv=be("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const qv=be("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Hv=be("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Kv=be("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const Za=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const ip=be("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);const ap=be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const op=be("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Gv=be("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Jv=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Yv=be("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const Qv=be("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const ki=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Xv=be("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);const Zv=be("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const lp=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const eo=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),e1=({setActiveApp:n})=>{const{session:t,logout:s,profile:i}=gt(),o=[{id:"regimen_standalone",title:"Regimen Pro",desc:"Standalone gym tracker. Fully optimized for mobile logs and cloud sync.",icon:c.jsx(tp,{size:28}),badge:"Stable",accent:"#f29b11",onClick:()=>window.location.href="/regimen.html"},{id:"regimen_react",title:"Regimen Pro (React)",desc:"Next-gen engine. Block-based circuits and real-time analytics.",icon:c.jsx(Zv,{size:28}),badge:"Alpha",accent:"#f29b11",onClick:()=>n("regimen")},{id:"bp",title:"Health Tracker",desc:"Log and monitor blood pressure, heart rate, and health metrics.",icon:c.jsx(Mv,{size:28}),badge:"New",accent:"#ef4444"},{id:"legacy",title:"Legacy Tracker",desc:"Access original dashboard tools and historical planning data.",icon:c.jsx(sp,{size:28}),badge:"Stable",accent:"#666",onClick:()=>n("legacy")}];return c.jsxs("div",{className:"hub-root",children:[c.jsx("div",{className:"hub-glow-orange"}),c.jsx("div",{className:"hub-glow-blue"}),c.jsxs("div",{className:"max-w-xl mx-auto",children:[c.jsxs("header",{className:"hub-header",children:[c.jsxs("h1",{className:"hub-title",children:["MASTER ",c.jsx("span",{children:"PLAN"})]}),c.jsxs("div",{className:"hub-status-badge",children:[c.jsx("div",{className:"hub-status-pulse"}),c.jsxs("span",{style:{fontSize:"10px",fontWeight:"900",color:"#555",textTransform:"uppercase",letterSpacing:"2px"},children:[i?.full_name||t?.user?.email.split("@")[0]," System Active"]})]})]}),c.jsx("div",{className:"hub-card-grid",children:o.map(u=>c.jsxs("button",{onClick:u.onClick?u.onClick:()=>n(u.id),className:"hub-card",children:[c.jsx("div",{className:"hub-card-icon",style:{color:u.accent},children:u.icon}),c.jsxs("div",{style:{flex:1},children:[c.jsxs("div",{className:"hub-card-title",children:[u.title,c.jsx("span",{className:"hub-card-badge",children:u.badge})]}),c.jsx("p",{className:"hub-card-desc",children:u.desc})]}),c.jsx(Xu,{size:20,color:"#333"})]},u.id))}),c.jsxs("footer",{className:"hub-footer",children:[c.jsx("button",{onClick:s,className:"hub-signout-btn",children:"Terminate Session"}),c.jsx("p",{style:{fontSize:"9px",fontWeight:"900",color:"#333",marginTop:"30px",textTransform:"uppercase",letterSpacing:"4px"},children:"Arch v2.0  Build Stable"})]})]})]})},t1=()=>{const[n,t]=A.useState(!1),[s,i]=A.useState(""),[o,u]=A.useState(""),[d,p]=A.useState(!1),[m,g]=A.useState(""),v=async w=>{w.preventDefault(),t(!0),g("");let _;d?_=await ue.auth.signUp({email:s,password:o}):_=await ue.auth.signInWithPassword({email:s,password:o});const{error:x,data:j}=_;x?g(`Error: ${x.message}`):d&&!j.session&&g("Check your email to confirm your account!"),t(!1)};return c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",children:[c.jsx("h1",{className:"auth-title",children:"Master Plan"}),c.jsx("p",{className:"auth-subtitle",children:d?"Create your account":"Welcome back, athlete"}),c.jsxs("form",{onSubmit:v,className:"auth-form",children:[c.jsx("input",{className:"auth-input",type:"email",placeholder:"Email address",value:s,onChange:w=>i(w.target.value),required:!0}),c.jsx("input",{className:"auth-input",type:"password",placeholder:"Password",value:o,onChange:w=>u(w.target.value),required:!0,minLength:6}),c.jsx("button",{className:"auth-button",disabled:n,children:n?"Processing...":d?"Sign Up":"Sign In"})]}),m&&c.jsx("div",{className:"auth-message",children:m}),c.jsxs("div",{className:"auth-footer",children:[d?"Already have an account?":"Don't have an account?",c.jsx("button",{onClick:()=>{p(!d),g("")},className:"auth-link",children:d?"Sign In":"Create One"})]})]})})},r1=n=>{const{session:t,timerState:s,setTimerState:i}=gt(),[o,u]=A.useState(n||60),d=A.useRef(null);A.useEffect(()=>{if(s.isActive&&s.endTime){const v=Math.ceil((s.endTime-Date.now())/1e3);v>0&&u(v)}else s.duration&&u(s.duration)},[s.isActive,s.endTime,s.duration]);const p=A.useCallback(()=>{d.current||(d.current=new(window.AudioContext||window.webkitAudioContext));const v=d.current;v.state==="suspended"&&v.resume();const w=v.currentTime,_=v.createOscillator(),x=v.createGain();_.connect(x),x.connect(v.destination),_.type="square",_.frequency.setValueAtTime(3200,w),x.gain.setValueAtTime(.5,w),x.gain.linearRampToValueAtTime(.5,w+.45),x.gain.exponentialRampToValueAtTime(.001,w+.5),_.start(w),_.stop(w+.5)},[]);A.useEffect(()=>{let v=null;return s.isActive&&s.endTime&&(v=setInterval(()=>{const w=s.endTime-Date.now(),_=Math.ceil(w/1e3);_<=0?(i(x=>({...x,isActive:!1,endTime:null})),u(0),Math.abs(w)<5e3&&p()):u(_)},200)),()=>clearInterval(v)},[s.isActive,s.endTime,p,i]);const m=A.useCallback(async()=>{if(s.isActive)i(v=>({...v,isActive:!1,endTime:null,timerId:null}));else{const v=o>0?o:n,w=Date.now()+v*1e3,_=crypto.randomUUID();if(i({isActive:!0,endTime:w,duration:v,timerId:_}),d.current||(d.current=new(window.AudioContext||window.webkitAudioContext)),d.current.state==="suspended"&&d.current.resume(),"wakeLock"in navigator&&navigator.wakeLock.request("screen").catch(()=>{}),t?.user?.id){const x=localStorage.getItem("current_push_endpoint");await we.updateActiveTimer(t.user.id,_,w),ue.functions.invoke("timer-notify",{body:{duration:v,userId:t.user.id,timerId:_,targetEndpoint:x}})}}},[s.isActive,o,n,t,i]),g=A.useCallback(async v=>{if(s.isActive){const w=Date.now(),_=Math.ceil((s.endTime-w)/1e3);if(v>0&&_>=180)return;const x=s.endTime+v*1e3,j=crypto.randomUUID(),R=Math.ceil((x-w)/1e3);if(i(k=>({...k,endTime:x,timerId:j})),u(k=>Math.min(180,Math.max(0,k+v))),t?.user?.id&&R>0&&R<=180){const k=localStorage.getItem("current_push_endpoint");await we.updateActiveTimer(t.user.id,j,x),ue.functions.invoke("timer-notify",{body:{duration:R,userId:t.user.id,timerId:j,targetEndpoint:k}})}}else{const w=Math.min(180,Math.max(0,o+v));u(w),i(_=>({..._,duration:w}))}},[s.isActive,s.endTime,o,t,i]);return{timeLeft:o,isActive:s.isActive,toggleTimer:m,adjustTime:g}},up=({defaultTime:n})=>{const{timeLeft:t,isActive:s,toggleTimer:i,adjustTime:o}=r1(n),u=d=>{const p=Math.floor(d/60).toString().padStart(2,"0"),m=(d%60).toString().padStart(2,"0");return`${p}:${m}`};return!n&&!s?null:c.jsx("div",{className:"timer-bar visible",children:c.jsxs("div",{className:"timer-container",children:[c.jsx("button",{onClick:()=>o(-15),className:"timer-icon-btn",children:c.jsx(Wv,{size:20})}),c.jsx("div",{className:"timer-display-text",children:u(t)}),c.jsx("button",{onClick:()=>o(15),className:"timer-icon-btn",children:c.jsx(Za,{size:20})}),c.jsx("button",{onClick:i,className:`timer-toggle-action ${s?"stop":"start"}`,children:s?c.jsx(Qv,{size:18,fill:"currentColor"}):c.jsx(Kv,{size:18,fill:"currentColor"})})]})})},n1=(n,t)=>{const{session:s,weekDates:i,logExerciseSet:o,deleteExerciseSet:u}=gt(),[d,p]=A.useState({}),[m,g]=A.useState({}),v=A.useRef({}),w=A.useRef({});A.useEffect(()=>{(async()=>{const T=i[n]?.fullDate;if(T)if(v.current[T])p(v.current[T]),w.current[T]&&g(w.current[T]);else if(s?.user?.id&&t){const B=await we.syncLogsForDay(s.user.id,n,t,T);v.current[T]=B,p(B);const M=await we.syncExerciseStatus(s.user.id,T),D={};M.forEach(te=>D[te]=!0);const H=JSON.parse(localStorage.getItem(`training_state_${n}`)||"[]"),K={};H.forEach(te=>K[te]=!0);const W={...K,...D};w.current[T]=W,g(W)}else{const B=JSON.parse(localStorage.getItem(`training_logs_${n}`)||"{}");p(B);const M=JSON.parse(localStorage.getItem(`training_state_${n}`)||"[]"),D={};M.forEach(H=>D[H]=!0),g(D)}})()},[n,t,s,i]);const _=A.useCallback(k=>{const T=i[n]?.fullDate;g(B=>{const M=!B[k],D=JSON.parse(localStorage.getItem(`training_state_${n}`)||"[]");let H;M?D.includes(k)?H=D:H=[...D,k]:H=D.filter(W=>W!==k),localStorage.setItem(`training_state_${n}`,JSON.stringify(H)),s?.user?.id&&T&&we.saveExerciseStatus(s.user.id,T,n,k,M);const K={...B,[k]:M};return T&&(w.current[T]=K),K})},[n,s,i]),x=A.useCallback(async(k,T,B,M,D,H,K,W,te,de)=>{const ee=i[n]?.fullDate||new Date().toISOString().split("T")[0],G={exerciseIndex:k,exercise:D,weight:T,reps:B,rpe:M,tempo:W,duration:te,intensity:de,timestamp:new Date().toISOString(),dayKey:n,scheduledDate:ee},ne=await o(G);p(q=>{const X={...q};return X[k]||(X[k]=[]),X[k].push(ne||G),ee&&(v.current[ee]=X),K.sets>0&&X[k].length>=K.sets&&setTimeout(()=>_(k),0),X})},[n,i,o,_]),j=A.useCallback(async(k,T,B)=>{await u(B,k,T),p(M=>{const D={...M};D[k]&&D[k].splice(T,1);const H=i[n]?.fullDate;return H&&(v.current[H]=D),D})},[u,n,i]),R=A.useCallback((k,T,B)=>{p(M=>{const D={...M};if(D[k]&&D[k][T]){D[k][T]={...D[k][T],...B},localStorage.setItem(`training_logs_${n}`,JSON.stringify(D));const H=i[n]?.fullDate;H&&(v.current[H]=D)}return D})},[n,i]);return{dayLogs:d,checkedState:m,addSet:x,removeSet:j,updateSet:R,toggleExerciseCheck:_}},s1=({onLog:n,defaultWeight:t,defaultReps:s,defaultRpe:i,type:o="Resistance"})=>{const[u,d]=A.useState(""),[p,m]=A.useState(""),[g,v]=A.useState(""),[w,_]=A.useState(""),[x,j]=A.useState(""),R=()=>{const T=u||t||(o==="Cardio"?"-":"BW"),B=p||s||(o==="Cardio"?"1":"0"),M=g;n(T,B,k?null:M||i||"-",w,x,k?M||"-":null),d(""),m(""),v(""),_(""),j("")},k=o==="Cardio";return c.jsx("div",{className:"set-logger",children:c.jsxs("div",{className:"set-inputs",children:[!k&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",placeholder:"Kg",className:"set-input",value:u,onChange:T=>d(T.target.value),style:{width:"20%"}}),c.jsx("input",{type:"number",placeholder:"Reps",className:"set-input",value:p,onChange:T=>m(T.target.value),style:{width:"20%"}})]}),k&&c.jsx("input",{type:"number",placeholder:"Mins",className:"set-input",value:x,onChange:T=>j(T.target.value),style:{width:"40%"}}),c.jsx("input",{type:"number",placeholder:k?"Int %":"RPE",className:"set-input",value:g,onChange:T=>v(T.target.value),style:{width:"20%"}}),!k&&c.jsx("input",{type:"text",placeholder:"Tempo",className:"set-input",value:w,onChange:T=>_(T.target.value),style:{width:"20%"}}),c.jsx("button",{onClick:R,style:{width:"20%"},children:"LOG"})]})})},i1=({value:n,onChange:t,onSelect:s})=>{const[i,o]=A.useState([]),[u,d]=A.useState(!1);return Ut.useEffect(()=>{const m=setTimeout(async()=>{if(n.length>1){const g=await we.searchExercises(n);o(g),d(!0)}else o([]),d(!1)},300);return()=>clearTimeout(m)},[n]),c.jsxs("div",{style:{position:"relative",width:"100%"},children:[c.jsx("input",{className:"edit-input-title",value:n,onChange:p=>t(p.target.value),onBlur:()=>setTimeout(()=>d(!1),200),onFocus:()=>n.length>1&&d(!0),placeholder:"Search exercise library..."}),u&&i.length>0&&c.jsx("div",{className:"autocomplete-dropdown",children:i.map(p=>c.jsxs("div",{className:"suggestion-item",onClick:()=>{s(p),d(!1)},children:[c.jsx("div",{style:{fontWeight:"bold"},children:p.name}),c.jsx("div",{style:{fontSize:"0.7rem",opacity:.6},children:p.type})]},p.id))})]})},a1=({text:n,className:t})=>{if(!n)return null;const s=n.split(`
`).filter(i=>i.trim()!=="");return s.length===0?null:c.jsx("div",{className:t,children:c.jsx("ul",{children:s.map((i,o)=>c.jsx("li",{children:i},o))})})},o1=({ex:n,idx:t,isEditMode:s,isCompleted:i,logs:o,onToggleCheck:u,onUpdateField:d,onDeleteExercise:p,onDragStart:m,onDragOver:g,onDrop:v,onLogSet:w,onDeleteSet:_,onUpdateSet:x})=>{const[j,R]=A.useState(null),T=(W=>{const te={sets:0,reps:"",rpe:""};if(!W)return te;const de=W.match(/(\d+)\s*x/);de&&(te.sets=parseInt(de[1]));const ee=W.match(/x\s*([\d\-\w]+)/);ee&&(te.reps=ee[1]);const G=W.match(/@\s*([\d\-\.]+)/);return G&&(te.rpe=G[1]),te})(n.config),B=n.type==="Resistance",M=n.type==="Cardio",D=W=>W?W.toString().replace("kg","").replace("KG","").replace("BW",""):"-",H=W=>{d(t,"exercise",W.name),d(t,"type",W.type);const te=W.default_config||{};d(t,"config",W.default_config?`${te.sets||3} x ${te.reps||10} @ ${te.rpe||8} RPE`:""),d(t,"focus",W.instructions||"")},K=W=>{x(t,W,j),R(null)};return c.jsxs("div",{className:`card training-${n.type||"Resistance"} ${i&&!s?"completed":""}`,draggable:s,onDragStart:W=>m(W,t),onDragOver:g,onDrop:W=>v(W,t),children:[c.jsxs("div",{className:"card-content",children:[c.jsxs("div",{className:"card-title",children:[!s&&c.jsx("input",{type:"checkbox",className:"exercise-check",checked:!!i,onChange:()=>u(t)}),s&&c.jsx(_i,{className:"text-gray-500 cursor-grab",size:20}),c.jsx("div",{style:{flexGrow:1},children:s?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx(i1,{value:n.exercise,onChange:W=>d(t,"exercise",W),onSelect:H}),c.jsxs("select",{className:"edit-input-config",style:{width:"auto",fontSize:"0.7rem",padding:"2px"},value:n.type,onChange:W=>d(t,"type",W.target.value),children:[c.jsx("option",{value:"Resistance",children:"Resistance"}),c.jsx("option",{value:"Cardio",children:"Cardio"}),c.jsx("option",{value:"Rest",children:"Rest"})]})]}):c.jsxs("span",{children:[t+1,". ",n.exercise]})})]}),c.jsx("div",{className:"mb-2",children:s?c.jsx("input",{className:"edit-input-config",value:n.config,onChange:W=>d(t,"config",W.target.value)}):T.sets>0?c.jsxs("div",{className:"card-config",style:{gap:"10px"},children:[c.jsxs("div",{children:[c.jsx("span",{className:"set-label",children:"SETS:"}),c.jsx("span",{className:"set-value",children:T.sets})]}),c.jsxs("div",{children:[c.jsx("span",{className:"set-label",children:"REPS:"}),c.jsx("span",{className:"set-value",children:T.reps})]}),T.rpe&&c.jsxs("div",{children:[c.jsx("span",{className:"set-label",children:M?"INT:":"RPE:"}),c.jsxs("span",{className:"set-value",children:[T.rpe,M?"%":""]})]})]}):c.jsx("div",{className:"card-config",children:n.config})}),(n.focus||s)&&c.jsx("div",{className:"mb-2",children:s?c.jsx("textarea",{className:"edit-input-focus",value:n.focus,onChange:W=>d(t,"focus",W.target.value)}):c.jsx(a1,{text:n.focus,className:"card-focus"})}),!s&&(B||M)&&c.jsxs("div",{className:"set-module",children:[c.jsx(s1,{type:n.type,defaultWeight:"",defaultReps:T.reps,defaultRpe:T.rpe,onLog:(W,te,de,ee,G,ne)=>w(t,W,te,de,n.exercise,n.focus,T,ee,G,ne)}),o.length>0&&c.jsx("div",{className:"set-history",children:o.map((W,te)=>{const de=j?.sIdx===te;return c.jsx("div",{className:"set-row",children:de?c.jsxs("div",{className:"inline-edit-group",children:[!M&&c.jsx("input",{type:"text",className:"inline-input-mini",value:j.weight,onChange:ee=>R({...j,weight:ee.target.value})}),!M&&c.jsx("input",{type:"number",className:"inline-input-mini",value:j.reps,onChange:ee=>R({...j,reps:ee.target.value})}),M&&c.jsx("input",{type:"number",className:"inline-input-mini",value:j.duration_minutes,onChange:ee=>R({...j,duration_minutes:ee.target.value}),placeholder:"Min"}),c.jsx("input",{type:"number",className:"inline-input-mini",value:M?j.intensity||j.rpe||"":j.rpe||"",onChange:ee=>R({...j,[M?"intensity":"rpe"]:ee.target.value})}),!M&&c.jsx("input",{type:"text",className:"inline-input-mini",value:j.tempo||"",onChange:ee=>R({...j,tempo:ee.target.value}),placeholder:"Tempo"}),c.jsx("button",{onClick:()=>K(te),className:"icon-btn save",children:c.jsx(vi,{size:18})}),c.jsx("button",{onClick:()=>R(null),className:"icon-btn delete",children:c.jsx(eo,{size:18})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"set-index",children:[te+1,"."]}),c.jsxs("div",{className:"set-data-text",children:[M?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"set-label",children:"MINS:"}),c.jsx("span",{className:"set-value",children:W.duration_minutes})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"set-label",children:"KG:"}),c.jsx("span",{className:"set-value",children:D(W.weight)}),c.jsx("span",{className:"set-label",children:"REPS:"}),c.jsx("span",{className:"set-value",children:W.reps})]}),c.jsx("span",{className:"set-label",children:M?"INT:":"RPE:"}),c.jsx("span",{className:"set-value",children:M?(W.intensity||W.rpe)+"%":W.rpe}),W.tempo&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"set-label",children:"T:"}),c.jsx("span",{className:"set-value",children:W.tempo})]})]}),c.jsxs("div",{className:"set-actions",children:[c.jsx("button",{onClick:()=>R({sIdx:te,weight:W.weight,reps:W.reps,rpe:W.rpe,intensity:W.intensity,duration_minutes:W.duration_minutes,tempo:W.tempo}),className:"icon-btn edit",children:c.jsx(Hv,{size:14})}),c.jsx("button",{onClick:()=>_(t,te,W.id),className:"icon-btn delete",children:c.jsx(ki,{size:14})})]})]})},te)})})]})]}),s&&c.jsx("button",{onClick:()=>p(t),className:"exercise-delete-btn",children:c.jsx(eo,{size:20})})]})},l1=({text:n,className:t})=>{if(!n)return null;const s=n.split(`
`).filter(i=>i.trim()!=="");return s.length===0?null:c.jsx("div",{className:t,children:c.jsx("ul",{children:s.map((i,o)=>c.jsx("li",{children:i},o))})})},u1=({data:n,dayKey:t})=>{const{isEditMode:s,toggleEditMode:i,updateSection:o,revertPlan:u,weekDates:d}=gt(),{dayLogs:p,checkedState:m,addSet:g,removeSet:v,updateSet:w,toggleExerciseCheck:_}=n1(t,n.exercises),[x,j]=A.useState(null);A.useEffect(()=>{j(s?JSON.parse(JSON.stringify(n)):null)},[s,n]);const R=s&&x?x:n,k=A.useMemo(()=>{const q=we.getDefaultPlan()[t]?.training;if(!q||q.title!==n.title)return!1;const X=JSON.stringify({exercises:n.exercises.map(C=>({exercise:C.exercise,config:C.config,focus:C.focus,type:C.type})),instructions:n.instructions}),O=JSON.stringify({exercises:q.exercises.map(C=>({exercise:C.exercise,config:C.config,focus:we.cleanHtml(C.focus),type:C.type})),instructions:we.cleanHtml(q.instructions)});return X!==O},[n,t]),T=()=>{o(t,"training",x),i()},B=()=>{i()},M=q=>j(q),D=(q,X)=>{q.dataTransfer.setData("text/plain",X)},H=q=>q.preventDefault(),K=(q,X)=>{const O=parseInt(q.dataTransfer.getData("text/plain"));if(O===X)return;const C=[...x.exercises],[F]=C.splice(O,1);C.splice(X,0,F),M({...x,exercises:C})},W=()=>{M({...x,exercises:[...x.exercises,{exercise:"",config:"",focus:"",type:"Resistance"}]})},te=q=>{confirm("Delete?")&&M({...x,exercises:x.exercises.filter((X,O)=>O!==q)})},de=(q,X,O)=>{const C=[...x.exercises];C[q][X]=O,M({...x,exercises:C})},ee=R.exercises.map((q,X)=>({...q,originalIndex:X})).sort((q,X)=>s?q.originalIndex-X.originalIndex:(m[q.originalIndex]?1:0)-(m[X.originalIndex]?1:0)),G=()=>{confirm("Revert to System Default?")&&u()},ne=()=>{const q={date:d[t]?.fullDate||new Date().toISOString().split("T")[0],trainingTitle:n.title,exercises:n.exercises.map((C,F)=>({name:C.exercise,type:C.type,config:C.config,loggedSets:p[F]||[]}))},X="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(q,null,2)),O=document.createElement("a");O.setAttribute("href",X),O.setAttribute("download",`workout_${t}_${q.date}.json`),document.body.appendChild(O),O.click(),O.remove()};return c.jsxs("div",{className:"pb-24",children:[c.jsxs("h2",{className:"section-title px-4 pt-4",children:[R.title,c.jsxs("span",{className:"header-actions",children:[!s&&c.jsxs("button",{onClick:ne,className:"action-btn export-btn",children:[c.jsx(Iv,{size:12})," Exp"]}),s?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:B,className:"action-btn",children:"Cancel"}),c.jsx("button",{onClick:T,className:"action-btn edit-toggle-btn active-edit",children:"Save"})]}):c.jsx("button",{onClick:i,className:"action-btn edit-toggle-btn",children:"Edit"}),s&&k&&c.jsx("button",{onClick:G,className:"action-btn default-btn",children:"Default"})]})]}),s?c.jsxs("div",{className:"mx-4 mb-4 flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Type:"}),c.jsxs("select",{className:"edit-input-config",style:{width:"auto"},value:R.day_type,onChange:q=>M({...R,day_type:q.target.value}),children:[c.jsx("option",{value:"Resistance",children:"Resistance"}),c.jsx("option",{value:"Cardio",children:"Cardio"}),c.jsx("option",{value:"Rest",children:"Rest"})]})]}),c.jsx("textarea",{className:"edit-input-focus",style:{minHeight:"80px"},placeholder:"Day Instructions...",value:R.instructions,onChange:q=>M({...R,instructions:q.target.value})})]}):c.jsx(l1,{text:R.instructions,className:"instructions mx-4"}),c.jsx("div",{className:"px-4",children:ee.map(q=>c.jsx(o1,{ex:q,idx:q.originalIndex,isEditMode:s,isCompleted:m[q.originalIndex],logs:p[q.originalIndex]||[],onToggleCheck:_,onUpdateField:de,onDeleteExercise:te,onDragStart:D,onDragOver:H,onDrop:K,onLogSet:g,onDeleteSet:v,onUpdateSet:w},q.originalIndex))}),s&&c.jsx("button",{onClick:W,className:"add-btn-dashed mx-4",children:"+ Add Item"})]})},cp=(n,t,s)=>{const{updateSection:i}=gt(),o=A.useCallback((g,v)=>{g.dataTransfer.setData("text/plain",v)},[]),u=A.useCallback(g=>{g.preventDefault()},[]),d=A.useCallback((g,v)=>{const w=parseInt(g.dataTransfer.getData("text/plain"));if(w===v)return;const _=[...s.events],[x]=_.splice(w,1);_.splice(v,0,x),i(n,t,{...s,events:_})},[n,t,s,i]),p=A.useCallback(g=>{const v=g||{title:"New Block",items:[]};i(n,t,{...s,events:[...s.events,v]})},[n,t,s,i]),m=A.useCallback(g=>{if(!confirm("Delete this block?"))return;const v=s.events.filter((w,_)=>_!==g);i(n,t,{...s,events:v})},[n,t,s,i]);return{handleDragStart:o,handleDragOver:u,handleDrop:d,addItem:p,deleteItem:m}},c1=({data:n,dayKey:t})=>{const{isEditMode:s,toggleEditMode:i,checklistState:o,toggleChecklist:u,weekDates:d}=gt(),{handleDragStart:p,handleDragOver:m,handleDrop:g,addItem:v,deleteItem:w}=cp(t,"nutrition",n),_=(j,R)=>{const T=`${d[t]?.fullDate}_${j}`,B=o[T];u(j,!B,t,R)},x=()=>v({title:"New Meal",details:"Details",items:[]});return n?c.jsxs("div",{className:"nutrition-panel pb-24",children:[c.jsxs("h2",{className:"section-title nutrition px-4 pt-4",children:[n.title,c.jsx("span",{className:"header-actions",children:c.jsx("button",{onClick:i,className:"action-btn edit-toggle-btn",children:s?"Save":"Edit"})})]}),c.jsx("div",{className:"card nutrition mx-4 mb-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold",children:"Input"}),c.jsx("div",{className:"text-white font-mono",children:n.input})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold",children:"Output"}),c.jsx("div",{className:"text-white font-mono",children:n.output})]}),c.jsxs("div",{className:"col-span-2 pt-2 border-t border-gray-800",children:[c.jsx("span",{className:"text-gray-500 text-xs uppercase font-bold",children:"Deficit"}),c.jsx("div",{className:"text-green-400 font-mono font-bold",children:n.deficit})]})]})}),c.jsx("div",{className:"px-4",children:!n.events||n.events.length===0?c.jsx("div",{className:"text-gray-500 text-center py-4 italic",children:"No meals scheduled."}):n.events.map((j,R)=>c.jsxs("div",{className:"card nutrition",draggable:s,onDragStart:k=>p(k,R),onDragOver:m,onDrop:k=>g(k,R),children:[c.jsxs("div",{className:"nutr-header",children:[c.jsx("span",{className:"nutr-time",children:j.time}),c.jsx("span",{className:"nutr-action",children:j.action})]}),c.jsx("div",{className:"nutr-body",children:j.items&&j.items.map((k,T)=>{const B=`${t}-nutr-${R}-${T}`,D=`${d[t]?.fullDate}_${B}`,H=o[D];return c.jsxs("div",{className:`nutr-row ${H?"completed":""}`,children:[c.jsxs("div",{className:"nutr-left",children:[!s&&c.jsx("input",{type:"checkbox",className:"nutrition-check",checked:!!H,onChange:()=>_(B,k)}),s&&c.jsx(_i,{className:"text-gray-500 mr-2 cursor-grab",size:20}),c.jsx("div",{className:"nutr-name",children:k.name})]}),c.jsx("div",{className:"nutr-right",children:c.jsx("div",{className:"nutr-dosage",dangerouslySetInnerHTML:{__html:k.dosage}})})]},T)})}),s&&c.jsx("button",{onClick:()=>w(R),className:"icon-btn delete mt-2 w-full flex justify-center",children:c.jsx(ki,{size:18})})]},R))}),s&&c.jsx("div",{className:"px-4",children:c.jsx("button",{onClick:x,className:"add-btn-dashed",children:"+ Add Meal Block"})})]}):c.jsx("div",{className:"p-4 text-white",children:"No Nutrition Data Loaded"})},d1=({data:n,dayKey:t})=>{const{isEditMode:s,toggleEditMode:i,checklistState:o,toggleChecklist:u,weekDates:d}=gt(),{handleDragStart:p,handleDragOver:m,handleDrop:g,addItem:v,deleteItem:w}=cp(t,"supplements",n),_=(j,R)=>{const T=`${d[t]?.fullDate}_${j}`,B=o[T];u(j,!B,t,R)},x=()=>v({title:"New Supp",items:[]});return c.jsxs("div",{className:"supplements-panel pb-24",children:[c.jsxs("h2",{className:"section-title supplements px-4 pt-4",children:[n.title,c.jsx("span",{className:"header-actions",children:c.jsx("button",{onClick:i,className:"action-btn edit-toggle-btn",children:s?"Save":"Edit"})})]}),c.jsx("div",{className:"px-4",children:!n.events||n.events.length===0?c.jsx("div",{className:"text-gray-500 text-center py-4 italic",children:"No supplements scheduled."}):n.events.map((j,R)=>c.jsxs("div",{className:"card supplements",draggable:s,onDragStart:k=>p(k,R),onDragOver:m,onDrop:k=>g(k,R),children:[c.jsxs("div",{className:"nutr-header",children:[c.jsx("span",{className:"nutr-time text-blue-400",children:j.time}),c.jsx("span",{className:"nutr-action",children:j.action})]}),c.jsx("div",{className:"nutr-body",children:j.items&&j.items.map((k,T)=>{const B=`${t}-supp-${R}-${T}`,D=`${d[t]?.fullDate}_${B}`,H=o[D];return c.jsxs("div",{className:`nutr-row ${H?"completed":""}`,children:[c.jsxs("div",{className:"nutr-left",children:[!s&&c.jsx("input",{type:"checkbox",className:"supplement-check",checked:!!H,onChange:()=>_(B,k)}),s&&c.jsx(_i,{className:"text-gray-500 mr-2 cursor-grab",size:20}),c.jsx("div",{className:"nutr-name",children:k.name})]}),c.jsx("div",{className:"nutr-right",children:c.jsx("div",{className:"nutr-dosage text-blue-200",children:k.dosage})})]},T)})}),s&&c.jsx("button",{onClick:()=>w(R),className:"icon-btn delete mt-2 w-full flex justify-center",children:c.jsx(ki,{size:18})})]},R))}),s&&c.jsx("div",{className:"px-4",children:c.jsx("button",{onClick:x,className:"add-btn-dashed",children:"+ Add Block"})})]})},yf=({viewMode:n,setViewMode:t,activeTab:s,setActiveTab:i})=>{const{session:o,logout:u,profile:d,resetToToday:p}=gt(),[m,g]=A.useState(!1);return c.jsx("div",{className:"app-header",children:c.jsx("div",{className:"header-content",style:{paddingBottom:"8px"},children:c.jsxs("div",{className:"header-top-row",children:[c.jsx("div",{className:"filter-tabs",style:{flex:1,marginBottom:0},children:n==="tracker"?["training","nutrition","supplements","data"].map(v=>c.jsx("button",{onClick:()=>i(v),className:`filter-btn active ${v} ${s===v?"":"opacity-50"}`,children:v.toUpperCase()},v)):c.jsx("div",{className:"text-sm font-bold text-gray-400 py-1 uppercase tracking-wider",children:n==="planner"?"Planner Mode":n==="settings"?"Settings":"Profile"})}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>g(!m),className:"profile-btn",children:c.jsx(Fv,{size:20})}),m&&c.jsxs("div",{className:"profile-menu",children:[c.jsx("div",{className:"profile-info",style:{padding:"0"},children:c.jsxs("button",{onClick:()=>{t("profile"),g(!1)},className:"logout-btn",style:{color:"#fff",borderBottom:"1px solid #333"},children:[c.jsx(lp,{size:16,className:"mr-2 text-gray-400"}),c.jsx("span",{className:"text-xs truncate",children:d?.full_name||o?.user?.email})]})}),c.jsxs("div",{className:"py-2 border-bottom border-[#333]",children:[c.jsxs("button",{onClick:()=>{t("tracker"),p(),g(!1)},className:`logout-btn ${n==="tracker"?"bg-[#222]":""}`,style:{color:"var(--training-accent)"},children:[c.jsx(qv,{size:16})," Tracker"]}),c.jsxs("button",{onClick:()=>{t("planner"),g(!1)},className:`logout-btn ${n==="planner"?"bg-[#222]":""}`,style:{color:"var(--nutrition-accent)"},children:[c.jsx(Dv,{size:16})," Planner"]}),c.jsxs("button",{onClick:()=>{t("settings"),g(!1)},className:`logout-btn ${n==="settings"?"bg-[#222]":""}`,style:{color:"#ccc"},children:[c.jsx(Jv,{size:16})," Settings"]}),c.jsxs("button",{onClick:()=>{window.location.href="index.html?select=true"},className:"logout-btn",style:{color:"var(--accent-color)",borderTop:"1px solid #333",marginTop:"4px"},children:[c.jsx(Uv,{size:16})," Exit to Portal"]})]}),c.jsxs("button",{onClick:()=>{u(),g(!1)},className:"logout-btn",children:[c.jsx(Bv,{size:16})," Logout"]})]})]})]})})})},dp=Ut.memo(({weekMap:n,weekNumber:t,year:s,weekClass:i,currentDay:o,setCurrentDay:u,activeTab:d,currentDayData:p,onPrev:m,onNext:g,style:v})=>{const w=_=>{if(!_)return"";const x=_.toLowerCase();return x.includes("rest")?"REST":x.includes("cardio")?"CARDIO":x.includes("resistance")?"LIFT":x.includes("leg")?"LEGS":x.includes("push")?"PUSH":x.includes("pull")?"PULL":x.includes("upper")?"UPPER":x.includes("lower")?"LOWER":_.split(" ")[0].substring(0,6)};return c.jsxs("div",{style:{width:"33.3333%",flexShrink:0,display:"flex",flexDirection:"column",...v},children:[c.jsxs("div",{className:`week-navigator ${i}`,children:[c.jsx("button",{className:"week-nav-btn",onClick:m,onMouseDown:_=>_.preventDefault(),children:c.jsx(Qu,{size:20})}),c.jsxs("span",{children:["WEEK ",t,", ",s]}),c.jsx("button",{className:"week-nav-btn",onClick:g,onMouseDown:_=>_.preventDefault(),children:c.jsx(Xu,{size:20})})]}),c.jsxs("div",{style:{backgroundColor:"#101010",padding:"8px 4px",borderBottom:"1px solid #333"},children:[c.jsx("div",{className:"scroll-tabs",style:{marginRight:0,gap:"2px"},children:Object.entries(n).map(([_,x])=>{const j=n[_],R=o===_;return c.jsx("button",{"data-key":_,onClick:()=>u(_),onMouseDown:k=>k.preventDefault(),className:`tab-btn ${R?"active":""}`,style:{minWidth:"0px",padding:"6px 2px",border:R?"1px solid var(--nutrition-accent)":"1px solid var(--border-color)",boxShadow:R?"0 0 5px rgba(46, 204, 113, 0.3)":"none"},children:c.jsxs("div",{style:{lineHeight:"1.1",overflow:"hidden"},children:[c.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"800",textTransform:"uppercase",color:"#888"},children:_.substring(0,3)}),c.jsx("div",{style:{fontSize:"0.6rem",fontWeight:"500",color:"#fff",marginTop:"1px"},children:j.label}),j.cycleLabel&&c.jsx("div",{className:"truncate",style:{fontSize:"0.55rem",fontWeight:"600",color:"var(--training-accent)",opacity:.8,marginTop:"1px"},children:w(j.cycleLabel)})]})},_)})}),d==="training"&&p&&c.jsx("div",{style:{marginTop:"8px"},onMouseDown:_=>_.stopPropagation(),children:c.jsx(up,{defaultTime:p.training.rest||60})})]})]})}),h1=({onSwipeLeft:n,onSwipeRight:t,threshold:s=100})=>{const[i,o]=A.useState(0),[u,d]=A.useState(!1),p=A.useRef(0),m=A.useRef(0),g=A.useCallback(k=>{p.current=k.touches[0].clientX,m.current=k.touches[0].clientX,d(!0),o(0)},[]),v=A.useCallback(k=>{if(!u)return;m.current=k.touches[0].clientX;const T=m.current-p.current;o(T)},[u]),w=A.useCallback(()=>{if(!u)return;d(!1);const k=m.current-p.current;Math.abs(k)>s&&(k>0?t():n()),o(0)},[u,s,n,t]),_=A.useCallback(k=>{p.current=k.clientX,m.current=k.clientX,d(!0),o(0)},[]),x=A.useCallback(k=>{if(!u)return;k.preventDefault(),m.current=k.clientX;const T=m.current-p.current;o(T)},[u]),j=A.useCallback(()=>{if(!u)return;d(!1);const k=m.current-p.current;Math.abs(k)>s&&(k>0?t():n()),o(0)},[u,s,n,t]),R=A.useCallback(()=>{u&&(d(!1),o(0))},[u]);return{handlers:{onTouchStart:g,onTouchMove:v,onTouchEnd:w,onMouseDown:_,onMouseMove:x,onMouseUp:j,onMouseLeave:R},deltaX:i,isDragging:u,style:{transform:`translateX(${i}px)`,transition:u?"none":"transform 0.3s ease-out",cursor:u?"grabbing":"grab",userSelect:"none"}}},f1=({weekDates:n,weekNumber:t,year:s,currentDay:i,setCurrentDay:o,activeTab:u,currentDayData:d,onPrev:p,onNext:m})=>{const{handlers:g,deltaX:v,isDragging:w}=h1({onSwipeLeft:m,onSwipeRight:p});return c.jsx("div",{className:"nav-slider-container",style:{overflow:"hidden",width:"100%"},...g,children:c.jsx("div",{className:"nav-slider-track",style:{transform:`translateX(${v}px)`,transition:w?"none":"transform 0.2s ease-out"},children:c.jsx(dp,{weekMap:n,weekNumber:t,year:s,weekClass:"current",currentDay:i,setCurrentDay:o,activeTab:u,currentDayData:d,onPrev:p,onNext:m,style:{width:"100%"}})})})},p1=({weeks:n,currentDay:t,weekOffset:s,onDayClick:i,onPrev:o,onNext:u})=>{const d=A.useRef(null),[p,m]=A.useState(!1),g=A.useRef(0),v=A.useRef(0),w=A.useRef(s),_=A.useRef(0),x=A.useRef(!1),j=A.useRef(!1),[R,k]=A.useState(t),T=A.useRef(null),B=A.useRef(!1);A.useEffect(()=>{const G=setTimeout(()=>{x.current=!1},100);return()=>clearTimeout(G)},[s]),A.useEffect(()=>{k(t)},[t]);const M=(G,ne,q=300,X)=>{T.current&&cancelAnimationFrame(T.current),j.current=!0;const O=G.scrollLeft,C=ne-O,F=performance.now(),P=V=>{const z=V-F,S=Math.min(z/q,1),I=1-Math.pow(1-S,3);G.scrollLeft=O+C*I,S<1?T.current=requestAnimationFrame(P):(T.current=null,j.current=!1,X&&X())};T.current=requestAnimationFrame(P)};A.useLayoutEffect(()=>{if(d.current){const G=d.current,ne=G.scrollWidth/3;let q=!1;if(w.current!==s){const P=(s-w.current)*ne;T.current&&(cancelAnimationFrame(T.current),j.current=!1),G.style.scrollBehavior="auto",G.scrollLeft-=P,p&&(v.current-=P),w.current=s,q=!0}const X=!d.current.dataset.mounted,O=q||X?"auto":"smooth",C=()=>{const F=G.children[1];if(F){const P=F.querySelector(`.tab-btn[data-key="${t}"]`);P&&(P.scrollIntoView({behavior:O,block:"nearest",inline:"center"}),X&&(d.current.dataset.mounted="true"))}};C()}},[s,t]);const D=G=>{G.preventDefault(),B.current=!1,g.current=G.pageX,d.current&&(v.current=d.current.scrollLeft,d.current.style.scrollBehavior="auto")},H=()=>{p&&m(!1)},K=()=>{p&&m(!1),d.current&&(d.current.style.scrollBehavior="smooth")},W=G=>{B.current&&(G.stopPropagation(),G.preventDefault())},te=G=>{if(G.buttons===0){p&&(m(!1),B.current=!1,d.current&&(d.current.style.scrollBehavior="smooth"));return}if(B.current||Math.abs(G.pageX-g.current)>5&&(B.current=!0,m(!0)),B.current&&d.current){G.preventDefault();const q=(G.pageX-g.current)*1.5;d.current.scrollLeft=v.current-q}},de=()=>{if(x.current||j.current)return;const G=Date.now(),ne=d.current;if(!ne)return;if(G-_.current>50){const F=ne.getBoundingClientRect().left+ne.clientWidth/2,P=Array.from(ne.querySelectorAll(".tab-btn"));let V=null,z=1/0;for(const S of P){const I=S.getBoundingClientRect(),re=I.left+I.width/2,se=Math.abs(F-re);se<z&&(z=se,V=S)}if(V){const S=V.dataset.key;S&&S!==R&&k(S)}_.current=G}const{scrollLeft:q,scrollWidth:X,clientWidth:O}=ne,C=50;q<C?(x.current=!0,o()):q+O>X-C&&(x.current=!0,u())},ee=(G,ne)=>{const q=d.current;if(!q)return;const O=q.children[1+G]?.querySelector(`.tab-btn[data-key="${ne}"]`);if(O){const C=q.clientWidth/2,F=q.getBoundingClientRect(),P=O.getBoundingClientRect(),V=q.scrollLeft,z=P.left-F.left+P.width/2,S=V+(z-C);M(q,S,300,()=>{i&&i(G,ne),k(ne)})}};return c.jsx("div",{className:"continuous-scroll-container",ref:d,onMouseDown:D,onMouseLeave:H,onMouseUp:K,onMouseMove:te,onClickCapture:W,onScroll:de,style:{overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap",display:"flex",background:"#101010",borderBottom:"1px solid #333",cursor:p?"grabbing":"grab",userSelect:"none"},children:n.map((G,ne)=>c.jsx(dp,{weekMap:G.map,weekNumber:G.info.number,year:G.info.year,weekClass:G.class,currentDay:R,setCurrentDay:q=>ee(G.offset,q),activeTab:"",currentDayData:null,onPrev:o,onNext:u,style:{minWidth:"100vw",width:"100vw"}},ne))})},m1=({logs:n})=>c.jsx("div",{className:"flex-1 overflow-hidden relative rounded-lg border border-[#333]",children:c.jsx("div",{className:"absolute inset-0 overflow-auto",children:c.jsxs("table",{className:"w-full text-left border-collapse min-w-[600px]",children:[c.jsx("thead",{className:"sticky top-0 z-10",children:c.jsxs("tr",{className:"bg-[#1a1a1a] text-gray-400 text-xs uppercase shadow-sm",children:[c.jsx("th",{className:"p-3 border-b border-[#333]",children:"Logged"}),c.jsx("th",{className:"p-3 border-b border-[#333]",children:"Sched"}),c.jsx("th",{className:"p-3 border-b border-[#333]",children:"Ex"}),c.jsx("th",{className:"p-3 border-b border-[#333] text-center",children:"Load"}),c.jsx("th",{className:"p-3 border-b border-[#333] text-center",children:"Reps"}),c.jsx("th",{className:"p-3 border-b border-[#333] text-center",children:"Int/RPE"}),c.jsx("th",{className:"p-3 border-b border-[#333] text-center",children:"Dur"})]})}),c.jsx("tbody",{className:"text-sm",children:n.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"7",className:"p-4 text-center text-gray-500",children:"No logs found."})}):n.map((t,s)=>c.jsxs("tr",{className:`${s%2===0?"bg-[#0a0a0a]":"bg-[#151515]"} hover:bg-[#222]`,children:[c.jsx("td",{className:"p-3 border-b border-[#222] text-gray-500 whitespace-nowrap text-xs",children:new Date(t.logged_at).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),c.jsx("td",{className:"p-3 border-b border-[#222] font-mono text-blue-400 text-xs",children:t.scheduled_for||"-"}),c.jsx("td",{className:"p-3 border-b border-[#222] font-bold text-white text-xs",children:t.exercise_name}),c.jsx("td",{className:"p-3 border-b border-[#222] font-mono text-orange-400 text-center whitespace-nowrap",children:t.weight}),c.jsx("td",{className:"p-3 border-b border-[#222] text-white text-center",children:t.reps}),c.jsx("td",{className:"p-3 border-b border-[#222] text-white text-center text-xs",children:t.intensity?c.jsxs("span",{className:"text-blue-300",children:[t.intensity,"%"]}):t.rpe}),c.jsx("td",{className:"p-3 border-b border-[#222] text-white text-center text-xs",children:t.duration_minutes?`${t.duration_minutes}m`:"-"})]},t.id))})]})})}),g1=({logs:n})=>c.jsx("div",{className:"flex-1 overflow-hidden relative rounded-lg border border-[#333]",children:c.jsx("div",{className:"absolute inset-0 overflow-auto",children:c.jsxs("table",{className:"w-full text-left border-collapse min-w-[500px]",children:[c.jsx("thead",{className:"sticky top-0 z-10",children:c.jsxs("tr",{className:"bg-[#1a1a1a] text-gray-400 text-xs uppercase shadow-sm",children:[c.jsx("th",{className:"p-3 border-b border-[#333]",children:"Updated"}),c.jsx("th",{className:"p-3 border-b border-[#333]",children:"Scheduled"}),c.jsx("th",{className:"p-3 border-b border-[#333]",children:"ID"}),c.jsx("th",{className:"p-3 border-b border-[#333] text-center",children:"Status"}),c.jsx("th",{className:"p-3 border-b border-[#333]",children:"Details"})]})}),c.jsx("tbody",{className:"text-sm",children:n.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"5",className:"p-4 text-center text-gray-500",children:"No checklist logs found."})}):n.map((t,s)=>c.jsxs("tr",{className:`${s%2===0?"bg-[#0a0a0a]":"bg-[#151515]"} hover:bg-[#222]`,children:[c.jsx("td",{className:"p-3 border-b border-[#222] text-gray-500 whitespace-nowrap text-xs",children:new Date(t.updated_at).toLocaleString()}),c.jsx("td",{className:"p-3 border-b border-[#222] font-mono text-green-400 text-xs",children:t.scheduled_for}),c.jsx("td",{className:"p-3 border-b border-[#222] text-xs font-mono text-gray-500 truncate max-w-[100px]",title:t.item_id,children:t.item_id}),c.jsx("td",{className:"p-3 border-b border-[#222] text-center",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${t.completed?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:t.completed?"DONE":"PENDING"})}),c.jsx("td",{className:"p-3 border-b border-[#222] text-xs text-gray-300",children:t.meta_data?c.jsxs("div",{className:"flex flex-col gap-1",children:[t.meta_data.name&&c.jsx("div",{className:"font-bold text-white",children:t.meta_data.name}),t.meta_data.dosage&&c.jsx("div",{className:"text-gray-400",dangerouslySetInnerHTML:{__html:t.meta_data.dosage}})]}):c.jsx("span",{className:"text-gray-600 italic",children:"No details"})})]},t.id))})]})})}),y1=({status:n})=>c.jsx("div",{className:"bg-[#111] p-4 rounded-lg border border-[#333] m-2",children:n?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Active Routine"}),c.jsx("div",{className:"text-xl font-bold text-white",children:n.routines?.name||"Unknown"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Start Date"}),c.jsx("div",{className:"text-white font-mono",children:new Date(n.cycle_start_date).toLocaleDateString()})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Cycle Length"}),c.jsxs("div",{className:"text-white",children:[n.routines?.cycle_length," Days"]})]})]})]}):c.jsx("div",{className:"text-gray-500 italic",children:"No active routine assigned."})}),v1=()=>{const[n,t]=A.useState({requests:0,egressBytes:0,logs:[]});A.useEffect(()=>{const o=()=>{const d=JSON.parse(localStorage.getItem("mock_monitor_stats")||'{"requests":0,"egressBytes":0,"logs":[]}');t(d)};o();const u=setInterval(o,1e3);return()=>clearInterval(u)},[]);const s=n.breakdown||{};!n.breakdown&&n.logs&&n.logs.forEach(o=>{const u=`${o.type} ${o.table}`;s[u]||(s[u]={count:0,size:0}),s[u].count++,s[u].size+=o.size});const i=Object.entries(s).map(([o,u])=>({key:o,count:u.count,size:u.size})).sort((o,u)=>u.count-o.count);return c.jsxs("div",{className:"flex-1 overflow-hidden relative rounded-lg border border-[#333] flex flex-col p-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{className:"bg-[#111] p-3 rounded border border-[#222]",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Total Requests"}),c.jsx("div",{className:"text-xl font-bold text-white",children:n.requests})]}),c.jsxs("div",{className:"bg-[#111] p-3 rounded border border-[#222]",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Total Egress"}),c.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[(n.egressBytes/1024).toFixed(2)," KB"]})]})]}),c.jsx("h3",{className:"text-sm font-bold text-gray-400 mb-2 uppercase",children:"Operation Breakdown (Session)"}),c.jsx("div",{className:"flex-1 overflow-auto border-t border-[#222]",children:c.jsxs("table",{className:"w-full text-left text-xs",children:[c.jsx("thead",{className:"sticky top-0 bg-[#1a1a1a] text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Operation"}),c.jsx("th",{className:"p-2 text-right",children:"Count"}),c.jsx("th",{className:"p-2 text-right",children:"Size (KB)"})]})}),c.jsx("tbody",{children:i.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"3",className:"p-4 text-center text-gray-600",children:"No data available."})}):i.map(o=>c.jsxs("tr",{className:"border-b border-[#222]",children:[c.jsx("td",{className:"p-2 text-white font-mono",children:o.key}),c.jsx("td",{className:"p-2 text-right text-orange-400 font-bold",children:o.count}),c.jsx("td",{className:"p-2 text-right text-gray-400",children:(o.size/1024).toFixed(2)})]},o.key))})]})}),c.jsx("button",{onClick:()=>{localStorage.removeItem("mock_monitor_stats"),t({requests:0,egressBytes:0,breakdown:{},logs:[]})},className:"mt-4 w-full py-2 bg-red-900/30 text-red-400 border border-red-900 rounded uppercase font-bold text-xs hover:bg-red-900/50",children:"Reset Statistics"})]})},_1=()=>{const[n,t]=A.useState([]),[s,i]=A.useState([]),[o,u]=A.useState(null),[d,p]=A.useState(!1),[m,g]=A.useState("logs"),v=async()=>{p(!0);const{data:w,error:_}=await ue.from("workout_logs").select("id, exercise_name, weight, reps, rpe, intensity, duration_minutes, logged_at, scheduled_for, day_key").order("logged_at",{ascending:!1}).limit(50);_?console.error("Error fetching logs:",_):t(w||[]);const{data:x,error:j}=await ue.from("daily_checklist_logs").select("id, item_id, completed, scheduled_for, meta_data, updated_at").order("updated_at",{ascending:!1}).limit(50);j?console.error("Error fetching checklist:",j):i(x||[]);const{data:R,error:k}=await ue.from("user_routine_status").select("*, routines ( name, cycle_length )").order("id",{ascending:!1}).limit(1).maybeSingle();k?console.error("Error fetching status:",k):u(R),p(!1)};return A.useEffect(()=>{v()},[]),c.jsxs("div",{className:"pb-24 px-2 pt-4 h-full flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 px-2 flex-shrink-0",children:[c.jsx("h2",{className:"section-title",style:{marginBottom:0},children:"My Data"}),c.jsxs("button",{onClick:v,className:"action-btn",children:[c.jsx(ip,{size:14,className:d?"animate-spin":""})," Refresh"]})]}),c.jsxs("div",{className:"flex gap-2 mb-4 px-2 border-b border-gray-800 pb-2 flex-shrink-0 overflow-x-auto",children:[c.jsx("button",{onClick:()=>g("logs"),className:`text-sm font-bold px-3 py-1 rounded-t whitespace-nowrap ${m==="logs"?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"}`,children:"Workouts"}),c.jsx("button",{onClick:()=>g("checklist"),className:`text-sm font-bold px-3 py-1 rounded-t whitespace-nowrap ${m==="checklist"?"text-green-500 border-b-2 border-green-500":"text-gray-500"}`,children:"Nutrition/Supps"}),c.jsx("button",{onClick:()=>g("status"),className:`text-sm font-bold px-3 py-1 rounded-t whitespace-nowrap ${m==="status"?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"}`,children:"Routine Status"}),c.jsx("button",{onClick:()=>g("egress"),className:`text-sm font-bold px-3 py-1 rounded-t whitespace-nowrap ${m==="egress"?"text-purple-500 border-b-2 border-purple-500":"text-gray-500"}`,children:"Egress Monitor"})]}),m==="logs"&&c.jsx(m1,{logs:n}),m==="checklist"&&c.jsx(g1,{logs:s}),m==="status"&&c.jsx(y1,{status:o}),m==="egress"&&c.jsx(v1,{})]})},w1=({routineId:n,onClose:t})=>{const[s,i]=A.useState(null),[o,u]=A.useState([]),[d,p]=A.useState(0),[m,g]=A.useState(!0),[v,w]=A.useState(!1);A.useEffect(()=>{(async()=>{g(!0);const H=await we.getRoutineDetails(n);H&&(i(H),u(H.days||[])),g(!1)})()},[n]);const _=(D,H,K)=>{const W=[...o];W[D][H]=K,u(W),w(!0)},x=(D,H,K,W)=>{const te=[...o],de=[...te[D].exercises||[]];de[H]={...de[H],[K]:W},te[D].exercises=de,u(te),w(!0)},j=D=>{const H=[...o],K=H[D].exercises||[];H[D].exercises=[...K,{exercise:"",config:"3 x 10 @ 8 RPE",focus:"",type:"Resistance"}],u(H),w(!0)},R=(D,H)=>{const K=[...o];K[D].exercises=K[D].exercises.filter((W,te)=>te!==H),u(K),w(!0)},k=()=>{u([...o,{day_number:o.length+1,title:`Day ${o.length+1}`,day_type:"Resistance",exercises:[],instructions:""}]),w(!0),p(o.length)},T=D=>{if(confirm("Remove this day and all its exercises?")){const H=o.filter((K,W)=>W!==D);u(H),w(!0),d>=H.length&&p(Math.max(0,H.length-1))}},B=async()=>{n&&(g(!0),await we.updateRoutineStructure(n,o),w(!1),g(!1))};if(m&&!s)return c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading Editor..."});const M=o[d];return c.jsxs("div",{className:"flex flex-col h-full bg-black text-white",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#222] bg-[#111] sticky top-0 z-10 shadow-md",children:[c.jsxs("button",{onClick:t,className:"action-btn",style:{background:"#222",border:"1px solid #444"},children:[c.jsx(Qu,{size:16})," Back"]}),c.jsx("div",{className:"text-sm font-bold tracking-wide",style:{color:"var(--training-accent)"},children:s?.name}),c.jsxs("button",{onClick:B,disabled:!v,className:`action-btn ${v?"active-edit":"opacity-50"}`,style:{background:v?"var(--training-accent)":"#222",color:v?"#000":"#888",border:v?"none":"1px solid #444"},children:[c.jsx(op,{size:14})," Save"]})]}),c.jsx("div",{className:"bg-[#0a0a0a] border-b border-[#222] pt-3 px-2 pb-0",children:c.jsxs("div",{className:"flex overflow-x-auto gap-1 no-scrollbar pb-0",children:[o.map((D,H)=>{const K=d===H;return c.jsx("button",{onClick:()=>p(H),className:`flex-shrink-0 px-4 py-3 text-xs font-bold uppercase tracking-wider border-t border-x rounded-t-lg transition-all relative top-[1px] ${K?"bg-[#111] text-white border-[#222] border-b-transparent z-10":"bg-transparent text-gray-600 border-transparent hover:text-gray-400 hover:bg-[#11111150]"}`,children:D.title||`Day ${H+1}`},H)}),c.jsx("button",{onClick:k,className:"flex-shrink-0 px-3 py-2 text-gray-600 hover:text-[var(--training-accent)] transition-colors",children:c.jsx(Za,{size:16})})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-[#111]",children:M?c.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-[#333] shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"w-full mr-4",children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1 block",children:"Day Label"}),c.jsx("input",{className:"w-full bg-transparent text-lg font-bold text-white border-b border-[#333] focus:border-[var(--training-accent)] outline-none py-1 placeholder-gray-700 transition-colors",value:M.title||"",placeholder:"e.g. Push Day",onChange:D=>_(d,"title",D.target.value)})]}),c.jsx("button",{onClick:()=>T(d),className:"icon-btn delete",title:"Delete Day",children:c.jsx(ki,{size:16})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 mb-2 block",children:"Focus Type"}),c.jsx("div",{className:"flex bg-black p-1 rounded-lg border border-[#333]",children:["Resistance","Cardio","Rest"].map(D=>c.jsx("button",{onClick:()=>_(d,"day_type",D),className:`flex-1 py-2 text-[10px] font-bold uppercase rounded-md transition-all ${M.day_type===D?"bg-[#222] text-white shadow-sm ring-1 ring-[#444]":"text-gray-600 hover:text-gray-400"}`,style:M.day_type===D?{color:D==="Resistance"?"var(--training-accent)":D==="Cardio"?"var(--cardio-accent)":"#ccc"}:{},children:D},D))})]})]}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("h3",{className:"text-xs font-bold uppercase text-gray-500 tracking-wider",children:["Exercises (",M.exercises?.length||0,")"]})}),c.jsx("div",{className:"space-y-4",children:(M.exercises||[]).map((D,H)=>c.jsx("div",{className:`card training-${D.type||"Resistance"}`,style:{position:"relative",overflow:"visible"},children:c.jsxs("div",{className:"card-content",children:[c.jsxs("div",{className:"card-title justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx(_i,{size:20,className:"text-gray-500 cursor-grab"}),c.jsx("input",{className:"edit-input-title",value:D.exercise,placeholder:"Exercise Name",onChange:K=>x(d,H,"exercise",K.target.value)})]}),c.jsx("button",{onClick:()=>R(d,H),className:"exercise-delete-btn",children:c.jsx(eo,{size:20})})]}),c.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[c.jsx("input",{className:"edit-input-config flex-1",value:D.config,placeholder:"3 x 10 @ 8 RPE",onChange:K=>x(d,H,"config",K.target.value)}),c.jsxs("select",{className:"edit-input-config w-auto",style:{width:"auto",fontSize:"0.7rem",padding:"2px"},value:D.type,onChange:K=>x(d,H,"type",K.target.value),children:[c.jsx("option",{value:"Resistance",children:"Resistance"}),c.jsx("option",{value:"Cardio",children:"Cardio"})]})]}),c.jsx("div",{className:"mb-2",children:c.jsx("textarea",{className:"edit-input-focus",rows:2,value:D.focus,placeholder:"Notes, cues, tempo...",onChange:K=>x(d,H,"focus",K.target.value)})})]})},H))}),c.jsxs("button",{onClick:()=>j(d),className:"add-btn-dashed mt-4",children:[c.jsx(Za,{size:16,className:"inline mr-2"})," Add Item"]}),c.jsx("div",{className:"h-8"})," "]}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600 opacity-50",children:[c.jsx(_i,{size:48,className:"mb-4"}),c.jsx("p",{className:"text-sm font-bold uppercase",children:"Select a day to edit"})]})})]})};function hp(n){var t,s,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(t=0;t<o;t++)n[t]&&(s=hp(n[t]))&&(i&&(i+=" "),i+=s)}else for(s in n)n[s]&&(i&&(i+=" "),i+=s);return i}function io(){for(var n,t,s=0,i="",o=arguments.length;s<o;s++)(n=arguments[s])&&(t=hp(n))&&(i&&(i+=" "),i+=t);return i}const x1=(n,t,s,i)=>{if(s==="length"||s==="prototype"||s==="arguments"||s==="caller")return;const o=Object.getOwnPropertyDescriptor(n,s),u=Object.getOwnPropertyDescriptor(t,s);!b1(o,u)&&i||Object.defineProperty(n,s,u)},b1=function(n,t){return n===void 0||n.configurable||n.writable===t.writable&&n.enumerable===t.enumerable&&n.configurable===t.configurable&&(n.writable||n.value===t.value)},k1=(n,t)=>{const s=Object.getPrototypeOf(t);s!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,s)},S1=(n,t)=>`/* Wrapped ${n}*/
${t}`,j1=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),E1=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),T1=(n,t,s)=>{const i=s===""?"":`with ${s.trim()}() `,o=S1.bind(null,i,t.toString());Object.defineProperty(o,"name",E1);const{writable:u,enumerable:d,configurable:p}=j1;Object.defineProperty(n,"toString",{value:o,writable:u,enumerable:d,configurable:p})};function C1(n,t,{ignoreNonConfigurable:s=!1}={}){const{name:i}=n;for(const o of Reflect.ownKeys(t))x1(n,t,o,s);return k1(n,t),T1(n,t,i),n}const Wa=2147483647,N1=new WeakMap,fu=new WeakMap,R1=new WeakMap;function O1(n,t){const s=n.get(t);if(s){if(s.maxAge<=Date.now()){n.delete(t);return}return s}}function fp(n,{cacheKey:t,cache:s=new Map,maxAge:i}={}){if(i===0)return n;if(typeof i=="number"&&Number.isFinite(i)){if(i>Wa)throw new TypeError(`The \`maxAge\` option cannot exceed ${Wa}.`);if(i<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const o=function(...u){const d=t?t(u):u[0],p=O1(s,d);if(p)return p.data;const m=n.apply(this,u),g=typeof i=="function"?i(...u):i;if(g!==void 0&&g!==Number.POSITIVE_INFINITY){if(!Number.isFinite(g))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(g<=0)return m;if(g>Wa)throw new TypeError(`The \`maxAge\` function result cannot exceed ${Wa}.`)}if(s.set(d,{data:m,maxAge:g===void 0||g===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+g}),g!==void 0&&g!==Number.POSITIVE_INFINITY){const v=setTimeout(()=>{s.delete(d),fu.get(o)?.delete(v)},g);v.unref?.();const w=fu.get(o)??new Set;w.add(v),fu.set(o,w)}return m};return C1(o,n,{ignoreNonConfigurable:!0}),N1.set(o,s),R1.set(o,t??(u=>u[0])),o}function D1(n){return typeof n=="string"}function P1(n,t,s){return s.indexOf(n)===t}function A1(n){return n.toLowerCase()===n}function vf(n){return n.indexOf(",")===-1?n:n.split(",")}function Ru(n){if(!n)return n;if(n==="C"||n==="posix"||n==="POSIX")return"en-US";if(n.indexOf(".")!==-1){var t=n.split(".")[0],s=t===void 0?"":t;return Ru(s)}if(n.indexOf("@")!==-1){var i=n.split("@")[0],s=i===void 0?"":i;return Ru(s)}if(n.indexOf("-")===-1||!A1(n))return n;var o=n.split("-"),u=o[0],d=o[1],p=d===void 0?"":d;return"".concat(u,"-").concat(p.toUpperCase())}function I1(n){var t=n===void 0?{}:n,s=t.useFallbackLocale,i=s===void 0?!0:s,o=t.fallbackLocale,u=o===void 0?"en-US":o,d=[];if(typeof navigator<"u"){for(var p=navigator.languages||[],m=[],g=0,v=p;g<v.length;g++){var w=v[g];m=m.concat(vf(w))}var _=navigator.language,x=_&&vf(_);d=d.concat(m,x)}return i&&d.push(u),d.filter(D1).map(Ru).filter(P1)}var L1=fp(I1,{cacheKey:JSON.stringify});function M1(n){return L1(n)[0]||null}var pp=fp(M1,{cacheKey:JSON.stringify});function gr(n,t,s){return function(o,u=s){const d=n(o)+u;return t(d)}}function Si(n){return function(s){return new Date(n(s).getTime()-1)}}function ji(n,t){return function(i){return[n(i),t(i)]}}function Me(n){if(n instanceof Date)return n.getFullYear();if(typeof n=="number")return n;const t=Number.parseInt(n,10);if(typeof n=="string"&&!Number.isNaN(t))return t;throw new Error(`Failed to get year from date: ${n}.`)}function Jr(n){if(n instanceof Date)return n.getMonth();throw new Error(`Failed to get month from date: ${n}.`)}function ao(n){if(n instanceof Date)return n.getDate();throw new Error(`Failed to get year from date: ${n}.`)}function ms(n){const t=Me(n),s=t+(-t+1)%100,i=new Date;return i.setFullYear(s,0,1),i.setHours(0,0,0,0),i}const $1=gr(Me,ms,-100),mp=gr(Me,ms,100),Zu=Si(mp),U1=gr(Me,Zu,-100),gp=ji(ms,Zu);function Yr(n){const t=Me(n),s=t+(-t+1)%10,i=new Date;return i.setFullYear(s,0,1),i.setHours(0,0,0,0),i}const yp=gr(Me,Yr,-10),ec=gr(Me,Yr,10),oo=Si(ec),vp=gr(Me,oo,-10),_p=ji(Yr,oo);function gs(n){const t=Me(n),s=new Date;return s.setFullYear(t,0,1),s.setHours(0,0,0,0),s}const wp=gr(Me,gs,-1),tc=gr(Me,gs,1),lo=Si(tc),xp=gr(Me,lo,-1),z1=ji(gs,lo);function rc(n,t){return function(i,o=t){const u=Me(i),d=Jr(i)+o,p=new Date;return p.setFullYear(u,d,1),p.setHours(0,0,0,0),n(p)}}function bn(n){const t=Me(n),s=Jr(n),i=new Date;return i.setFullYear(t,s,1),i.setHours(0,0,0,0),i}const bp=rc(bn,-1),nc=rc(bn,1),Ei=Si(nc),kp=rc(Ei,-1),B1=ji(bn,Ei);function F1(n,t){return function(i,o=t){const u=Me(i),d=Jr(i),p=ao(i)+o,m=new Date;return m.setFullYear(u,d,p),m.setHours(0,0,0,0),n(m)}}function Ti(n){const t=Me(n),s=Jr(n),i=ao(n),o=new Date;return o.setFullYear(t,s,i),o.setHours(0,0,0,0),o}const W1=F1(Ti,1),sc=Si(W1),V1=ji(Ti,sc);function Sp(n){return ao(Ei(n))}var lt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},q1={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},ic=[0,1,2,3,4,5,6],pu=new Map;function H1(n){return function(s,i){var o=s||pp();pu.has(o)||pu.set(o,new Map);var u=pu.get(o);return u.has(n)||u.set(n,new Intl.DateTimeFormat(o||void 0,n).format),u.get(n)(i)}}function K1(n){var t=new Date(n);return new Date(t.setHours(12))}function kn(n){return function(t,s){return H1(n)(t,K1(s))}}var G1={day:"numeric"},J1={day:"numeric",month:"long",year:"numeric"},Y1={month:"long"},Q1={month:"long",year:"numeric"},X1={weekday:"short"},Z1={weekday:"long"},e_={year:"numeric"},t_=kn(G1),r_=kn(J1),n_=kn(Y1),jp=kn(Q1),s_=kn(X1),i_=kn(Z1),uo=kn(e_),a_=ic[0],o_=ic[5],_f=ic[6];function wi(n,t){t===void 0&&(t=lt.ISO_8601);var s=n.getDay();switch(t){case lt.ISO_8601:return(s+6)%7;case lt.ISLAMIC:return(s+1)%7;case lt.HEBREW:case lt.GREGORY:return s;default:throw new Error("Unsupported calendar type.")}}function l_(n){var t=ms(n);return Me(t)}function u_(n){var t=Yr(n);return Me(t)}function Ou(n,t){t===void 0&&(t=lt.ISO_8601);var s=Me(n),i=Jr(n),o=n.getDate()-wi(n,t);return new Date(s,i,o)}function c_(n,t){t===void 0&&(t=lt.ISO_8601);var s=t===lt.GREGORY?lt.GREGORY:lt.ISO_8601,i=Ou(n,t),o=Me(n)+1,u,d;do u=new Date(o,0,s===lt.ISO_8601?4:1),d=Ou(u,t),o-=1;while(n<d);return Math.round((i.getTime()-d.getTime())/(864e5*7))+1}function xn(n,t){switch(n){case"century":return ms(t);case"decade":return Yr(t);case"year":return gs(t);case"month":return bn(t);case"day":return Ti(t);default:throw new Error("Invalid rangeType: ".concat(n))}}function d_(n,t){switch(n){case"century":return $1(t);case"decade":return yp(t);case"year":return wp(t);case"month":return bp(t);default:throw new Error("Invalid rangeType: ".concat(n))}}function Ep(n,t){switch(n){case"century":return mp(t);case"decade":return ec(t);case"year":return tc(t);case"month":return nc(t);default:throw new Error("Invalid rangeType: ".concat(n))}}function h_(n,t){switch(n){case"decade":return yp(t,-100);case"year":return wp(t,-10);case"month":return bp(t,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function f_(n,t){switch(n){case"decade":return ec(t,100);case"year":return tc(t,10);case"month":return nc(t,12);default:throw new Error("Invalid rangeType: ".concat(n))}}function Tp(n,t){switch(n){case"century":return Zu(t);case"decade":return oo(t);case"year":return lo(t);case"month":return Ei(t);case"day":return sc(t);default:throw new Error("Invalid rangeType: ".concat(n))}}function p_(n,t){switch(n){case"century":return U1(t);case"decade":return vp(t);case"year":return xp(t);case"month":return kp(t);default:throw new Error("Invalid rangeType: ".concat(n))}}function m_(n,t){switch(n){case"decade":return vp(t,-100);case"year":return xp(t,-10);case"month":return kp(t,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function wf(n,t){switch(n){case"century":return gp(t);case"decade":return _p(t);case"year":return z1(t);case"month":return B1(t);case"day":return V1(t);default:throw new Error("Invalid rangeType: ".concat(n))}}function g_(n,t,s){var i=[t,s].sort(function(o,u){return o.getTime()-u.getTime()});return[xn(n,i[0]),Tp(n,i[1])]}function Cp(n,t,s){return s.map(function(i){return(t||uo)(n,i)}).join("  ")}function y_(n,t,s){return Cp(n,t,gp(s))}function Np(n,t,s){return Cp(n,t,_p(s))}function v_(n){return n.getDay()===new Date().getDay()}function Rp(n,t){t===void 0&&(t=lt.ISO_8601);var s=n.getDay();switch(t){case lt.ISLAMIC:case lt.HEBREW:return s===o_||s===_f;case lt.ISO_8601:case lt.GREGORY:return s===_f||s===a_;default:throw new Error("Unsupported calendar type.")}}var tr="react-calendar__navigation";function __(n){var t=n.activeStartDate,s=n.drillUp,i=n.formatMonthYear,o=i===void 0?jp:i,u=n.formatYear,d=u===void 0?uo:u,p=n.locale,m=n.maxDate,g=n.minDate,v=n.navigationAriaLabel,w=v===void 0?"":v,_=n.navigationAriaLive,x=n.navigationLabel,j=n.next2AriaLabel,R=j===void 0?"":j,k=n.next2Label,T=k===void 0?"":k,B=n.nextAriaLabel,M=B===void 0?"":B,D=n.nextLabel,H=D===void 0?"":D,K=n.prev2AriaLabel,W=K===void 0?"":K,te=n.prev2Label,de=te===void 0?"":te,ee=n.prevAriaLabel,G=ee===void 0?"":ee,ne=n.prevLabel,q=ne===void 0?"":ne,X=n.setActiveStartDate,O=n.showDoubleView,C=n.view,F=n.views,P=F.indexOf(C)>0,V=C!=="century",z=d_(C,t),S=V?h_(C,t):void 0,I=Ep(C,t),re=V?f_(C,t):void 0,se=(function(){if(z.getFullYear()<0)return!0;var $e=p_(C,t);return g&&g>=$e})(),fe=V&&(function(){if(S.getFullYear()<0)return!0;var $e=m_(C,t);return g&&g>=$e})(),ve=m&&m<I,ke=V&&m&&m<re;function xe(){X(z,"prev")}function Ee(){X(S,"prev2")}function tt(){X(I,"next")}function yr(){X(re,"next2")}function Qr($e){var _r=(function(){switch(C){case"century":return y_(p,d,$e);case"decade":return Np(p,d,$e);case"year":return d(p,$e);case"month":return o(p,$e);default:throw new Error("Invalid view: ".concat(C,"."))}})();return x?x({date:$e,label:_r,locale:p||pp()||void 0,view:C}):_r}function vr(){var $e="".concat(tr,"__label");return c.jsxs("button",{"aria-label":w,"aria-live":_,className:$e,disabled:!P,onClick:s,style:{flexGrow:1},type:"button",children:[c.jsx("span",{className:"".concat($e,"__labelText ").concat($e,"__labelText--from"),children:Qr(t)}),O?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"".concat($e,"__divider"),children:"  "}),c.jsx("span",{className:"".concat($e,"__labelText ").concat($e,"__labelText--to"),children:Qr(I)})]}):null]})}return c.jsxs("div",{className:tr,children:[de!==null&&V?c.jsx("button",{"aria-label":W,className:"".concat(tr,"__arrow ").concat(tr,"__prev2-button"),disabled:fe,onClick:Ee,type:"button",children:de}):null,q!==null&&c.jsx("button",{"aria-label":G,className:"".concat(tr,"__arrow ").concat(tr,"__prev-button"),disabled:se,onClick:xe,type:"button",children:q}),vr(),H!==null&&c.jsx("button",{"aria-label":M,className:"".concat(tr,"__arrow ").concat(tr,"__next-button"),disabled:ve,onClick:tt,type:"button",children:H}),T!==null&&V?c.jsx("button",{"aria-label":R,className:"".concat(tr,"__arrow ").concat(tr,"__next2-button"),disabled:ke,onClick:yr,type:"button",children:T}):null]})}var hs=function(){return hs=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},hs.apply(this,arguments)},w_=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s};function xf(n){return"".concat(n,"%")}function ac(n){var t=n.children,s=n.className,i=n.count,o=n.direction,u=n.offset,d=n.style,p=n.wrap,m=w_(n,["children","className","count","direction","offset","style","wrap"]);return c.jsx("div",hs({className:s,style:hs({display:"flex",flexDirection:o,flexWrap:p?"wrap":"nowrap"},d)},m,{children:A.Children.map(t,function(g,v){var w=u&&v===0?xf(100*u/i):null;return A.cloneElement(g,hs(hs({},g.props),{style:{flexBasis:xf(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:w,marginInlineStart:w,marginInlineEnd:0}}))})}))}function x_(n,t,s){return t&&t>n?t:s&&s<n?s:n}function xi(n,t){return t[0]<=n&&t[1]>=n}function b_(n,t){return n[0]<=t[0]&&n[1]>=t[1]}function Op(n,t){return xi(n[0],t)||xi(n[1],t)}function bf(n,t,s){var i=Op(t,n),o=[];if(i){o.push(s);var u=xi(n[0],t),d=xi(n[1],t);u&&o.push("".concat(s,"Start")),d&&o.push("".concat(s,"End")),u&&d&&o.push("".concat(s,"BothEnds"))}return o}function k_(n){return Array.isArray(n)?n[0]!==null&&n[1]!==null:n!==null}function S_(n){if(!n)throw new Error("args is required");var t=n.value,s=n.date,i=n.hover,o="react-calendar__tile",u=[o];if(!s)return u;var d=new Date,p=(function(){if(Array.isArray(s))return s;var x=n.dateType;if(!x)throw new Error("dateType is required when date is not an array of two dates");return wf(x,s)})();if(xi(d,p)&&u.push("".concat(o,"--now")),!t||!k_(t))return u;var m=(function(){if(Array.isArray(t))return t;var x=n.valueType;if(!x)throw new Error("valueType is required when value is not an array of two dates");return wf(x,t)})();b_(m,p)?u.push("".concat(o,"--active")):Op(m,p)&&u.push("".concat(o,"--hasActive"));var g=bf(m,p,"".concat(o,"--range"));u.push.apply(u,g);var v=Array.isArray(t)?t:[t];if(i&&v.length===1){var w=i>m[0]?[m[0],i]:[i,m[0]],_=bf(w,p,"".concat(o,"--hover"));u.push.apply(u,_)}return u}function co(n){for(var t=n.className,s=n.count,i=s===void 0?3:s,o=n.dateTransform,u=n.dateType,d=n.end,p=n.hover,m=n.offset,g=n.renderTile,v=n.start,w=n.step,_=w===void 0?1:w,x=n.value,j=n.valueType,R=[],k=v;k<=d;k+=_){var T=o(k);R.push(g({classes:S_({date:T,dateType:u,hover:p,value:x,valueType:j}),date:T}))}return c.jsx(ac,{className:t,count:i,offset:m,wrap:!0,children:R})}function ho(n){var t=n.activeStartDate,s=n.children,i=n.classes,o=n.date,u=n.formatAbbr,d=n.locale,p=n.maxDate,m=n.maxDateTransform,g=n.minDate,v=n.minDateTransform,w=n.onClick,_=n.onMouseOver,x=n.style,j=n.tileClassName,R=n.tileContent,k=n.tileDisabled,T=n.view,B=A.useMemo(function(){var D={activeStartDate:t,date:o,view:T};return typeof j=="function"?j(D):j},[t,o,j,T]),M=A.useMemo(function(){var D={activeStartDate:t,date:o,view:T};return typeof R=="function"?R(D):R},[t,o,R,T]);return c.jsxs("button",{className:io(i,B),disabled:g&&v(g)>o||p&&m(p)<o||k?.({activeStartDate:t,date:o,view:T}),onClick:w?function(D){return w(o,D)}:void 0,onFocus:_?function(){return _(o)}:void 0,onMouseOver:_?function(){return _(o)}:void 0,style:x,type:"button",children:[u?c.jsx("abbr",{"aria-label":u(d,o),children:s}):s,M]})}var Du=function(){return Du=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Du.apply(this,arguments)},j_=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s},kf="react-calendar__century-view__decades__decade";function E_(n){var t=n.classes,s=t===void 0?[]:t,i=n.currentCentury,o=n.formatYear,u=o===void 0?uo:o,d=j_(n,["classes","currentCentury","formatYear"]),p=d.date,m=d.locale,g=[];return s&&g.push.apply(g,s),g.push(kf),ms(p).getFullYear()!==i&&g.push("".concat(kf,"--neighboringCentury")),c.jsx(ho,Du({},d,{classes:g,maxDateTransform:oo,minDateTransform:Yr,view:"century",children:Np(m,u,p)}))}var Pu=function(){return Pu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Pu.apply(this,arguments)},Sf=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s};function T_(n){var t=n.activeStartDate,s=n.hover,i=n.showNeighboringCentury,o=n.value,u=n.valueType,d=Sf(n,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),p=l_(t),m=p+(i?119:99);return c.jsx(co,{className:"react-calendar__century-view__decades",dateTransform:Yr,dateType:"decade",end:m,hover:s,renderTile:function(g){var v=g.date,w=Sf(g,["date"]);return c.jsx(E_,Pu({},d,w,{activeStartDate:t,currentCentury:p,date:v}),v.getTime())},start:p,step:10,value:o,valueType:u})}var Au=function(){return Au=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Au.apply(this,arguments)};function C_(n){function t(){return c.jsx(T_,Au({},n))}return c.jsx("div",{className:"react-calendar__century-view",children:t()})}var Iu=function(){return Iu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Iu.apply(this,arguments)},N_=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s},jf="react-calendar__decade-view__years__year";function R_(n){var t=n.classes,s=t===void 0?[]:t,i=n.currentDecade,o=n.formatYear,u=o===void 0?uo:o,d=N_(n,["classes","currentDecade","formatYear"]),p=d.date,m=d.locale,g=[];return s&&g.push.apply(g,s),g.push(jf),Yr(p).getFullYear()!==i&&g.push("".concat(jf,"--neighboringDecade")),c.jsx(ho,Iu({},d,{classes:g,maxDateTransform:lo,minDateTransform:gs,view:"decade",children:u(m,p)}))}var Lu=function(){return Lu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Lu.apply(this,arguments)},Ef=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s};function O_(n){var t=n.activeStartDate,s=n.hover,i=n.showNeighboringDecade,o=n.value,u=n.valueType,d=Ef(n,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),p=u_(t),m=p+(i?11:9);return c.jsx(co,{className:"react-calendar__decade-view__years",dateTransform:gs,dateType:"year",end:m,hover:s,renderTile:function(g){var v=g.date,w=Ef(g,["date"]);return c.jsx(R_,Lu({},d,w,{activeStartDate:t,currentDecade:p,date:v}),v.getTime())},start:p,value:o,valueType:u})}var Mu=function(){return Mu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Mu.apply(this,arguments)};function D_(n){function t(){return c.jsx(O_,Mu({},n))}return c.jsx("div",{className:"react-calendar__decade-view",children:t()})}var $u=function(){return $u=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},$u.apply(this,arguments)},P_=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s},Tf=function(n,t,s){if(s||arguments.length===2)for(var i=0,o=t.length,u;i<o;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return n.concat(u||Array.prototype.slice.call(t))},A_="react-calendar__year-view__months__month";function I_(n){var t=n.classes,s=t===void 0?[]:t,i=n.formatMonth,o=i===void 0?n_:i,u=n.formatMonthYear,d=u===void 0?jp:u,p=P_(n,["classes","formatMonth","formatMonthYear"]),m=p.date,g=p.locale;return c.jsx(ho,$u({},p,{classes:Tf(Tf([],s,!0),[A_],!1),formatAbbr:d,maxDateTransform:Ei,minDateTransform:bn,view:"year",children:o(g,m)}))}var Uu=function(){return Uu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Uu.apply(this,arguments)},Cf=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s};function L_(n){var t=n.activeStartDate,s=n.hover,i=n.value,o=n.valueType,u=Cf(n,["activeStartDate","hover","value","valueType"]),d=0,p=11,m=Me(t);return c.jsx(co,{className:"react-calendar__year-view__months",dateTransform:function(g){var v=new Date;return v.setFullYear(m,g,1),bn(v)},dateType:"month",end:p,hover:s,renderTile:function(g){var v=g.date,w=Cf(g,["date"]);return c.jsx(I_,Uu({},u,w,{activeStartDate:t,date:v}),v.getTime())},start:d,value:i,valueType:o})}var zu=function(){return zu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},zu.apply(this,arguments)};function M_(n){function t(){return c.jsx(L_,zu({},n))}return c.jsx("div",{className:"react-calendar__year-view",children:t()})}var Bu=function(){return Bu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Bu.apply(this,arguments)},$_=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s},mu="react-calendar__month-view__days__day";function U_(n){var t=n.calendarType,s=n.classes,i=s===void 0?[]:s,o=n.currentMonthIndex,u=n.formatDay,d=u===void 0?t_:u,p=n.formatLongDate,m=p===void 0?r_:p,g=$_(n,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),v=g.date,w=g.locale,_=[];return i&&_.push.apply(_,i),_.push(mu),Rp(v,t)&&_.push("".concat(mu,"--weekend")),v.getMonth()!==o&&_.push("".concat(mu,"--neighboringMonth")),c.jsx(ho,Bu({},g,{classes:_,formatAbbr:m,maxDateTransform:sc,minDateTransform:Ti,view:"month",children:d(w,v)}))}var Fu=function(){return Fu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Fu.apply(this,arguments)},Nf=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s};function z_(n){var t=n.activeStartDate,s=n.calendarType,i=n.hover,o=n.showFixedNumberOfWeeks,u=n.showNeighboringMonth,d=n.value,p=n.valueType,m=Nf(n,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),g=Me(t),v=Jr(t),w=o||u,_=wi(t,s),x=w?0:_,j=(w?-_:0)+1,R=(function(){if(o)return j+42-1;var k=Sp(t);if(u){var T=new Date;T.setFullYear(g,v,k),T.setHours(0,0,0,0);var B=7-wi(T,s)-1;return k+B}return k})();return c.jsx(co,{className:"react-calendar__month-view__days",count:7,dateTransform:function(k){var T=new Date;return T.setFullYear(g,v,k),Ti(T)},dateType:"day",hover:i,end:R,renderTile:function(k){var T=k.date,B=Nf(k,["date"]);return c.jsx(U_,Fu({},m,B,{activeStartDate:t,calendarType:s,currentMonthIndex:v,date:T}),T.getTime())},offset:x,start:j,value:d,valueType:p})}var Dp="react-calendar__month-view__weekdays",gu="".concat(Dp,"__weekday");function B_(n){for(var t=n.calendarType,s=n.formatShortWeekday,i=s===void 0?s_:s,o=n.formatWeekday,u=o===void 0?i_:o,d=n.locale,p=n.onMouseLeave,m=new Date,g=bn(m),v=Me(g),w=Jr(g),_=[],x=1;x<=7;x+=1){var j=new Date(v,w,x-wi(g,t)),R=u(d,j);_.push(c.jsx("div",{className:io(gu,v_(j)&&"".concat(gu,"--current"),Rp(j,t)&&"".concat(gu,"--weekend")),children:c.jsx("abbr",{"aria-label":R,title:R,children:i(d,j).replace(".","")})},x))}return c.jsx(ac,{className:Dp,count:7,onFocus:p,onMouseOver:p,children:_})}var to=function(){return to=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},to.apply(this,arguments)},Rf=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s},Of="react-calendar__tile";function F_(n){var t=n.onClickWeekNumber,s=n.weekNumber,i=c.jsx("span",{children:s});if(t){var o=n.date,u=n.onClickWeekNumber,d=n.weekNumber,p=Rf(n,["date","onClickWeekNumber","weekNumber"]);return c.jsx("button",to({},p,{className:Of,onClick:function(m){return u(d,o,m)},type:"button",children:i}))}else{n.date,n.onClickWeekNumber,n.weekNumber;var p=Rf(n,["date","onClickWeekNumber","weekNumber"]);return c.jsx("div",to({},p,{className:Of,children:i}))}}function W_(n){var t=n.activeStartDate,s=n.calendarType,i=n.onClickWeekNumber,o=n.onMouseLeave,u=n.showFixedNumberOfWeeks,d=(function(){if(u)return 6;var g=Sp(t),v=wi(t,s),w=g-(7-v);return 1+Math.ceil(w/7)})(),p=(function(){for(var g=Me(t),v=Jr(t),w=ao(t),_=[],x=0;x<d;x+=1)_.push(Ou(new Date(g,v,w+x*7),s));return _})(),m=p.map(function(g){return c_(g,s)});return c.jsx(ac,{className:"react-calendar__month-view__weekNumbers",count:d,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:m.map(function(g,v){var w=p[v];if(!w)throw new Error("date is not defined");return c.jsx(F_,{date:w,onClickWeekNumber:i,weekNumber:g},g)})})}var Wu=function(){return Wu=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Wu.apply(this,arguments)},V_=function(n,t){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(s[i[o]]=n[i[o]]);return s};function q_(n){if(n)for(var t=0,s=Object.entries(q1);t<s.length;t++){var i=s[t],o=i[0],u=i[1];if(u.includes(n))return o}return lt.ISO_8601}function H_(n){var t=n.activeStartDate,s=n.locale,i=n.onMouseLeave,o=n.showFixedNumberOfWeeks,u=n.calendarType,d=u===void 0?q_(s):u,p=n.formatShortWeekday,m=n.formatWeekday,g=n.onClickWeekNumber,v=n.showWeekNumbers,w=V_(n,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function _(){return c.jsx(B_,{calendarType:d,formatShortWeekday:p,formatWeekday:m,locale:s,onMouseLeave:i})}function x(){return v?c.jsx(W_,{activeStartDate:t,calendarType:d,onClickWeekNumber:g,onMouseLeave:i,showFixedNumberOfWeeks:o}):null}function j(){return c.jsx(z_,Wu({calendarType:d},w))}var R="react-calendar__month-view";return c.jsx("div",{className:io(R,v?"".concat(R,"--weekNumbers"):""),children:c.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[x(),c.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[_(),j()]})]})})}var fs=function(){return fs=Object.assign||function(n){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},fs.apply(this,arguments)},Va="react-calendar",Ga=["century","decade","year","month"],K_=["decade","year","month","day"],oc=new Date;oc.setFullYear(1,0,1);oc.setHours(0,0,0,0);var G_=new Date(864e13);function ui(n){return n instanceof Date?n:new Date(n)}function Pp(n,t){return Ga.slice(Ga.indexOf(n),Ga.indexOf(t)+1)}function J_(n,t,s){var i=Pp(t,s);return i.indexOf(n)!==-1}function lc(n,t,s){return n&&J_(n,t,s)?n:s}function Ap(n){var t=Ga.indexOf(n);return K_[t]}function Y_(n,t){var s=Array.isArray(n)?n[t]:n;if(!s)return null;var i=ui(s);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(n));return i}function Ip(n,t){var s=n.value,i=n.minDate,o=n.maxDate,u=n.maxDetail,d=Y_(s,t);if(!d)return null;var p=Ap(u),m=(function(){switch(t){case 0:return xn(p,d);case 1:return Tp(p,d);default:throw new Error("Invalid index value: ".concat(t))}})();return x_(m,i,o)}var uc=function(n){return Ip(n,0)},Lp=function(n){return Ip(n,1)},Q_=function(n){return[uc,Lp].map(function(t){return t(n)})};function Mp(n){var t=n.maxDate,s=n.maxDetail,i=n.minDate,o=n.minDetail,u=n.value,d=n.view,p=lc(d,o,s),m=uc({value:u,minDate:i,maxDate:t,maxDetail:s})||new Date;return xn(p,m)}function X_(n){var t=n.activeStartDate,s=n.defaultActiveStartDate,i=n.defaultValue,o=n.defaultView,u=n.maxDate,d=n.maxDetail,p=n.minDate,m=n.minDetail,g=n.value,v=n.view,w=lc(v,m,d),_=t||s;return _?xn(w,_):Mp({maxDate:u,maxDetail:d,minDate:p,minDetail:m,value:g||i,view:v||o})}function yu(n){return n&&(!Array.isArray(n)||n.length===1)}function qa(n,t){return n instanceof Date&&t instanceof Date&&n.getTime()===t.getTime()}var Z_=A.forwardRef(function(t,s){var i=t.activeStartDate,o=t.allowPartialRange,u=t.calendarType,d=t.className,p=t.defaultActiveStartDate,m=t.defaultValue,g=t.defaultView,v=t.formatDay,w=t.formatLongDate,_=t.formatMonth,x=t.formatMonthYear,j=t.formatShortWeekday,R=t.formatWeekday,k=t.formatYear,T=t.goToRangeStartOnSelect,B=T===void 0?!0:T,M=t.inputRef,D=t.locale,H=t.maxDate,K=H===void 0?G_:H,W=t.maxDetail,te=W===void 0?"month":W,de=t.minDate,ee=de===void 0?oc:de,G=t.minDetail,ne=G===void 0?"century":G,q=t.navigationAriaLabel,X=t.navigationAriaLive,O=t.navigationLabel,C=t.next2AriaLabel,F=t.next2Label,P=t.nextAriaLabel,V=t.nextLabel,z=t.onActiveStartDateChange,S=t.onChange,I=t.onClickDay,re=t.onClickDecade,se=t.onClickMonth,fe=t.onClickWeekNumber,ve=t.onClickYear,ke=t.onDrillDown,xe=t.onDrillUp,Ee=t.onViewChange,tt=t.prev2AriaLabel,yr=t.prev2Label,Qr=t.prevAriaLabel,vr=t.prevLabel,$e=t.returnValue,_r=$e===void 0?"start":$e,ft=t.selectRange,wr=t.showDoubleView,ys=t.showFixedNumberOfWeeks,Sn=t.showNavigation,Xr=Sn===void 0?!0:Sn,xr=t.showNeighboringCentury,vs=t.showNeighboringDecade,_s=t.showNeighboringMonth,Ci=_s===void 0?!0:_s,Ni=t.showWeekNumbers,Ri=t.tileClassName,ws=t.tileContent,jn=t.tileDisabled,En=t.value,br=t.view,kr=A.useState(p),fo=kr[0],Zr=kr[1],xs=A.useState(null),po=xs[0],Tn=xs[1],Cn=A.useState(Array.isArray(m)?m.map(function(Se){return Se!==null?ui(Se):null}):m!=null?ui(m):null),en=Cn[0],bs=Cn[1],Nn=A.useState(g),Sr=Nn[0],rr=Nn[1],rt=i||fo||X_({activeStartDate:i,defaultActiveStartDate:p,defaultValue:m,defaultView:g,maxDate:K,maxDetail:te,minDate:ee,minDetail:ne,value:En,view:br}),nt=(function(){var Se=(function(){return ft&&yu(en)?en:En!==void 0?En:en})();return Se?Array.isArray(Se)?Se.map(function(Pe){return Pe!==null?ui(Pe):null}):Se!==null?ui(Se):null:null})(),tn=Ap(te),Re=lc(br||Sr,ne,te),jt=Pp(ne,te),ks=ft?po:null,Rn=jt.indexOf(Re)<jt.length-1,jr=jt.indexOf(Re)>0,On=A.useCallback(function(Se){var Pe=(function(){switch(_r){case"start":return uc;case"end":return Lp;case"range":return Q_;default:throw new Error("Invalid returnValue.")}})();return Pe({maxDate:K,maxDetail:te,minDate:ee,value:Se})},[K,te,ee,_r]),nr=A.useCallback(function(Se,Pe){Zr(Se);var Fe={action:Pe,activeStartDate:Se,value:nt,view:Re};z&&!qa(rt,Se)&&z(Fe)},[rt,z,nt,Re]),Dn=A.useCallback(function(Se,Pe){var Fe=(function(){switch(Re){case"century":return re;case"decade":return ve;case"year":return se;case"month":return I;default:throw new Error("Invalid view: ".concat(Re,"."))}})();Fe&&Fe(Se,Pe)},[I,re,se,ve,Re]),sr=A.useCallback(function(Se,Pe){if(Rn){Dn(Se,Pe);var Fe=jt[jt.indexOf(Re)+1];if(!Fe)throw new Error("Attempted to drill down from the lowest view.");Zr(Se),rr(Fe);var yt={action:"drillDown",activeStartDate:Se,value:nt,view:Fe};z&&!qa(rt,Se)&&z(yt),Ee&&Re!==Fe&&Ee(yt),ke&&ke(yt)}},[rt,Rn,z,Dn,ke,Ee,nt,Re,jt]),Er=A.useCallback(function(){if(jr){var Se=jt[jt.indexOf(Re)-1];if(!Se)throw new Error("Attempted to drill up from the highest view.");var Pe=xn(Se,rt);Zr(Pe),rr(Se);var Fe={action:"drillUp",activeStartDate:Pe,value:nt,view:Se};z&&!qa(rt,Pe)&&z(Fe),Ee&&Re!==Se&&Ee(Fe),xe&&xe(Fe)}},[rt,jr,z,xe,Ee,nt,Re,jt]),Tr=A.useCallback(function(Se,Pe){var Fe=nt;Dn(Se,Pe);var yt=ft&&!yu(Fe),vt;if(ft)if(yt)vt=xn(tn,Se);else{if(!Fe)throw new Error("previousValue is required");if(Array.isArray(Fe))throw new Error("previousValue must not be an array");vt=g_(tn,Fe,Se)}else vt=On(Se);var Pn=!ft||yt||B?Mp({maxDate:K,maxDetail:te,minDate:ee,minDetail:ne,value:vt,view:Re}):null;Pe.persist(),Zr(Pn),bs(vt);var Di={action:"onChange",activeStartDate:Pn,value:vt,view:Re};if(z&&!qa(rt,Pn)&&z(Di),S)if(ft){var go=yu(vt);if(!go)S(vt||null,Pe);else if(o){if(Array.isArray(vt))throw new Error("value must not be an array");S([vt||null,null],Pe)}}else S(vt||null,Pe)},[rt,o,On,B,K,te,ee,ne,z,S,Dn,ft,nt,tn,Re]);function Ss(Se){Tn(Se)}function js(){Tn(null)}A.useImperativeHandle(s,function(){return{activeStartDate:rt,drillDown:sr,drillUp:Er,onChange:Tr,setActiveStartDate:nr,value:nt,view:Re}},[rt,sr,Er,Tr,nr,nt,Re]);function Oi(Se){var Pe=Se?Ep(Re,rt):xn(Re,rt),Fe=Rn?sr:Tr,yt={activeStartDate:Pe,hover:ks,locale:D,maxDate:K,minDate:ee,onClick:Fe,onMouseOver:ft?Ss:void 0,tileClassName:Ri,tileContent:ws,tileDisabled:jn,value:nt,valueType:tn};switch(Re){case"century":return c.jsx(C_,fs({formatYear:k,showNeighboringCentury:xr},yt));case"decade":return c.jsx(D_,fs({formatYear:k,showNeighboringDecade:vs},yt));case"year":return c.jsx(M_,fs({formatMonth:_,formatMonthYear:x},yt));case"month":return c.jsx(H_,fs({calendarType:u,formatDay:v,formatLongDate:w,formatShortWeekday:j,formatWeekday:R,onClickWeekNumber:fe,onMouseLeave:ft?js:void 0,showFixedNumberOfWeeks:typeof ys<"u"?ys:wr,showNeighboringMonth:Ci,showWeekNumbers:Ni},yt));default:throw new Error("Invalid view: ".concat(Re,"."))}}function mo(){return Xr?c.jsx(__,{activeStartDate:rt,drillUp:Er,formatMonthYear:x,formatYear:k,locale:D,maxDate:K,minDate:ee,navigationAriaLabel:q,navigationAriaLive:X,navigationLabel:O,next2AriaLabel:C,next2Label:F,nextAriaLabel:P,nextLabel:V,prev2AriaLabel:tt,prev2Label:yr,prevAriaLabel:Qr,prevLabel:vr,setActiveStartDate:nr,showDoubleView:wr,view:Re,views:jt}):null}var ir=Array.isArray(nt)?nt:[nt];return c.jsxs("div",{className:io(Va,ft&&ir.length===1&&"".concat(Va,"--selectRange"),wr&&"".concat(Va,"--doubleView"),d),ref:M,children:[mo(),c.jsxs("div",{className:"".concat(Va,"__viewContainer"),onBlur:ft?js:void 0,onMouseLeave:ft?js:void 0,children:[Oi(),wr?Oi(!0):null]})]})});const ew=({routine:n,onClose:t,onAssign:s})=>{const{session:i}=gt(),[o,u]=A.useState(new Date),[d,p]=A.useState(null),[m,g]=A.useState(new Date),[v,w]=A.useState([]),[_,x]=A.useState([]),[j,R]=A.useState(!1),[k,T]=A.useState(!1),B=n?.cycle_length||7;A.useEffect(()=>{i?.user?.id&&we.fetchRoutineHistory(i.user.id).then(w)},[i]);const M=(ee,G)=>ee&&G&&ee.getFullYear()===G.getFullYear()&&ee.getMonth()===G.getMonth()&&ee.getDate()===G.getDate(),D=ee=>{if(o&&d){if(M(ee,d)){p(null);return}if(M(ee,o)){u(null),p(null);return}u(ee),p(null);return}if(o&&!d){if(M(ee,o)){u(null);return}if(ee<o){u(ee);return}p(ee);return}u(ee)},H=()=>{g(new Date(m.getFullYear(),m.getMonth()-1,1))},K=()=>{g(new Date(m.getFullYear(),m.getMonth()+1,1))},W=({date:ee,view:G})=>{if(G!=="month")return null;if(M(ee,o))return M(ee,d)?"tile-range-start tile-range-end":"tile-range-start";if(M(ee,d))return"tile-range-end";if(o&&d&&ee>o&&ee<d)return"tile-range-middle";if(v.some(q=>{const X=new Date(q.cycle_start_date);X.setHours(0,0,0,0);const O=q.cycle_end_date?new Date(q.cycle_end_date):null;return O&&O.setHours(0,0,0,0),O?ee>=X&&ee<=O:ee.getTime()>=X.getTime()}))return"tile-booked";if(o&&!d){const q=new Date(o);q.setHours(0,0,0,0);const X=new Date(ee);if(X.setHours(0,0,0,0),X>q){const O=X.getTime()-q.getTime();if((Math.round(O/(1e3*60*60*24))+1)%B===0)return"suggested-end-date"}}return null},te=()=>{if(!o||!d)return;const ee=new Date(o);ee.setHours(0,0,0,0);const G=new Date(d);G.setHours(0,0,0,0);const ne=v.filter(q=>{const X=new Date(q.cycle_start_date);X.setHours(0,0,0,0);const O=q.cycle_end_date?new Date(q.cycle_end_date):null;O&&O.setHours(0,0,0,0);const C=X<=G,F=!O||O>=ee;return C&&F});ne.length>0?(x(ne),R(!0)):de("NORMAL")},de=async ee=>{if(ee==="REJECT"){R(!1);return}T(!0);const G=q=>{const X=q.getTimezoneOffset();return new Date(q.getTime()-X*60*1e3).toISOString().split("T")[0]},ne={routineId:n.id,start:G(o),end:G(d)};if(ee==="NORMAL")await s(n.id,ne.start,ne.end);else if(ee==="SHIFT_NEW"){const q=Math.max(..._.map(F=>F.cycle_end_date?new Date(F.cycle_end_date).getTime():new Date(F.cycle_start_date).getTime())),X=new Date(q+864e5),O=d.getTime()-o.getTime(),C=new Date(X.getTime()+O);await s(n.id,G(X),G(C))}else await we.resolveRoutineConflict(i.user.id,ee,ne,_),window.location.reload();T(!1),t()};return c.jsxs("div",{className:"fixed inset-0 bg-black/95 z-50 flex flex-col items-center justify-center p-4 backdrop-blur-md",children:[c.jsxs("div",{className:"bg-[#111] w-full max-w-md rounded-2xl border border-[#333] shadow-2xl overflow-hidden flex flex-col max-h-[95vh]",children:[c.jsxs("div",{className:"p-4 border-b border-[#222] bg-[#1a1a1a] flex justify-between items-center",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.15em] text-[var(--training-accent)] mb-0.5",children:"Assign Routine"}),c.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:n.name})]}),c.jsx("button",{onClick:t,className:"action-btn",style:{background:"#222",border:"1px solid #444"},children:"Cancel"})]}),c.jsxs("div",{className:"p-4 overflow-y-auto flex-1 custom-scrollbar",children:[c.jsx("div",{className:"bg-[#1a1a1a] p-3 rounded-xl border-l-2 border-[var(--training-accent)] mb-6",children:c.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed font-medium",children:["Select ",c.jsx("span",{className:"text-[var(--training-accent)] font-bold",children:"Start"})," & ",c.jsx("span",{className:"text-[var(--training-accent)] font-bold",children:"End"})," dates.",c.jsx("br",{}),c.jsx("span",{className:"text-[var(--nutrition-accent)] font-bold",children:""})," marks optimal cycle completion."]})}),c.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[c.jsx("button",{onClick:H,className:"timer-icon-btn",style:{width:"32px",height:"32px",border:"1px solid #444",color:"#888"},children:c.jsx(Qu,{size:18})}),c.jsx("span",{className:"text-white font-black uppercase tracking-widest text-xs",children:m.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:K,className:"timer-icon-btn",style:{width:"32px",height:"32px",border:"1px solid #444",color:"#888"},children:c.jsx(Xu,{size:18})})]}),c.jsx("div",{className:"w-full mb-6",children:c.jsx(Z_,{onClickDay:D,value:null,activeStartDate:m,showNavigation:!1,tileClassName:W})}),c.jsxs("div",{className:"flex justify-center gap-6 text-[9px] uppercase font-bold text-gray-500 mb-2 tracking-wide",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-[var(--training-accent)]"}),c.jsx("span",{children:"Selection"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2.5 h-2.5 rounded-sm border border-blue-500/50 bg-blue-500/10"}),c.jsx("span",{children:"Booked"})]})]})]}),c.jsxs("div",{className:"p-5 border-t border-[#222] bg-[#1a1a1a]",children:[c.jsxs("div",{className:"flex justify-between items-center mb-5",children:[c.jsx("div",{className:"text-[10px] uppercase font-bold text-gray-500 tracking-wider",children:"Total Duration"}),c.jsxs("div",{className:"px-3 py-1 bg-black rounded-md border border-[#333]",children:[c.jsx("span",{className:"text-sm font-black text-white font-mono",children:o&&d?Math.ceil((d-o)/864e5)+1:0}),c.jsx("span",{className:"text-[10px] ml-1 text-gray-500 font-bold uppercase",children:"Days"})]})]}),c.jsxs("button",{onClick:te,disabled:!o||!d||k,className:`w-full py-4 rounded-xl font-black uppercase tracking-[0.15em] text-xs transition-all shadow-lg flex items-center justify-center gap-2 ${!o||!d||k?"bg-[#222] text-gray-600 cursor-not-allowed border border-[#333]":"bg-[var(--training-accent)] text-black hover:opacity-90 border border-[var(--training-accent)]"}`,children:[k?c.jsx(ap,{className:"animate-spin",size:16}):c.jsx(vi,{size:16}),k?"Syncing...":"Confirm"]})]})]}),j&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl animate-in fade-in duration-300",children:c.jsxs("div",{className:"bg-[#111] border border-red-500/30 rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"p-5 bg-red-900/10 flex items-center gap-4 border-b border-red-500/20",children:[c.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg text-red-500",children:c.jsx(rp,{size:24})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white font-black uppercase text-sm tracking-wider",children:"Schedule Conflict"}),c.jsx("p",{className:"text-[10px] text-red-400 font-bold uppercase tracking-wide",children:"Overlap Detected"})]})]}),c.jsxs("div",{className:"p-5 space-y-5",children:[c.jsx("div",{className:"space-y-2",children:_.map(ee=>c.jsxs("div",{className:"bg-black p-3 rounded-lg border border-[#333] flex justify-between items-center",children:[c.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:ee.routines?.name}),c.jsx("div",{className:"text-[10px] text-[var(--training-accent)] font-mono",children:new Date(ee.cycle_start_date).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]},ee.id))}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("button",{onClick:()=>de("OVERWRITE_OVERLAP"),className:"w-full p-4 bg-[#1a1a1a] hover:bg-[#222] border border-[#333] rounded-xl text-left transition-all group hover:border-[var(--training-accent)]",children:[c.jsx("div",{className:"text-[10px] font-black text-white uppercase tracking-widest mb-1 group-hover:text-[var(--training-accent)]",children:"Overwrite"}),c.jsx("div",{className:"text-[10px] text-gray-500",children:"Replace conflicting days."})]}),c.jsxs("button",{onClick:()=>de("PUSH_EXISTING"),className:"w-full p-4 bg-[#1a1a1a] hover:bg-[#222] border border-[#333] rounded-xl text-left transition-all group hover:border-[var(--nutrition-accent)]",children:[c.jsx("div",{className:"text-[10px] font-black text-white uppercase tracking-widest mb-1 group-hover:text-[var(--nutrition-accent)]",children:"Push Existing"}),c.jsx("div",{className:"text-[10px] text-gray-500",children:"Shift old routine forward."})]}),c.jsxs("button",{onClick:()=>de("SHIFT_NEW"),className:"w-full p-4 bg-[#1a1a1a] hover:bg-[#222] border border-[#333] rounded-xl text-left transition-all group hover:border-blue-400",children:[c.jsx("div",{className:"text-[10px] font-black text-white uppercase tracking-widest mb-1 group-hover:text-blue-400",children:"Shift New"}),c.jsx("div",{className:"text-[10px] text-gray-500",children:"Move this to next open slot."})]}),c.jsxs("button",{onClick:()=>de("DELETE_EXISTING"),className:"w-full p-4 bg-red-900/10 hover:bg-red-900/20 border border-red-900/30 rounded-xl text-left transition-all group",children:[c.jsx("div",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest mb-1",children:"Delete Legacy"}),c.jsx("div",{className:"text-[10px] text-red-400/50",children:"Remove conflicting routine."})]}),c.jsx("button",{onClick:()=>de("REJECT"),className:"w-full pt-4 bg-transparent text-gray-600 text-[10px] font-black uppercase tracking-widest text-center hover:text-white transition-colors",children:"Cancel"})]})]})]})})]})},tw=({onCreate:n,onCancel:t})=>{const[s,i]=A.useState(""),o=()=>{s.trim()&&(n(s),i(""))};return c.jsx("div",{className:"card mb-6",style:{borderTop:"2px solid var(--training-accent)"},children:c.jsxs("div",{className:"card-content",children:[c.jsx("h3",{className:"text-xs font-bold mb-3 uppercase text-gray-500",children:"Create New Routine"}),c.jsx("input",{className:"auth-input mb-3",style:{background:"#0a0a0a",borderColor:"#333"},placeholder:"Routine Name (e.g. Hypertrophy v2)",value:s,onChange:u=>i(u.target.value),autoFocus:!0}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:o,className:"auth-button flex-1 py-2 text-sm",style:{marginTop:0},children:"Create"}),c.jsx("button",{onClick:t,className:"auth-button flex-1 py-2 text-sm",style:{marginTop:0,background:"#222",color:"#ccc",border:"1px solid #444"},children:"Cancel"})]})]})})},rw=({r:n,activeId:t,onActivate:s,onEdit:i,onDelete:o})=>{const u=t===n.id;return c.jsx("div",{className:`card ${u?"active-routine-card":""}`,style:{borderLeft:u?"4px solid #2ecc71":"1px solid #333"},children:c.jsxs("div",{className:"card-content",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"font-bold text-white text-lg",children:n.name}),n.is_system_default&&c.jsx("span",{className:"text-[9px] bg-[#333] text-gray-400 px-1.5 py-0.5 rounded uppercase font-bold tracking-wider",children:"Default"})]}),c.jsxs("div",{className:"text-xs text-gray-500 font-mono mt-1",children:[n.cycle_length||7," DAY CYCLE"]})]}),u&&c.jsxs("div",{className:"flex items-center gap-1 text-[#2ecc71] text-xs font-bold uppercase bg-[#2ecc7120] px-2 py-1 rounded",children:[c.jsx(Pv,{size:12})," Active"]})]}),c.jsx("p",{className:"text-sm text-gray-400 mb-4 leading-relaxed",children:n.description||"No description provided."}),c.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-[#222]",children:[c.jsx("button",{onClick:()=>s(n),className:"action-btn flex-1 justify-center py-2",style:{background:"#222",color:"#fff",border:"1px solid #444"},children:"Assign Routine"}),c.jsx("button",{onClick:()=>i(n.id),className:"action-btn flex-1 justify-center py-2",style:{background:"#222",color:"var(--training-accent)",border:"1px solid #444"},children:"Edit Split"}),!n.is_system_default&&c.jsx("button",{onClick:()=>o(n.id),className:"action-btn px-3 py-2",style:{background:"#2a1a1a",color:"#e74c3c",border:"1px solid #4a2a2a"},children:c.jsx(ki,{size:16})})]})]})})},nw=()=>{const{session:n}=gt(),[t,s]=A.useState([]),[i,o]=A.useState(null),[u,d]=A.useState(!0),[p,m]=A.useState(!1),[g,v]=A.useState(null),[w,_]=A.useState(null),x=async()=>{if(!n?.user?.id)return;d(!0);const[T,B]=await Promise.all([we.listRoutines(n.user.id),we.getActiveRoutineId(n.user.id)]);s(T),o(B),d(!1)};A.useEffect(()=>{x()},[n]);const j=async(T,B,M)=>{await we.activateRoutine(n.user.id,T,B,M),o(T),_(null),window.location.reload()},R=async T=>{const B=await we.createRoutine(n.user.id,T);B&&(s([...t,B]),m(!1))},k=async T=>{confirm("Delete this routine?")&&(await we.deleteRoutine(T),s(t.filter(B=>B.id!==T)))};return g?c.jsx(w1,{routineId:g,onClose:()=>{v(null),x()}}):w?c.jsx(ew,{routine:w,onClose:()=>_(null),onAssign:j}):u?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading routines..."}):c.jsxs("div",{className:"p-4 pb-24 text-white",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"section-title mb-0",children:"My Routines"}),c.jsxs("button",{onClick:()=>m(!0),className:"action-btn",style:{background:"var(--training-accent)",color:"#000",border:"none"},children:[c.jsx(Za,{size:16})," New"]})]}),p&&c.jsx(tw,{onCreate:R,onCancel:()=>m(!1)}),c.jsx("div",{className:"space-y-4",children:t.map(T=>c.jsx(rw,{r:T,activeId:i,onActivate:_,onEdit:v,onDelete:k},T.id))})]})},sw=()=>{const{session:n,timerState:t,setTimerState:s}=gt(),[i,o]=A.useState(60),[u,d]=A.useState("default"),[p,m]=A.useState("week"),[g,v]=A.useState(localStorage.getItem("mp_use_mock_db")==="true"),[w,_]=A.useState({requests:0,egressBytes:0,logs:[]}),[x,j]=A.useState(!1);A.useEffect(()=>{n?.user?.id&&we.getProfile(n.user.id).then(D=>{D?.theme_preference&&d(D.theme_preference),D?.navigation_mode&&m(D.navigation_mode)})},[n]),A.useEffect(()=>{if(!g)return;const D=()=>{try{const K=JSON.parse(localStorage.getItem("mock_monitor_stats")||'{"requests":0,"egressBytes":0,"logs":[]}');_(K)}catch{}};D();const H=setInterval(D,1e3);return()=>clearInterval(H)},[g]);const R=async D=>{d(D),document.documentElement.setAttribute("data-theme",D),n?.user?.id&&await we.saveProfile(n.user.id,{theme_preference:D})},k=async D=>{m(D),localStorage.setItem("mp_nav_mode",D),n?.user?.id&&await we.saveProfile(n.user.id,{navigation_mode:D}),window.location.reload()},T=()=>{if(g){if(!confirm("Disable Offline Mode? App will reload and connect to Supabase."))return;localStorage.setItem("mp_use_mock_db","false"),sessionStorage.setItem("mp_is_temp_online","true")}else{if(!confirm("Enable Development Mode (Offline/Mock)? App will reload using local data only."))return;localStorage.setItem("mp_use_mock_db","true"),sessionStorage.removeItem("mp_is_temp_online")}window.location.reload()},B=()=>{confirm("Are you sure? This will clear local logs and checkboxes. Cloud data is safe.")&&(localStorage.clear(),window.location.reload())},M=()=>{"serviceWorker"in navigator&&"PushManager"in window&&Notification.requestPermission().then(D=>{D==="granted"?new Notification("Master Plan",{body:"Notifications are working!"}):alert("Notifications blocked. Please enable them in browser settings.")})};return c.jsxs("div",{className:"pb-24 pt-4 px-4 text-white",children:[c.jsx("h2",{className:"section-title mb-6",children:"Settings"}),c.jsx("div",{className:"card mb-6",style:{borderTop:"2px solid #555"},children:c.jsxs("div",{className:"card-content",children:[c.jsx("div",{className:"card-title text-sm text-gray-400 uppercase",children:"Account"}),c.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-xl font-bold text-gray-400",children:n?.user?.email?.[0].toUpperCase()}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold",children:n?.user?.email}),c.jsxs("div",{className:"text-xs text-gray-500",children:["User ID: ",n?.user?.id?.substring(0,8),"..."]})]})]})]})}),c.jsx("div",{className:"card mb-6",style:{borderTop:"2px solid #3498db"},children:c.jsxs("div",{className:"card-content",children:[c.jsxs("div",{className:"card-title text-sm text-gray-400 uppercase flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Yv,{size:16})," Connection Mode"]}),c.jsx("div",{className:"px-2 py-0.5 rounded text-[10px] font-bold border tracking-wider",style:{borderColor:g?"#3498db":"#2ecc71",color:g?"#3498db":"#2ecc71"},children:g?"OFFLINE":"ONLINE"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("button",{onClick:T,className:"action-btn w-full justify-center py-3",style:{border:"1px solid #444",background:"#222"},children:["Switch to ",g?"Online Mode":"Offline Mode"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:g?"Data is saved locally on this device only.":"Data is synced to the cloud."}),g&&c.jsxs("div",{className:"mt-4 p-3 bg-black rounded border border-gray-800 text-xs font-mono text-gray-400",children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{children:"Requests:"}),c.jsx("span",{className:"text-white font-bold",children:w.requests})]}),c.jsxs("div",{className:"flex justify-between mb-3",children:[c.jsx("span",{children:"Egress (Est):"}),c.jsxs("span",{className:"text-white font-bold",children:[(w.egressBytes/1024).toFixed(2)," KB"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>j(!x),className:"action-btn flex-1 justify-center py-2",children:x?"Hide Logs":"View Logs"}),c.jsx("button",{onClick:()=>{localStorage.removeItem("mock_db"),window.location.reload()},className:"action-btn flex-1 justify-center py-2",style:{borderColor:"#e67e22",color:"#e67e22"},children:"Reset Mock Data"})]}),x&&c.jsx("div",{className:"mt-3 border-t border-gray-800 pt-2 h-40 overflow-y-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-gray-600",children:[c.jsx("th",{children:"Type"}),c.jsx("th",{children:"Table"}),c.jsx("th",{className:"text-right",children:"Size"})]})}),c.jsx("tbody",{children:(w.logs||[]).map(D=>c.jsxs("tr",{className:"border-b border-gray-900",children:[c.jsx("td",{className:`py-1 ${D.type==="SELECT"?"text-blue-400":"text-orange-400"}`,children:D.type}),c.jsx("td",{className:"py-1 text-gray-500",children:D.table}),c.jsxs("td",{className:"py-1 text-right text-gray-300",children:[D.size,"b"]})]},D.id))})]})})]})]})]})}),c.jsx("div",{className:"card mb-6",style:{borderTop:"2px solid #9b59b6"},children:c.jsxs("div",{className:"card-content",children:[c.jsxs("div",{className:"card-title text-sm text-gray-400 uppercase flex items-center gap-2",children:[c.jsx(Vv,{size:16})," Appearance"]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"text-xs text-gray-500 font-bold uppercase mb-2 block",children:"Theme"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>R("default"),className:`action-btn flex-1 justify-center ${u==="default"?"active-edit":""}`,style:{border:u==="default"?"1px solid #fff":"1px solid #333"},children:"Default"}),c.jsx("button",{onClick:()=>R("material-dark"),className:`action-btn flex-1 justify-center ${u==="material-dark"?"active-edit":""}`,style:{border:u==="material-dark"?"1px solid #fff":"1px solid #333"},children:"Material"})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"text-xs text-gray-500 font-bold uppercase mb-2 block",children:"Navigation Style"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>k("week"),className:`action-btn flex-1 justify-center ${p==="week"?"active-edit":""}`,style:{border:p==="week"?"1px solid #fff":"1px solid #333"},children:"Week Pager"}),c.jsx("button",{onClick:()=>k("continuous"),className:`action-btn flex-1 justify-center ${p==="continuous"?"active-edit":""}`,style:{border:p==="continuous"?"1px solid #fff":"1px solid #333"},children:"Continuous"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'"Week Pager" snaps one week at a time. "Continuous" lets you scroll seamlessly through days.'})]})]})}),c.jsx("div",{className:"card mb-6",style:{borderTop:"2px solid var(--training-accent)"},children:c.jsxs("div",{className:"card-content",children:[c.jsxs("div",{className:"card-title text-sm text-gray-400 uppercase flex items-center gap-2",children:[c.jsx(Av,{size:16})," Timer Defaults"]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"text-sm text-gray-300 block mb-2",children:"Default Rest Interval (Seconds)"}),c.jsx("input",{type:"number",className:"dark-input",value:i,onChange:D=>o(D.target.value),disabled:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Currently, rest times are defined by your specific routine day configuration."})]})]})}),c.jsx("div",{className:"card mb-6",style:{borderTop:"2px solid var(--supplements-accent)"},children:c.jsxs("div",{className:"card-content",children:[c.jsxs("div",{className:"card-title text-sm text-gray-400 uppercase flex items-center gap-2",children:[c.jsx(Nv,{size:16})," Notifications"]}),c.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[c.jsx("button",{onClick:M,className:"action-btn w-full justify-center py-3",children:"Test Local Notification"}),c.jsx("p",{className:"text-xs text-gray-500",children:'Push notifications are handled automatically when the timer runs in the background. Ensure your device is not in "Do Not Disturb" mode.'})]})]})}),c.jsx("div",{className:"card mb-6",style:{borderTop:"2px solid #e74c3c"},children:c.jsxs("div",{className:"card-content",children:[c.jsxs("div",{className:"card-title text-sm text-gray-400 uppercase flex items-center gap-2",children:[c.jsx(rp,{size:16,color:"#e74c3c"})," Danger Zone"]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("button",{onClick:B,className:"logout-btn",style:{color:"#e74c3c",border:"1px solid #333",borderRadius:"8px",justifyContent:"center"},children:[c.jsx(Xv,{size:16})," Clear Local Cache"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Fixes display issues by resetting local storage. Your saved workout data is safe in the cloud."})]})]})}),c.jsxs("div",{className:"text-center mt-8 opacity-50",children:[c.jsx("div",{className:"flex justify-center mb-2",children:c.jsx(zv,{size:24})}),c.jsx("h3",{className:"font-bold text-lg",children:"Master Plan"}),c.jsx("p",{className:"text-xs",children:"Version 1.2.0 (PWA)"}),c.jsx("p",{className:"text-xs mt-1",children:"Built with React + Vite + Supabase"})]})]})},iw=()=>{const{session:n,refreshProfile:t}=gt(),[s,i]=A.useState(!0),[o,u]=A.useState(!1),[d,p]=A.useState({full_name:"",age:"",weight:""});A.useEffect(()=>{n?.user?.id&&we.getProfile(n.user.id).then(g=>{g&&p({full_name:g.full_name||"",age:g.age||"",weight:g.weight||""}),i(!1)})},[n]);const m=async()=>{u(!0),await we.saveProfile(n.user.id,d),await t(n.user.id),u(!1)};return s?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading Profile..."}):c.jsxs("div",{className:"pb-24 pt-4 px-4 text-white",children:[c.jsx("h2",{className:"section-title mb-6",children:"Profile Setup"}),c.jsx("div",{className:"card mb-6",children:c.jsx("div",{className:"card-content",children:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold mb-1 block",children:"Full Name"}),c.jsxs("div",{className:"relative",children:[c.jsx(lp,{className:"absolute left-3 top-3 text-gray-500",size:16}),c.jsx("input",{type:"text",className:"auth-input pl-10",placeholder:"Enter your name",value:d.full_name,onChange:g=>p({...d,full_name:g.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold mb-1 block",children:"Age"}),c.jsxs("div",{className:"relative",children:[c.jsx(Ov,{className:"absolute left-3 top-3 text-gray-500",size:16}),c.jsx("input",{type:"number",className:"auth-input pl-10",placeholder:"Years",value:d.age,onChange:g=>p({...d,age:g.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold mb-1 block",children:"Weight (kg)"}),c.jsxs("div",{className:"relative",children:[c.jsx(Gv,{className:"absolute left-3 top-3 text-gray-500",size:16}),c.jsx("input",{type:"number",className:"auth-input pl-10",placeholder:"Kg",step:"0.1",value:d.weight,onChange:g=>p({...d,weight:g.target.value})})]})]}),c.jsx("button",{onClick:m,disabled:o,className:`auth-button flex items-center justify-center gap-2 ${o?"opacity-70":""}`,children:o?"Saving...":c.jsxs(c.Fragment,{children:[c.jsx(op,{size:18})," Save Profile"]})})]})})}),c.jsxs("div",{className:"text-center text-gray-500 text-xs",children:[c.jsx("p",{children:"These details help tailor your master plan."}),c.jsxs("p",{children:["Email: ",n?.user?.email]})]})]})},aw=()=>{const{session:n,currentDay:t,weekDates:s}=gt(),[i,o]=A.useState(null),[u,d]=A.useState(!1),[p,m]=A.useState(!1),g=s[t]?.fullDate;A.useEffect(()=>{n?.user?.id&&g&&(m(!0),v().finally(()=>m(!1)))},[n,g]);const v=async()=>{const{data:x}=await ue.from("daily_analytics").select("summary").eq("user_id",n.user.id).eq("date",g).maybeSingle();o(x?x.summary:null)},w=async()=>{d(!0);const{data:x,error:j}=await ue.functions.invoke("analyze-day",{body:{date:g,userId:n.user.id}});j&&console.error("Analysis Error:",j),x?.summary&&o(x.summary),x?.error&&console.error("Function Error:",x.error),d(!1)};if(!g)return null;const _=i||u||p;return c.jsx("div",{className:"mx-4 mb-6 mt-2",children:c.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl border border-[#333] relative overflow-hidden shadow-lg",children:[c.jsx("div",{className:"flex justify-center items-center p-3 bg-[#222] border-b border-[#333]",children:c.jsxs("div",{className:"flex items-center gap-2",children:[!i&&!u&&!p&&c.jsx("button",{onClick:w,className:"filter-btn active",style:{backgroundColor:"#8e44ad",borderColor:"#8e44ad",color:"white",padding:"6px 16px",borderRadius:"6px",fontSize:"0.7rem",fontWeight:"700",textTransform:"uppercase",minWidth:"auto"},children:"Ask 4u4o Byu4o"}),(i||u||p)&&c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-[10px] font-bold text-[#8e44ad] uppercase tracking-wider",children:"4yu 4u4o cu kak Tu soBopu"}),c.jsx("button",{onClick:w,className:"text-gray-500 hover:text-white transition-colors p-1",title:"Refresh Analysis",children:c.jsx(ap,{size:14,className:u||p?"animate-spin":""})})]})]})}),_&&c.jsxs("div",{className:"p-4 relative min-h-[80px] flex items-center",children:[c.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:"radial-gradient(#fff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),c.jsx("div",{className:"relative z-10 w-full",children:u||p?c.jsxs("div",{className:"flex justify-center items-center gap-8 py-4",children:[c.jsx(Rv,{size:32,fill:"#8e44ad",stroke:"#000",strokeWidth:1,className:"animate-brain"}),c.jsx("span",{className:"text-sm font-black uppercase tracking-[0.2em] text-[#8e44ad] animate-pulse",children:u?"Thinking...":"Checking..."})]}):c.jsxs("div",{className:"text-gray-300 text-sm font-medium leading-relaxed italic border-l-2 border-[#8e44ad] pl-3",children:['"',i,'"']})})]})]})})},ow=JSON.parse('[{"id":25,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Wide Grip Lat Pulldown","weight":"45","reps":12,"rpe":8,"tempo":null,"logged_at":"2026-01-08T12:32:57.353000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":26,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Wide Grip Lat Pulldown","weight":"45","reps":12,"rpe":9,"tempo":null,"logged_at":"2026-01-08T12:36:24.908000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":27,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Wide Grip Lat Pulldown","weight":"45","reps":12,"rpe":8,"tempo":null,"logged_at":"2026-01-08T12:39:11.848000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":28,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Wide Grip Lat Pulldown","weight":"45","reps":12,"rpe":9,"tempo":null,"logged_at":"2026-01-08T12:42:06.074000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":29,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Seated Cable Row (V-Grip)","weight":"30","reps":12,"rpe":7,"tempo":null,"logged_at":"2026-01-08T12:44:36.400000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":30,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Seated Cable Row (V-Grip)","weight":"35","reps":12,"rpe":9,"tempo":null,"logged_at":"2026-01-08T12:47:46.626000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":31,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Seated Cable Row (V-Grip)","weight":"35","reps":12,"rpe":9,"tempo":null,"logged_at":"2026-01-08T12:51:18.104000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":32,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Seated Cable Row (V-Grip)","weight":"35","reps":12,"rpe":10,"tempo":null,"logged_at":"2026-01-08T12:54:14.193000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":33,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"One Arm Dumbbell Row","weight":"17.5","reps":10,"rpe":8,"tempo":null,"logged_at":"2026-01-08T13:00:10.571000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":34,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"One Arm Dumbbell Row","weight":"17.5","reps":10,"rpe":9,"tempo":null,"logged_at":"2026-01-08T13:06:28.522000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":35,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"One Arm Dumbbell Row","weight":"17.5","reps":10,"rpe":9,"tempo":null,"logged_at":"2026-01-08T13:13:09.267000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":36,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Face Pulls","weight":"7.5","reps":15,"rpe":10,"tempo":null,"logged_at":"2026-01-08T13:21:57.265000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":37,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Face Pulls","weight":"6","reps":20,"rpe":10,"tempo":null,"logged_at":"2026-01-08T13:25:41.122000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":38,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Face Pulls","weight":"6","reps":20,"rpe":10,"tempo":null,"logged_at":"2026-01-08T13:31:07.023000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":46,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Ab Wheel Rollout","weight":"BW","reps":12,"rpe":10,"tempo":null,"logged_at":"2026-01-08T20:24:17.197000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":69,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Standing DB Shoulder Press - Circuit","weight":"12.5","reps":12,"rpe":10,"tempo":null,"logged_at":"2026-01-11T13:03:50.645000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":70,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Kettlebell/DB Swings - Circuit","weight":"20","reps":25,"rpe":10,"tempo":null,"logged_at":"2026-01-11T13:04:04.482000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":71,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Cable Crunches - Core Finisher","weight":"22","reps":15,"rpe":10,"tempo":null,"logged_at":"2026-01-11T13:16:23.781000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":72,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Cable Crunches - Core Finisher","weight":"55","reps":15,"rpe":10,"tempo":null,"logged_at":"2026-01-11T13:16:40.913000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":73,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Cable Crunches - Core Finisher","weight":"55","reps":15,"rpe":10,"tempo":null,"logged_at":"2026-01-11T13:16:47.896000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":74,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Active Recovery","weight":"-","reps":1,"rpe":6,"tempo":"","logged_at":"2026-01-11T21:29:05.125000+00:00","day_key":"mon","scheduled_for":"2026-01-05","duration_minutes":90,"intensity":null},{"id":77,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Active Recovery","weight":"-","reps":1,"rpe":null,"tempo":"","logged_at":"2026-01-11T22:15:03.148000+00:00","day_key":"mon","scheduled_for":"2026-01-05","duration_minutes":90,"intensity":60},{"id":76,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Goblet Squats","weight":"25","reps":12,"rpe":8,"tempo":"3110","logged_at":"2026-01-11T21:43:46.137000+00:00","day_key":"tue","scheduled_for":"2026-01-06","duration_minutes":null,"intensity":null},{"id":45,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Flat Dumbbell Press","weight":"25","reps":12,"rpe":8,"tempo":null,"logged_at":"2026-01-08T17:35:27.083000+00:00","day_key":"wed","scheduled_for":"2026-01-07","duration_minutes":null,"intensity":null},{"id":39,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Incline Dumbbell Curl","weight":"6","reps":12,"rpe":8,"tempo":null,"logged_at":"2026-01-08T13:33:56.610000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":40,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Incline Dumbbell Curl","weight":"6","reps":13,"rpe":10,"tempo":null,"logged_at":"2026-01-08T13:36:08.617000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":41,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Incline Dumbbell Curl","weight":"6","reps":12,"rpe":10,"tempo":null,"logged_at":"2026-01-08T13:39:06.002000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":42,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Dumbbell Hammer Curls","weight":"8","reps":12,"rpe":9,"tempo":null,"logged_at":"2026-01-08T13:41:59.283000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":43,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Dumbbell Hammer Curls","weight":"8","reps":10,"rpe":10,"tempo":null,"logged_at":"2026-01-08T13:45:18.026000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":44,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Dumbbell Hammer Curls","weight":"8","reps":10,"rpe":10,"tempo":null,"logged_at":"2026-01-08T14:06:26.851000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":47,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Ab Wheel Rollout","weight":"BW","reps":12,"rpe":10,"tempo":null,"logged_at":"2026-01-08T20:24:27.124000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":48,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Ab Wheel Rollout","weight":"BW","reps":12,"rpe":10,"tempo":null,"logged_at":"2026-01-08T20:24:32.403000+00:00","day_key":"thu","scheduled_for":"2026-01-08","duration_minutes":null,"intensity":null},{"id":75,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Intensive Swimming (Intervals)","weight":"-","reps":1,"rpe":null,"tempo":"","logged_at":"2026-01-11T21:40:22.572000+00:00","day_key":"sat","scheduled_for":"2026-01-10","duration_minutes":60,"intensity":80},{"id":50,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Goblet Squats - Circuit","weight":"20","reps":12,"rpe":6,"tempo":null,"logged_at":"2026-01-11T12:39:54.746000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":51,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Push-ups - Circuit","weight":"50","reps":15,"rpe":8,"tempo":null,"logged_at":"2026-01-11T12:40:11.083000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":52,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Bent-Over DB Rows - Circuit","weight":"15","reps":15,"rpe":8,"tempo":null,"logged_at":"2026-01-11T12:40:24.946000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":53,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Standing DB Shoulder Press - Circuit","weight":"12.5","reps":12,"rpe":8,"tempo":null,"logged_at":"2026-01-11T12:40:33.519000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":54,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Kettlebell/DB Swings - Circuit","weight":"20","reps":25,"rpe":9,"tempo":null,"logged_at":"2026-01-11T12:40:42.699000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":55,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Goblet Squats - Circuit","weight":"30","reps":15,"rpe":7,"tempo":null,"logged_at":"2026-01-11T12:46:42.914000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":56,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Push-ups - Circuit","weight":"50","reps":15,"rpe":10,"tempo":null,"logged_at":"2026-01-11T12:47:31.715000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":57,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Bent-Over DB Rows - Circuit","weight":"15","reps":15,"rpe":8,"tempo":null,"logged_at":"2026-01-11T12:47:43.927000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":58,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Standing DB Shoulder Press - Circuit","weight":"12.5","reps":10,"rpe":9,"tempo":null,"logged_at":"2026-01-11T12:48:01.265000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":59,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Kettlebell/DB Swings - Circuit","weight":"20","reps":15,"rpe":9,"tempo":null,"logged_at":"2026-01-11T12:48:12.566000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":60,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Goblet Squats - Circuit","weight":"30","reps":15,"rpe":7,"tempo":null,"logged_at":"2026-01-11T12:55:21.984000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":61,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Push-ups - Circuit","weight":"50","reps":10,"rpe":10,"tempo":null,"logged_at":"2026-01-11T12:55:32.781000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":62,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Bent-Over DB Rows - Circuit","weight":"15","reps":15,"rpe":8,"tempo":null,"logged_at":"2026-01-11T12:55:42.263000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":63,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Standing DB Shoulder Press - Circuit","weight":"12.5","reps":15,"rpe":10,"tempo":null,"logged_at":"2026-01-11T12:55:51.740000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":64,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Kettlebell/DB Swings - Circuit","weight":"20","reps":25,"rpe":10,"tempo":null,"logged_at":"2026-01-11T12:56:09.801000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":66,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Goblet Squats - Circuit","weight":"30","reps":15,"rpe":8,"tempo":null,"logged_at":"2026-01-11T13:03:16.429000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":67,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Push-ups - Circuit","weight":"20","reps":17,"rpe":10,"tempo":null,"logged_at":"2026-01-11T13:03:30.920000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null},{"id":68,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","exercise_name":"Bent-Over DB Rows - Circuit","weight":"15","reps":15,"rpe":8,"tempo":null,"logged_at":"2026-01-11T13:03:41.508000+00:00","day_key":"sun","scheduled_for":"2026-01-11","duration_minutes":null,"intensity":null}]'),lw=JSON.parse('[{"id":1,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"tue","item_id":"tue-nutr-0-0","completed":false,"scheduled_for":"2026-01-06","updated_at":"2026-01-08T17:18:39.490000+00:00","meta_data":{}},{"id":5,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"wed","item_id":"wed-nutr-0-0","completed":false,"scheduled_for":"2026-01-07","updated_at":"2026-01-08T17:18:51.182000+00:00","meta_data":{}},{"id":12,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"wed","item_id":"wed-supp-0-0","completed":false,"scheduled_for":"2026-01-07","updated_at":"2026-01-08T17:25:50.425000+00:00","meta_data":{}},{"id":9,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-0-0","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-08T17:20:05.360000+00:00","meta_data":{}},{"id":14,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-1-0","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-08T20:03:45.470000+00:00","meta_data":{}},{"id":15,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-1-1","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-08T20:03:47.158000+00:00","meta_data":{}},{"id":16,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-2-0","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-08T20:03:48.963000+00:00","meta_data":{}},{"id":17,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-3-0","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-08T20:03:51.313000+00:00","meta_data":{}},{"id":18,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-4-3","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-08T20:04:04.471000+00:00","meta_data":{}},{"id":7,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-nutr-0-0","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-08T20:25:27.899000+00:00","meta_data":{}},{"id":23,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-5-0","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-09T02:07:12.288000+00:00","meta_data":{}},{"id":24,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-6-1","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-09T02:07:14.266000+00:00","meta_data":{}},{"id":25,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-6-2","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-09T02:07:14.708000+00:00","meta_data":{}},{"id":26,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-4-5","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-09T02:07:19.688000+00:00","meta_data":{}},{"id":27,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-supp-4-4","completed":true,"scheduled_for":"2026-01-08","updated_at":"2026-01-09T02:07:20.411000+00:00","meta_data":{}},{"id":20,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-nutr-1-0","completed":false,"scheduled_for":"2026-01-08","updated_at":"2026-01-09T23:47:17.717000+00:00","meta_data":{}},{"id":21,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-nutr-1-1","completed":false,"scheduled_for":"2026-01-08","updated_at":"2026-01-09T23:47:18.237000+00:00","meta_data":{}},{"id":22,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"thu","item_id":"thu-nutr-1-2","completed":false,"scheduled_for":"2026-01-08","updated_at":"2026-01-09T23:47:18.767000+00:00","meta_data":{}},{"id":28,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-0-0","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-09T15:38:54.990000+00:00","meta_data":{}},{"id":29,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-1-0","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-09T15:38:56.578000+00:00","meta_data":{}},{"id":30,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-2-0","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-09T15:39:24.464000+00:00","meta_data":{}},{"id":31,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-3-0","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-09T15:49:31.892000+00:00","meta_data":{}},{"id":32,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-3-2","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-09T15:49:35.859000+00:00","meta_data":{}},{"id":33,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-3-1","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-09T15:49:38.448000+00:00","meta_data":{}},{"id":34,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-3-3","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-09T15:49:40.284000+00:00","meta_data":{}},{"id":35,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-3-4","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-09T15:49:41.526000+00:00","meta_data":{}},{"id":39,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-4-0","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-10T09:53:15.678000+00:00","meta_data":{}},{"id":40,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-5-0","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-10T09:53:17.401000+00:00","meta_data":{}},{"id":41,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-5-1","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-10T09:53:17.733000+00:00","meta_data":{}},{"id":42,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-5-2","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-10T09:53:18.533000+00:00","meta_data":{}},{"id":76,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"fri","item_id":"fri-supp-5-3","completed":true,"scheduled_for":"2026-01-09","updated_at":"2026-01-11T23:02:53.641000+00:00","meta_data":{"name":"Vitamin B6 P-5-P","dosage":"1 cap"}},{"id":43,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-0-0","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-10T15:47:52.710000+00:00","meta_data":{}},{"id":44,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-3-0","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-10T15:47:59.268000+00:00","meta_data":{}},{"id":45,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-4-1","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-10T15:48:03.378000+00:00","meta_data":{}},{"id":46,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-4-2","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-10T15:48:05.082000+00:00","meta_data":{}},{"id":47,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-4-3","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-10T15:48:11.824000+00:00","meta_data":{}},{"id":48,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-4-4","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-10T15:48:13.473000+00:00","meta_data":{}},{"id":49,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-4-5","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-10T15:48:15.659000+00:00","meta_data":{}},{"id":51,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-nutr-0-0","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T14:49:57.395000+00:00","meta_data":{}},{"id":52,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-nutr-1-0","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T14:49:59.364000+00:00","meta_data":{}},{"id":53,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-nutr-1-1","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T14:50:00.068000+00:00","meta_data":{}},{"id":54,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-nutr-1-2","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T14:50:00.882000+00:00","meta_data":{}},{"id":77,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-5-0","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T23:03:03.364000+00:00","meta_data":{"name":"Magnesium Citrate","dosage":"3 scoops (2.7 g)"}},{"id":78,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-6-0","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T23:03:04.350000+00:00","meta_data":{"name":"KSM-66 Ashwagandha","dosage":"4 caps"}},{"id":79,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-6-1","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T23:03:04.874000+00:00","meta_data":{"name":"OptiZinc","dosage":"1 cap"}},{"id":80,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-6-2","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T23:03:05.462000+00:00","meta_data":{"name":"Boron","dosage":"1 cap"}},{"id":81,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sat","item_id":"sat-supp-6-3","completed":true,"scheduled_for":"2026-01-10","updated_at":"2026-01-11T23:03:06.272000+00:00","meta_data":{"name":"Vitamin B6 P-5-P","dosage":"1 cap"}},{"id":50,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-0-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T11:04:55.472000+00:00","meta_data":{}},{"id":55,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-1-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T15:10:16.700000+00:00","meta_data":{}},{"id":56,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-1-1","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T15:10:18.525000+00:00","meta_data":{}},{"id":57,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-2-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T15:10:20.144000+00:00","meta_data":{}},{"id":58,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-3-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T15:10:24.232000+00:00","meta_data":{}},{"id":59,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-4-2","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T15:15:31.033000+00:00","meta_data":{}},{"id":60,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-4-4","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T15:15:34.588000+00:00","meta_data":{}},{"id":61,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-4-5","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T15:15:59.309000+00:00","meta_data":{}},{"id":62,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-4-1","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T15:16:15.369000+00:00","meta_data":{}},{"id":63,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-4-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T16:25:04.161000+00:00","meta_data":{}},{"id":64,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-4-3","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T16:25:06.590000+00:00","meta_data":{}},{"id":65,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-nutr-1-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T16:26:56.114000+00:00","meta_data":{}},{"id":66,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-nutr-1-1","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T16:26:56.941000+00:00","meta_data":{}},{"id":67,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-nutr-1-2","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T16:26:57.657000+00:00","meta_data":{}},{"id":68,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-5-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T21:03:54.138000+00:00","meta_data":{}},{"id":69,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-6-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T21:03:55.389000+00:00","meta_data":{}},{"id":70,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-6-1","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T21:03:56.184000+00:00","meta_data":{}},{"id":71,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-6-2","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T21:03:57.399000+00:00","meta_data":{}},{"id":72,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-supp-6-3","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T21:03:59.288000+00:00","meta_data":{}},{"id":73,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-nutr-2-1","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T21:04:11.846000+00:00","meta_data":{}},{"id":74,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-nutr-2-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T21:04:12.504000+00:00","meta_data":{}},{"id":75,"user_id":"2edced93-d05e-4e83-8a83-5df5140ebffb","day_key":"sun","item_id":"sun-nutr-0-0","completed":true,"scheduled_for":"2026-01-11","updated_at":"2026-01-11T21:04:14.264000+00:00","meta_data":{}}]'),uw=[{id:"01ceca07-dc32-4ab7-9d4d-4d018c0c3a6f",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-12",day_key:"mon",exercise_index:0,is_completed:!1,updated_at:"2026-01-11T22:14:57.611000+00:00"},{id:"78f4f3b6-1d16-478e-b641-eabb97142cf6",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-05",day_key:"mon",exercise_index:0,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"53b5f72d-c13b-42e3-baa3-194d4d65f308",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-06",day_key:"tue",exercise_index:0,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"5eb8bcf5-142e-4a14-b2df-10cd4efc9156",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-07",day_key:"wed",exercise_index:0,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"92ff44e5-ff81-4d3b-bcd9-362960ef3441",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-08",day_key:"thu",exercise_index:0,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"f2873a2a-92fb-419b-b378-6a038d646fed",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-08",day_key:"thu",exercise_index:1,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"24c48105-f38c-47b6-bd91-9e0755ca881f",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-08",day_key:"thu",exercise_index:2,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"f801b958-2518-4dd9-b32c-1e62375fd2e8",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-08",day_key:"thu",exercise_index:3,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"7f7853d3-1ae8-411d-be6d-7b04caaadeef",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-08",day_key:"thu",exercise_index:4,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"d1d67c01-b3bd-494d-864f-a7c17c245fcc",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-08",day_key:"thu",exercise_index:5,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"461758fa-a744-46a1-ba88-59642eeef247",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-09",day_key:"fri",exercise_index:0,is_completed:!1,updated_at:"2026-01-11T22:44:33.662000+00:00"},{id:"b800d9dd-8911-4653-bf16-ab7595391966",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-10",day_key:"sat",exercise_index:0,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"29eccf67-7328-4408-97c7-ab91c824c4af",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-11",day_key:"sun",exercise_index:0,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"28b37e28-c725-4f45-869a-83a4441f2c90",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-11",day_key:"sun",exercise_index:1,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"ab55ec53-08a8-4fd6-874e-99acd7af477a",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-11",day_key:"sun",exercise_index:2,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"25ba1fc3-67f0-4f09-a49d-44538dcab7d7",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-11",day_key:"sun",exercise_index:3,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"c47385cc-f4a9-4dfe-9855-01fae58fb6e5",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-11",day_key:"sun",exercise_index:4,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"},{id:"3ecd6358-001e-4f73-b840-41a11abdca72",user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",date:"2026-01-11",day_key:"sun",exercise_index:5,is_completed:!0,updated_at:"2026-01-11T22:24:26.006242+00:00"}],cw=[{user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb",active_routine_id:1,cycle_start_date:"2025-12-29",updated_at:"2026-01-09T00:23:52.323000+00:00",cycle_end_date:"2026-02-01",id:68}],dw=[],hw=[{id:1,created_at:"2026-01-07T16:43:08.429220+00:00",name:"Master Plan Default",description:"The standard 7-day hypertrophy and recovery split.",cycle_length:7,is_system_default:!0,owner_user_id:null},{id:11,created_at:"2026-01-08T19:36:20.895429+00:00",name:"Push pull legs",description:"",cycle_length:4,is_system_default:!1,owner_user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb"},{id:12,created_at:"2026-01-08T20:24:06.643580+00:00",name:"Master Plan Default (Custom)",description:"The standard 7-day hypertrophy and recovery split.",cycle_length:7,is_system_default:!1,owner_user_id:"2edced93-d05e-4e83-8a83-5df5140ebffb"},{id:13,created_at:"2026-01-09T00:28:00.298194+00:00",name:"Test Routine",description:"",cycle_length:7,is_system_default:!1,owner_user_id:"097be585-9c71-459a-a2ca-06750b7455d4"}],fw=JSON.parse(`[{"id":1,"routine_id":1,"day_number":1,"day_type":"Walk","title":"Active Recovery","instructions":"<ul><li>Goal: Recovery, improved circulation, and fat burning during the 42-hour fast.</li><li>Intensity: Low, you should be able to hold a conversation without gasping.</li></ul>","exercises":[{"type":"Cardio","focus":"<ul><li>Walk at a light to moderate pace.</li></ul>","config":"30-60 min","exercise":"Active Recovery"}]},{"id":2,"routine_id":1,"day_number":2,"day_type":"Resistance","title":"Heavy Leg Workout","instructions":"<ul><li>Goal: Maximal muscle glycogen depletion through high volume.</li><li>Rest between sets: 45-60 seconds.</li><li>Target RPE 9-10 (close to or at muscle failure).</li></ul>","exercises":[{"type":"Resistance","focus":"<ul><li>Keep dumbbell tight to chest, elbows pointing down.</li><li>Descend deep and controlled.</li><li>This is your main volume mover.</li></ul>","config":"4 x 15-20 @ 9 RPE","exercise":"Goblet Squats"},{"type":"Resistance","focus":"<ul><li>Place feet shoulder-width apart.</li><li>Lower slowly and drive up explosively, do not lock knees at the top.</li></ul>","config":"4 x 15-20 @ 10 RPE","exercise":"Leg Press"},{"type":"Resistance","focus":"<ul><li>Isolate the quadriceps.</li><li>Squeeze the muscle for a second at the top before starting the slow descent.</li></ul>","config":"3 x 12-15 @ 10 RPE","exercise":"Leg Extensions"},{"type":"Resistance","focus":"<ul><li>Focus on the mind-muscle connection with the hamstrings.</li><li>Movement should be smooth, without using momentum from the hips.</li></ul>","config":"3 x 12-15 @ 10 RPE","exercise":"Lying Leg Curls"},{"type":"Resistance","focus":"<ul><li>With slight knee bend, push hips back until you feel max stretch in hamstrings.</li><li>Keep back straight.</li></ul>","config":"3 x 12-15 @ 9 RPE","exercise":"Dumbbell RDL"},{"type":"Resistance","focus":"<ul><li>Perform full stretch at bottom position and hold for a second at the very top.</li></ul>","config":"4 x 20-25 @ 10 RPE","exercise":"Calf Raises"},{"type":"Resistance","focus":"<ul><li>Keep body in a perfectly straight line from shoulders to heels.</li><li>Tighten core and glutes.</li><li>Do not let hips sag.</li></ul>","config":"3 x To Failure @ 10 RPE","exercise":"PLANK - Core Finisher"}]},{"id":7,"routine_id":1,"day_number":7,"day_type":"Resistance","title":"Metabolic Workout","instructions":"<ul><li>Goal: Final glycogen depletion before fast.</li><li>Circuit training.</li><li>Perform exercises back-to-back with 15-20 sec rest.</li><li>After circuit ends, rest 90-120 sec.</li><li>Perform 3-4 total circuits.</li></ul>","exercises":[{"type":"Resistance","focus":"<ul><li>Keep tempo high but with good form.</li><li>Legs and core focus.</li></ul>","config":"3-4 x 12-15 @ 8 RPE","exercise":"Goblet Squats - Circuit"},{"type":"Resistance","focus":"<ul><li>Elevate feet if too easy.</li><li>Use knees if too hard.</li></ul>","config":"3-4 x To Failure @ 10 RPE","exercise":"Push-ups - Circuit"},{"type":"Resistance","focus":"<ul><li>Keep back straight.</li><li>Pull dumbbells to hip, squeezing shoulder blades.</li></ul>","config":"3-4 x 12-15 @ 8-9 RPE","exercise":"Bent-Over DB Rows - Circuit"},{"type":"Resistance","focus":"<ul><li>Use legs for slight initial push (Push Press) to maintain intensity.</li></ul>","config":"3-4 x 10-12 @ 9 RPE","exercise":"Standing DB Shoulder Press - Circuit"},{"type":"Resistance","focus":"<ul><li>Metabolic finisher.</li><li>Movement comes from hips, not arms.</li><li>Squeeze core and glutes.</li></ul>","config":"3-4 x 20-25 @ 9 RPE","exercise":"Kettlebell/DB Swings - Circuit"},{"type":"Resistance","focus":"<ul><li>Perform AFTER all circuits.</li><li>Use rope.</li><li>Focus on curling torso, bringing ribs to hips.</li><li>Do not pull with arms.</li></ul>","config":"3 x 12-15 @ 9-10 RPE","exercise":"Cable Crunches - Core Finisher"}]},{"id":5,"routine_id":1,"day_number":5,"day_type":"Swim","title":"Light to Moderate Swimming","instructions":"<ul><li>Goal: Active recovery, improve cardiovascular system, fat burning with low joint stress.</li></ul>","exercises":[{"type":"Cardio","focus":"<ul><li>Goal: Active recovery, improve cardiovascular system, fat burning with low joint stress.</li><li>Low to moderate intensity, steady state (LISS).</li><li>Focus on breathing technique and smooth movement.</li></ul>","config":"30-45 min","exercise":"Light to Moderate Swimming"}]},{"id":6,"routine_id":1,"day_number":6,"day_type":"Swim","title":"Intensive Swimming (HIIT)","instructions":"<ul><li>Goal: Max calorie burn, improve anaerobic capacity and metabolic stress.</li><li>Interval Training (HIIT).</li></ul>","exercises":[{"type":"Cardio","focus":"<ul><li>Goal: Max calorie burn, improve anaerobic capacity and metabolic stress.</li><li>Interval Training (HIIT).</li><li>Warm up 5-10 min, then alternate 1 length sprint (~90% effort) with 2 lengths very slow recovery swimming.</li><li>Cool down 5 min.</li></ul>","config":"15-20 min","exercise":"Intensive Swimming (Intervals)"}]},{"id":3,"routine_id":1,"day_number":3,"day_type":"Resistance","title":"Push (Chest/Shoulders/Triceps)","instructions":"<ul><li>Goal: Stimulate chest, shoulders, and triceps.</li><li>Focus on Time Under Tension (TUT).</li><li>Tempo: 3-1-1-0.</li><li>Rest between sets: 60-75 seconds.</li></ul>","exercises":[{"type":"Resistance","focus":"<ul><li>Tempo: 3-1-1-0.</li><li>Control the descent for 3 seconds.</li><li>Feel the stretch in chest at bottom before pushing explosively.</li></ul>","config":"4 x 8-12 @ 8-9 RPE","exercise":"Flat Dumbbell Press"},{"type":"Resistance","focus":"<ul><li>Tempo: 3-1-1-0.</li><li>Bench angle 30-45 degrees.</li><li>Focus on upper chest. Elbows slightly tucked.</li></ul>","config":"3 x 10-12 @ 9 RPE","exercise":"Incline Dumbbell Press"},{"type":"Resistance","focus":"<ul><li>Tempo: 3-1-1-0.</li><li>Keep back straight.</li><li>Lower dumbbells to ear level and drive up without clanking them.</li></ul>","config":"3 x 10-12 @ 9 RPE","exercise":"Seated DB Shoulder Press"},{"type":"Resistance","focus":"<ul><li>Lead the movement with elbows, not wrists.</li><li>Imagine pouring two pitchers of water.</li><li>Target side delts.</li></ul>","config":"3 x 12-15 @ 9-10 RPE","exercise":"Dumbbell Lateral Raises"},{"type":"Resistance","focus":"<ul><li>Keep elbows tight to body.</li><li>Spread rope at bottom to max activate triceps.</li></ul>","config":"3 x 10-12 @ 9 RPE","exercise":"Cable Tricep Pushdowns (Rope)"},{"type":"Resistance","focus":"<ul><li>Targets long head of triceps.</li><li>Full stretch and focus on full contraction.</li></ul>","config":"3 x 12-15 @ 10 RPE","exercise":"Overhead Cable Tricep Extension"},{"type":"Resistance","focus":"<ul><li>Control movement slowly forward from knees as far as possible without arching back.</li><li>Use abs to pull back.</li></ul>","config":"3 x 8-12 @ 9 RPE","exercise":"Ab Wheel Rollout"}]},{"id":4,"routine_id":1,"day_number":4,"day_type":"Resistance","title":"Pull (Back/Biceps)","instructions":"<ul><li>Goal: Stimulate back and biceps.</li><li>Focus on Time Under Tension (TUT).</li><li>Tempo: 3-1-1-0.</li><li>Rest between sets: 60-75 seconds.</li></ul>","exercises":[{"type":"Resistance","focus":"<ul><li>Tempo: 3-1-1-0.</li><li>Think about pulling with elbows, not hands.</li><li>Squeeze shoulder blades hard at bottom.</li><li>Control weight all the way up.</li></ul>","config":"4 x 10-12 @ 8-9 RPE","exercise":"Wide Grip Lat Pulldown"},{"type":"Resistance","focus":"<ul><li>Tempo: 3-1-1-0.</li><li>Keep chest out and back straight.</li><li>Pull handle towards lower abdomen.</li></ul>","config":"4 x 10-12 @ 9 RPE","exercise":"Seated Cable Row (V-Grip)"},{"type":"Resistance","focus":"<ul><li>Max stretch at bottom, pull dumbbell in an arc towards hip, not straight up.</li><li>This maximizes lat activation.</li></ul>","config":"3 x 8-10 @ 9 RPE","exercise":"One Arm Dumbbell Row"},{"type":"Resistance","focus":"<ul><li>Critical for shoulder and upper back health.</li><li>Pull towards face, ending in a 'double bicep' pose.</li></ul>","config":"3 x 15-20 @ 8 RPE","exercise":"Face Pulls"},{"type":"Resistance","focus":"<ul><li>Bench incline 60-75 degrees.</li><li>Puts biceps under constant tension and stretch.</li><li>Elbows point to floor, curl only with biceps.</li></ul>","config":"3 x 10-12 @ 9-10 RPE","exercise":"Incline Dumbbell Curl"},{"type":"Resistance","focus":"<ul><li>Targets brachialis/forearm, adding arm thickness.</li><li>Strict movement, no swinging.</li></ul>","config":"3 x 10-12 @ 9-10 RPE","exercise":"Dumbbell Hammer Curls"},{"type":"Resistance","focus":"<ul><li>If full range is hard, do Knees to Chest.</li><li>Avoid swinging.</li></ul>","config":"3 x To Failure @ 10 RPE","exercise":"Toes to Bar"}]},{"id":36,"routine_id":11,"day_number":1,"day_type":"Resistance","title":"Day 1","instructions":"","exercises":[]},{"id":37,"routine_id":11,"day_number":2,"day_type":"Resistance","title":"Day 2","instructions":"","exercises":[]},{"id":38,"routine_id":11,"day_number":3,"day_type":"Resistance","title":"Day 3","instructions":"","exercises":[]},{"id":39,"routine_id":11,"day_number":4,"day_type":"Resistance","title":"Day 4","instructions":"","exercises":[]},{"id":40,"routine_id":12,"day_number":1,"day_type":"Walk","title":"Active Recovery","instructions":"<ul><li>Goal: Recovery, improved circulation, and fat burning during the 42-hour fast.</li><li>Intensity: Low, you should be able to hold a conversation without gasping.</li></ul>","exercises":[{"type":"Cardio","focus":"<ul><li>Walk at a light to moderate pace.</li></ul>","config":"30-60 min","exercise":"Active Recovery"}]},{"id":41,"routine_id":12,"day_number":2,"day_type":"Resistance","title":"Heavy Leg Workout","instructions":"<ul><li>Goal: Maximal muscle glycogen depletion through high volume.</li><li>Rest between sets: 45-60 seconds.</li><li>Target RPE 9-10 (close to or at muscle failure).</li></ul>","exercises":[{"type":"Resistance","focus":"<ul><li>Keep dumbbell tight to chest, elbows pointing down.</li><li>Descend deep and controlled.</li><li>This is your main volume mover.</li></ul>","config":"4 x 15-20 @ 9 RPE","exercise":"Goblet Squats"},{"type":"Resistance","focus":"<ul><li>Place feet shoulder-width apart.</li><li>Lower slowly and drive up explosively, do not lock knees at the top.</li></ul>","config":"4 x 15-20 @ 10 RPE","exercise":"Leg Press"},{"type":"Resistance","focus":"<ul><li>Isolate the quadriceps.</li><li>Squeeze the muscle for a second at the top before starting the slow descent.</li></ul>","config":"3 x 12-15 @ 10 RPE","exercise":"Leg Extensions"},{"type":"Resistance","focus":"<ul><li>Focus on the mind-muscle connection with the hamstrings.</li><li>Movement should be smooth, without using momentum from the hips.</li></ul>","config":"3 x 12-15 @ 10 RPE","exercise":"Lying Leg Curls"},{"type":"Resistance","focus":"<ul><li>With slight knee bend, push hips back until you feel max stretch in hamstrings.</li><li>Keep back straight.</li></ul>","config":"3 x 12-15 @ 9 RPE","exercise":"Dumbbell RDL"},{"type":"Resistance","focus":"<ul><li>Perform full stretch at bottom position and hold for a second at the very top.</li></ul>","config":"4 x 20-25 @ 10 RPE","exercise":"Calf Raises"},{"type":"Resistance","focus":"<ul><li>Keep body in a perfectly straight line from shoulders to heels.</li><li>Tighten core and glutes.</li><li>Do not let hips sag.</li></ul>","config":"3 x To Failure @ 10 RPE","exercise":"PLANK - Core Finisher"}]},{"id":42,"routine_id":12,"day_number":3,"day_type":"Resistance","title":"Push (Chest/Shoulders/Triceps)","instructions":"<ul><li>Goal: Stimulate chest, shoulders, and triceps.</li><li>Focus on Time Under Tension (TUT).</li><li>Tempo: 3-1-1-0.</li><li>Rest between sets: 60-75 seconds.</li></ul>","exercises":[{"type":"Resistance","focus":"<ul><li>Tempo: 3-1-1-0.</li><li>Control the descent for 3 seconds.</li><li>Feel the stretch in chest at bottom before pushing explosively.</li></ul>","config":"4 x 8-12 @ 8-9 RPE","exercise":"Flat Dumbbell Press"},{"type":"Resistance","focus":"<ul><li>Tempo: 3-1-1-0.</li><li>Bench angle 30-45 degrees.</li><li>Focus on upper chest. Elbows slightly tucked.</li></ul>","config":"3 x 10-12 @ 9 RPE","exercise":"Incline Dumbbell Press"},{"type":"Resistance","focus":"<ul><li>Tempo: 3-1-1-0.</li><li>Keep back straight.</li><li>Lower dumbbells to ear level and drive up without clanking them.</li></ul>","config":"3 x 10-12 @ 9 RPE","exercise":"Seated DB Shoulder Press"},{"type":"Resistance","focus":"<ul><li>Lead the movement with elbows, not wrists.</li><li>Imagine pouring two pitchers of water.</li><li>Target side delts.</li></ul>","config":"3 x 12-15 @ 9-10 RPE","exercise":"Dumbbell Lateral Raises"},{"type":"Resistance","focus":"<ul><li>Keep elbows tight to body.</li><li>Spread rope at bottom to max activate triceps.</li></ul>","config":"3 x 10-12 @ 9 RPE","exercise":"Cable Tricep Pushdowns (Rope)"},{"type":"Resistance","focus":"<ul><li>Targets long head of triceps.</li><li>Full stretch and focus on full contraction.</li></ul>","config":"3 x 12-15 @ 10 RPE","exercise":"Overhead Cable Tricep Extension"},{"type":"Resistance","focus":"<ul><li>Control movement slowly forward from knees as far as possible without arching back.</li><li>Use abs to pull back.</li></ul>","config":"3 x 8-12 @ 9 RPE","exercise":"Ab Wheel Rollout"}]},{"id":44,"routine_id":12,"day_number":5,"day_type":"Swim","title":"Light to Moderate Swimming","instructions":"<ul><li>Goal: Active recovery, improve cardiovascular system, fat burning with low joint stress.</li></ul>","exercises":[{"type":"Cardio","focus":"<ul><li>Low to moderate intensity (LISS).</li></ul>","config":"30-45 minutes","exercise":"Light to Moderate Swimming"}]},{"id":45,"routine_id":12,"day_number":6,"day_type":"Swim","title":"Intensive Swimming (HIIT)","instructions":"<ul><li>Goal: Max calorie burn, improve anaerobic capacity and metabolic stress.</li><li>Interval Training (HIIT).</li></ul>","exercises":[{"type":"Cardio","focus":"<ul><li>Interval Training (HIIT).</li></ul>","config":"15-20 minutes","exercise":"Intensive Swimming (Intervals)"}]},{"id":46,"routine_id":12,"day_number":7,"day_type":"Resistance","title":"Metabolic Workout","instructions":"<ul><li>Goal: Final glycogen depletion before fast.</li><li>Circuit training.</li><li>Perform exercises back-to-back with 15-20 sec rest.</li><li>After circuit ends, rest 90-120 sec.</li><li>Perform 3-4 total circuits.</li></ul>","exercises":[{"type":"Resistance","focus":"<ul><li>Keep tempo high but with good form.</li><li>Legs and core focus.</li></ul>","config":"3-4 x 12-15 @ 8 RPE","exercise":"Goblet Squats - Circuit"},{"type":"Resistance","focus":"<ul><li>Elevate feet if too easy.</li><li>Use knees if too hard.</li></ul>","config":"3-4 x To Failure @ 10 RPE","exercise":"Push-ups - Circuit"},{"type":"Resistance","focus":"<ul><li>Keep back straight.</li><li>Pull dumbbells to hip, squeezing shoulder blades.</li></ul>","config":"3-4 x 12-15 @ 8-9 RPE","exercise":"Bent-Over DB Rows - Circuit"},{"type":"Resistance","focus":"<ul><li>Use legs for slight initial push (Push Press) to maintain intensity.</li></ul>","config":"3-4 x 10-12 @ 9 RPE","exercise":"Standing DB Shoulder Press - Circuit"},{"type":"Resistance","focus":"<ul><li>Metabolic finisher.</li><li>Movement comes from hips, not arms.</li><li>Squeeze core and glutes.</li></ul>","config":"3-4 x 20-25 @ 9 RPE","exercise":"Kettlebell/DB Swings - Circuit"},{"type":"Resistance","focus":"<ul><li>Perform AFTER all circuits.</li><li>Use rope.</li><li>Focus on curling torso, bringing ribs to hips.</li><li>Do not pull with arms.</li></ul>","config":"3 x 12-15 @ 9-10 RPE","exercise":"Cable Crunches - Core Finisher"}]},{"id":43,"routine_id":12,"day_number":4,"day_type":"Resistance","title":"Pull (Back/Biceps)","instructions":"Goal: Stimulate back and biceps.\\nFocus on Time Under Tension (TUT).\\nTempo: 3-1-1-0.\\nRest between sets: 60-75 seconds.","exercises":[{"type":"Resistance","focus":"Tempo: 3-1-1-0.\\nThink about pulling with elbows, not hands.\\nSqueeze shoulder blades hard at bottom.\\nControl weight all the way up.","config":"4 x 10-12 @ 8-9 RPE","exercise":"Wide Grip Lat Pulldown"},{"type":"Resistance","focus":"Tempo: 3-1-1-0.\\nKeep chest out and back straight.\\nPull handle towards lower abdomen.","config":"4 x 10-12 @ 9 RPE","exercise":"Seated Cable Row (V-Grip)"},{"type":"Resistance","focus":"Max stretch at bottom, pull dumbbell in an arc towards hip, not straight up.\\nThis maximizes lat activation.","config":"3 x 8-10 @ 9 RPE","exercise":"One Arm Dumbbell Row"},{"type":"Resistance","focus":"Critical for shoulder and upper back health.\\nPull towards face, ending in a 'double bicep' pose.","config":"3 x 15-20 @ 8 RPE","exercise":"Face Pulls"},{"type":"Resistance","focus":"Bench incline 60-75 degrees.\\nPuts biceps under constant tension and stretch.\\nElbows point to floor, curl only with biceps.","config":"3 x 10-12 @ 9-10 RPE","exercise":"Incline Dumbbell Curl"},{"type":"Resistance","focus":"Targets brachialis/forearm, adding arm thickness.\\nStrict movement, no swinging.","config":"3 x 10-12 @ 9-10 RPE","exercise":"Dumbbell Hammer Curls"},{"type":"Resistance","focus":"Control movement slowly forward from knees as far as possible without arching back.\\nUse abs to pull back.\\n","config":"3 x 8-12 @ 9 RPE","exercise":"Ab Wheel Rollout"}]}]`),pw=[{id:"2edced93-d05e-4e83-8a83-5df5140ebffb",full_name:"Boris",age:42,weight:89,updated_at:"2026-01-12T10:40:29.448000+00:00",theme_preference:"material-dark",navigation_mode:"week"}],mw={workout_logs:ow,daily_checklist_logs:lw,daily_exercise_status:uw,user_routine_status:cw,daily_plan_modifications:dw,routines:hw,routine_days:fw,profiles:pw},gw=()=>{const n=localStorage.getItem("mock_db");let t={};try{t=JSON.parse(n||"{}")}catch{t={}}if(!t.routines||t.routines.length===0){console.log("[MockDB] Seeding initial data from export...");const s="mock-user-id",i="2edced93-d05e-4e83-8a83-5df5140ebffb",o={};for(const[u,d]of Object.entries(mw))o[u]=d.map(p=>{const m={...p};return m.user_id===i&&(m.user_id=s),m.id===i&&(m.id=s),m});localStorage.setItem("mock_db",JSON.stringify(o)),console.log("[MockDB] Seed complete.")}},yw="BCfx_b-KMT2vzftgdcPRiXJLz4tGANrj-iz39RYaUVRIQdaN7DYK-Hz_bDHdkEJYEYJkZlpDDzT-whymv0TyvvI";function vw(n){const t="=".repeat((4-n.length%4)%4),s=(n+t).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(s),o=new Uint8Array(i.length);for(let u=0;u<i.length;++u)o[u]=i.charCodeAt(u);return o}const _w=(n,t,s)=>{const i=A.useRef(null),o=A.useRef(null);A.useEffect(()=>{localStorage.getItem("mp_use_mock_db")==="true"&&gw(),n?.user?.id&&(we.getProfile(n.user.id).then(m=>{m?.theme_preference&&document.documentElement.setAttribute("data-theme",m.theme_preference)}),"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.ready.then(async m=>{try{const g=await m.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vw(yw)});localStorage.setItem("current_push_endpoint",g.endpoint),await we.savePushSubscription(n.user.id,g)}catch(g){console.error("Push Subscription Error:",g)}}))},[n]);const u=A.useCallback(m=>{o.current=null,i.current=m.targetTouches[0].clientX},[]),d=A.useCallback(m=>{o.current=m.targetTouches[0].clientX},[]),p=A.useCallback(()=>{!i.current||!o.current||i.current-o.current},[t,s]);return{onTouchStart:u,onTouchMove:d,onTouchEnd:p}};class $p extends Ut.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){this.setState({error:t,errorInfo:s}),console.error("Uncaught Error:",t,s)}render(){return this.state.hasError?c.jsxs("div",{className:"p-8 text-white bg-black h-screen flex flex-col items-center justify-center text-center",children:[c.jsx("h1",{className:"text-xl font-bold text-red-500 mb-4",children:"Something went wrong."}),c.jsxs("pre",{className:"text-xs bg-[#111] p-4 rounded text-left overflow-auto max-w-full",children:[this.state.error&&this.state.error.toString(),c.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-[#333] rounded text-white font-bold",children:"Reload App"})]}):this.props.children}}function ww({onExit:n}){const{session:t,loading:s,currentDay:i,setCurrentDay:o,daysMap:u,weekDates:d,weekNumber:p,year:m,weekOffset:g,nextWeek:v,prevWeek:w,setWeekOffset:_,getResolvedDayData:x,getWeekMap:j,logout:R,profile:k}=gt(),[T,B]=A.useState("training"),[M,D]=A.useState("tracker"),[H,K]=A.useState(()=>localStorage.getItem("mp_nav_mode")||"week"),[W,te]=A.useState(g);_w(t,()=>{},()=>{}),A.useEffect(()=>{t?.user?.id&&we.getProfile(t.user.id).then(P=>{P?.navigation_mode&&K(P.navigation_mode)})},[t]),A.useEffect(()=>{te(g)},[g]);const de=A.useMemo(()=>x?x(i):null,[x,i]),ee=()=>te(P=>P-1),G=()=>te(P=>P+1),ne=(P,V)=>{const z=W+P;z!==g&&(_(z),te(z)),o(V)},q=A.useMemo(()=>j?j(W-1):{},[W,j]),X=A.useMemo(()=>j?j(W):{},[W,j]),O=A.useMemo(()=>j?j(W+1):{},[W,j]),C=P=>{if(!P||!P.mon)return{number:0,year:0};const V=new Date(P.mon.dateObj);V.setHours(0,0,0,0),V.setDate(V.getDate()+3-(V.getDay()+6)%7);const z=new Date(V.getFullYear(),0,4);return{number:1+Math.round(((V.getTime()-z.getTime())/864e5-3+(z.getDay()+6)%7)/7),year:V.getFullYear()}},F=[{map:q,info:C(q),offset:-1,class:"past"},{map:X,info:C(X),offset:0,class:"current"},{map:O,info:C(O),offset:1,class:"future"}];return s?c.jsx("div",{className:"flex h-screen items-center justify-center text-white bg-black uppercase font-black tracking-widest",children:"Loading Legacy Tracker..."}):t?M!=="tracker"?c.jsxs("div",{className:"legacy-tracker-root font-sans fixed inset-0 z-50 bg-black text-white overflow-y-auto overscroll-contain",children:[c.jsx("div",{className:"sticky top-0 z-50 bg-[#101010] border-b border-[#333]",children:c.jsx(yf,{viewMode:M,setViewMode:D,activeTab:T,setActiveTab:B,onExit:n})}),c.jsx("div",{className:"min-h-full",children:M==="planner"?c.jsx(nw,{}):M==="settings"?c.jsx(sw,{}):c.jsx(iw,{})})]}):c.jsxs("div",{className:"legacy-tracker-root font-sans app-container",children:[c.jsx(yf,{viewMode:M,setViewMode:D,activeTab:T,setActiveTab:B,onExit:n}),H==="continuous"?c.jsx(p1,{weeks:F,currentDay:i,weekOffset:W,onDayClick:ne,onPrev:ee,onNext:G}):c.jsx(f1,{weekDates:d,weekNumber:p,year:m,currentDay:i,setCurrentDay:o,activeTab:T,currentDayData:null,onPrev:w,onNext:v}),T==="training"&&de&&c.jsx("div",{style:{background:"#101010",borderBottom:"1px solid #333",paddingBottom:"4px",flexShrink:0},children:c.jsx(up,{defaultTime:de.training.rest||60})}),c.jsxs("div",{className:"app-main",children:[c.jsx(aw,{}),de?c.jsxs(c.Fragment,{children:[T==="training"&&c.jsx(u1,{data:de.training,dayKey:i}),T==="nutrition"&&c.jsx(c1,{data:de.nutrition,dayKey:i}),T==="supplements"&&c.jsx(d1,{data:de.supplements,dayKey:i}),T==="data"&&c.jsx(_1,{})]}):c.jsx("div",{className:"p-8 text-center text-gray-500",children:c.jsx("p",{children:"No routine data."})})]})]}):c.jsx(t1,{})}const xw=({onExit:n})=>c.jsx($p,{children:c.jsx(ep,{children:c.jsx(ww,{onExit:n})})}),Df=n=>{let t;const s=new Set,i=(g,v)=>{const w=typeof g=="function"?g(t):g;if(!Object.is(w,t)){const _=t;t=v??(typeof w!="object"||w===null)?w:Object.assign({},t,w),s.forEach(x=>x(t,_))}},o=()=>t,p={setState:i,getState:o,getInitialState:()=>m,subscribe:g=>(s.add(g),()=>s.delete(g))},m=t=n(i,o,p);return p},bw=(n=>n?Df(n):Df),kw=n=>n;function Sw(n,t=kw){const s=Ut.useSyncExternalStore(n.subscribe,Ut.useCallback(()=>t(n.getState()),[n,t]),Ut.useCallback(()=>t(n.getInitialState()),[n,t]));return Ut.useDebugValue(s),s}const Pf=n=>{const t=bw(n),s=i=>Sw(t,i);return Object.assign(s,t),s},Up=(n=>n?Pf(n):Pf);function jw(n,t){let s;try{s=n()}catch{return}return{getItem:o=>{var u;const d=m=>m===null?null:JSON.parse(m,void 0),p=(u=s.getItem(o))!=null?u:null;return p instanceof Promise?p.then(d):d(p)},setItem:(o,u)=>s.setItem(o,JSON.stringify(u,void 0)),removeItem:o=>s.removeItem(o)}}const Vu=n=>t=>{try{const s=n(t);return s instanceof Promise?s:{then(i){return Vu(i)(s)},catch(i){return this}}}catch(s){return{then(i){return this},catch(i){return Vu(i)(s)}}}},Ew=(n,t)=>(s,i,o)=>{let u={storage:jw(()=>localStorage),partialize:k=>k,version:0,merge:(k,T)=>({...T,...k}),...t},d=!1,p=0;const m=new Set,g=new Set;let v=u.storage;if(!v)return n((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),s(...k)},i,o);const w=()=>{const k=u.partialize({...i()});return v.setItem(u.name,{state:k,version:u.version})},_=o.setState;o.setState=(k,T)=>(_(k,T),w());const x=n((...k)=>(s(...k),w()),i,o);o.getInitialState=()=>x;let j;const R=()=>{var k,T;if(!v)return;const B=++p;d=!1,m.forEach(D=>{var H;return D((H=i())!=null?H:x)});const M=((T=u.onRehydrateStorage)==null?void 0:T.call(u,(k=i())!=null?k:x))||void 0;return Vu(v.getItem.bind(v))(u.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==u.version){if(u.migrate){const H=u.migrate(D.state,D.version);return H instanceof Promise?H.then(K=>[!0,K]):[!0,H]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var H;if(B!==p)return;const[K,W]=D;if(j=u.merge(W,(H=i())!=null?H:x),s(j,!0),K)return w()}).then(()=>{B===p&&(M?.(j,void 0),j=i(),d=!0,g.forEach(D=>D(j)))}).catch(D=>{B===p&&M?.(void 0,D)})};return o.persist={setOptions:k=>{u={...u,...k},k.storage&&(v=k.storage)},clearStorage:()=>{v?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>R(),hasHydrated:()=>d,onHydrate:k=>(m.add(k),()=>{m.delete(k)}),onFinishHydration:k=>(g.add(k),()=>{g.delete(k)})},u.skipHydration||R(),j||x},zp=Ew,Tw=Up(zp((n,t)=>({activeSession:null,isSyncing:!1,startSession:s=>n({activeSession:{id:crypto.randomUUID(),date:s,startTime:new Date().toISOString(),blocks:[{id:"b1",label:"Strength Phase",block_type:"STANDARD",exercises:[{id:"e1",name:"Barbell Squats",target_sets:"3",target_reps:"5",target_weight:"100",target_rpe:"8",target_tempo:"3-0-1-0"}]},{id:"b2",label:"Core Burnout",block_type:"CIRCUIT",exercises:[{id:"e2",name:"Plank",target_reps:"60s",target_weight:"BW"},{id:"e3",name:"Leg Raises",target_reps:"15",target_weight:"BW"}]}],notes:""}}),endSession:()=>n(s=>({activeSession:s.activeSession?{...s.activeSession,endTime:new Date().toISOString()}:null})),logSet:(s,i,o,u,d)=>n(p=>p.activeSession?{}:p),resetStore:()=>n({activeSession:null,isSyncing:!1})}),{name:"mp-training-storage"})),Cw=({exercise:n,setNumber:t,roundNumber:s,isLogged:i,onLog:o,actualData:u={}})=>{const d=n.type==="Cardio"||["Running","Biking","Swimming","Walking"].some(p=>n.name.includes(p));return c.jsxs("div",{style:{backgroundColor:i?"#161d16":"#1a1a1a",padding:"12px 16px",borderRadius:"16px",border:`1px solid ${i?"#2ecc7144":"#333"}`,marginBottom:"8px",display:"flex",flexDirection:"column",gap:"8px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px"},children:[c.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"8px",overflow:"hidden"},children:[c.jsx("span",{style:{fontSize:"9px",fontWeight:"900",padding:"2px 6px",backgroundColor:i?"#2ecc71":"#333",color:i?"#000":"#888",borderRadius:"4px",textTransform:"uppercase",flexShrink:0},children:s?`R${s}`:`S${t}`}),c.jsx("h3",{style:{fontSize:"14px",fontWeight:"900",color:"#fff",margin:0,textTransform:"uppercase",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.name})]}),c.jsx("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:d?c.jsxs(c.Fragment,{children:[c.jsx(oi,{label:"TIME",value:n.target_time}),c.jsx(oi,{label:"INT",value:n.target_intensity})]}):c.jsxs(c.Fragment,{children:[c.jsx(oi,{label:"KG",value:n.target_weight}),c.jsx(oi,{label:"REPS",value:n.target_reps}),c.jsx(oi,{label:"RPE",value:n.target_rpe})]})})]}),c.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[d?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",className:"premium-input",style:{height:"38px",fontSize:"16px",flex:1.5},placeholder:"Time"}),c.jsx("input",{type:"number",className:"premium-input",style:{height:"38px",fontSize:"16px",flex:1},placeholder:"HR"})]}):c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"number",className:"premium-input",style:{height:"38px",fontSize:"16px",flex:1.2},placeholder:"Kg"}),c.jsx("input",{type:"number",className:"premium-input",style:{height:"38px",fontSize:"16px",flex:1},placeholder:"R"}),c.jsx("input",{type:"number",className:"premium-input",style:{height:"38px",fontSize:"16px",flex:1,borderStyle:"dashed"},placeholder:"RPE"})]}),c.jsx("button",{onClick:()=>o({}),style:{all:"unset",cursor:"pointer",flexShrink:0,backgroundColor:i?"#2ecc71":"#222",color:i?"#000":"#f29b11",width:"44px",height:"38px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"10px",border:i?"none":"1px solid #333"},children:c.jsx(vi,{size:20,strokeWidth:4})})]})]})},oi=({label:n,value:t})=>t?c.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"2px"},children:[c.jsxs("span",{style:{fontSize:"8px",fontWeight:"900",color:"#f29b11",textTransform:"uppercase"},children:[n,":"]}),c.jsx("span",{style:{fontSize:"12px",fontWeight:"900",color:"#fff"},children:t})]}):null,Nw=({block:n})=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(ip,{size:14})," ",n.label||"CIRCUIT"]}),[...Array(3)].map((s,i)=>c.jsxs("div",{style:{marginBottom:"25px"},children:[c.jsxs("div",{style:{fontSize:"10px",fontWeight:"900",color:"#444",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"10px",borderBottom:"1px solid #222",paddingBottom:"4px"},children:["Round ",i+1]}),c.jsx("div",{children:n.exercises.map(o=>c.jsx(Cw,{exercise:o,roundNumber:i+1,onLog:()=>{}},`${i}-${o.id}`))})]},i))]}),Rw=({exercise:n})=>{const[t,s]=A.useState([]),i=parseInt(n.target_sets||3),o=t.length+1,u=()=>{t.length>=i||s([...t,{id:Date.now(),weight:n.target_weight||"0",reps:n.target_reps||"0",rpe:n.target_rpe||"0"}])};return c.jsxs("div",{style:{padding:"0 0 4px 0",marginBottom:"8px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:"2px",borderBottom:"1px solid #222",paddingBottom:"2px"},children:[c.jsx("h3",{style:{fontSize:"14px",fontWeight:"900",color:"#fff",margin:0,textTransform:"uppercase",letterSpacing:"-0.5px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1,marginRight:"10px"},children:n.name}),c.jsxs("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:[c.jsx(Ha,{label:"KG",value:n.target_weight}),c.jsx(Ha,{label:"REPS",value:n.target_reps}),c.jsx(Ha,{label:"RPE",value:n.target_rpe}),c.jsx(Ha,{label:"TEMPO",value:n.target_tempo})]})]}),c.jsxs("div",{style:{textAlign:"center",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"baseline",gap:"6px"},children:[c.jsx("span",{style:{fontSize:"24px",fontWeight:"900",color:"#fff"},children:o>i?i:o}),c.jsx("span",{style:{fontSize:"24px",fontWeight:"900",color:"#fff",opacity:.2},children:"/"}),c.jsx("span",{style:{fontSize:"24px",fontWeight:"900",color:"#fff"},children:i}),c.jsx("span",{style:{fontSize:"9px",fontWeight:"900",color:"#f29b11",textTransform:"uppercase",letterSpacing:"1px",marginLeft:"2px"},children:"SETS"})]}),t.length<i&&c.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",marginBottom:"2px"},children:[c.jsx("input",{type:"number",className:"premium-input",style:{height:"36px",fontSize:"16px",flex:1.2},placeholder:"Kg"}),c.jsx("input",{type:"number",className:"premium-input",style:{height:"36px",fontSize:"16px",flex:1},placeholder:"R"}),c.jsx("input",{type:"number",className:"premium-input",style:{height:"36px",fontSize:"16px",flex:1,borderStyle:"dashed"},placeholder:"RPE"}),c.jsx("button",{onClick:u,style:{all:"unset",cursor:"pointer",backgroundColor:"#222",color:"#f29b11",width:"44px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",border:"1px solid #333"},children:c.jsx(vi,{size:20,strokeWidth:4})})]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px",marginTop:"2px"},children:t.map((d,p)=>c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 12px",backgroundColor:"#161d16",borderRadius:"6px",border:"1px solid #2ecc7111"},children:[c.jsxs("span",{style:{fontSize:"8px",fontWeight:"900",color:"#2ecc71",textTransform:"uppercase"},children:["SET ",p+1]}),c.jsxs("div",{style:{display:"flex",gap:"12px"},children:[c.jsxs("span",{style:{fontSize:"11px",fontWeight:"900",color:"#fff"},children:[d.weight,"kg"]}),c.jsxs("span",{style:{fontSize:"11px",fontWeight:"900",color:"#fff"},children:[d.reps," reps"]}),c.jsxs("span",{style:{fontSize:"11px",fontWeight:"900",color:"#2ecc71"},children:["RPE ",d.rpe]})]}),c.jsx(vi,{size:10,color:"#2ecc71",strokeWidth:3})]},d.id))})]})},Ha=({label:n,value:t})=>t?c.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"2px"},children:[c.jsxs("span",{style:{fontSize:"8px",fontWeight:"900",color:"#f29b11",textTransform:"uppercase"},children:[n,":"]}),c.jsx("span",{style:{fontSize:"13px",fontWeight:"900",color:"#fff"},children:t})]}):null,Ow=({block:n})=>c.jsxs("div",{children:[c.jsxs("div",{className:"section-header",style:{marginBottom:"12px"},children:[c.jsx(Lv,{size:14})," ",n.label||"STRENGTH BLOCK"]}),c.jsx("div",{style:{display:"flex",flexDirection:"column"},children:n.exercises.map(t=>c.jsx(Rw,{exercise:t},t.id))})]}),Dw=({block:n,index:t,totalBlocks:s})=>c.jsx("div",{children:n.block_type==="CIRCUIT"?c.jsx(Nw,{block:n}):c.jsx(Ow,{block:n})}),Pw=({onExit:n})=>{const{activeSession:t,startSession:s,resetStore:i}=Tw();return c.jsx("div",{className:"app-container-v2",style:{paddingTop:"10px"},children:c.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto"},children:[c.jsxs("header",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[c.jsx("button",{onClick:n,style:{all:"unset",cursor:"pointer",padding:"5px"},children:c.jsx(np,{size:24,color:"#f29b11"})}),c.jsxs("h1",{style:{flex:1,textAlign:"center",fontSize:"18px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"2px",marginRight:"34px"},children:["Regimen ",c.jsx("span",{style:{color:"#f29b11"},children:"Pro"})]})]}),t?c.jsxs("div",{style:{paddingBottom:"80px"},children:[c.jsx("div",{className:"premium-card",style:{padding:"8px 15px",marginBottom:"8px"},children:c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsx("p",{style:{fontSize:"9px",color:"#666",fontWeight:"800",textTransform:"uppercase",margin:0},children:"Active Session"}),c.jsx("p",{style:{fontSize:"12px",fontWeight:"bold",margin:0},children:new Date(t.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c.jsx("button",{onClick:i,style:{all:"unset",cursor:"pointer",color:"#ef4444"},children:c.jsx(eo,{size:18})})]})}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:t.blocks.map((o,u)=>c.jsx("div",{className:"premium-card",style:{padding:"8px 12px"},children:c.jsx(Dw,{block:o,index:u,totalBlocks:t.blocks.length})},o.id))})]}):c.jsxs("div",{className:"premium-card",style:{textAlign:"center",padding:"30px 20px"},children:[c.jsx("div",{style:{width:"50px",height:"50px",backgroundColor:"#252525",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 15px"},children:c.jsx(tp,{size:24,color:"#f29b11"})}),c.jsx("h2",{style:{fontSize:"16px",fontWeight:"900",textTransform:"uppercase",marginBottom:"4px"},children:"Ready to Train?"}),c.jsx("p",{style:{fontSize:"12px",color:"#666",marginBottom:"20px"},children:"Your session is ready."}),c.jsx("button",{className:"premium-btn-primary",style:{width:"80%",padding:"12px"},onClick:()=>s(new Date().toISOString().split("T")[0]),children:"Start Session"})]})]})})},Aw=Up(zp((n,t)=>({logs:[],isSyncing:!1,addLog:async(s,i,o,u)=>{const d={user_id:s,measured_at:new Date().toISOString(),metrics:{bp_sys:i,bp_dia:o,hr:u}};n(p=>({logs:[d,...p.logs]}));try{const{error:p}=await ue.from("health_metrics").insert([{user_id:s,metric_type:"BP_SYS",value:i},{user_id:s,metric_type:"BP_DIA",value:o},{user_id:s,metric_type:"HR",value:u}]);if(p)throw p}catch(p){console.error("Health Sync Error:",p)}},fetchLogs:async s=>{n({isSyncing:!0});try{const{data:i,error:o}=await ue.from("health_metrics").select("*").eq("user_id",s).order("measured_at",{ascending:!1}).limit(50);if(o)throw o;const u=i.reduce((d,p)=>{const m=p.measured_at.split("T")[0];return d[m]||(d[m]={measured_at:p.measured_at,metrics:{}}),d[m].metrics[p.metric_type.toLowerCase()]=p.value,d},{});n({logs:Object.values(u),isSyncing:!1})}catch(i){console.error("Health Fetch Error:",i),n({isSyncing:!1})}},getAverageMetrics:()=>{const s=t().logs;if(s.length===0)return null;const i=s.reduce((o,u)=>({sys:o.sys+(u.metrics?.bp_sys||0),dia:o.dia+(u.metrics?.bp_dia||0)}),{sys:0,dia:0});return{sys:Math.round(i.sys/s.length),dia:Math.round(i.dia/s.length)}}}),{name:"mp-health-storage"})),Iw=({onExit:n})=>{const{session:t}=gt(),{logs:s,addLog:i,fetchLogs:o,isSyncing:u}=Aw(),[d,p]=A.useState(120),[m,g]=A.useState(80),[v,w]=A.useState(70);A.useEffect(()=>{t?.user?.id&&o(t.user.id)},[t]);const _=async()=>{t?.user?.id&&await i(t.user.id,d,m,v)};return c.jsx("div",{className:"app-container-v2",children:c.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto"},children:[c.jsxs("header",{style:{display:"flex",alignItems:"center",marginBottom:"30px"},children:[c.jsx("button",{onClick:n,style:{all:"unset",cursor:"pointer",padding:"10px"},children:c.jsx(np,{size:24,color:"#f29b11"})}),c.jsxs("h1",{style:{flex:1,textAlign:"center",fontSize:"20px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"2px",marginRight:"44px"},children:["Health ",c.jsx("span",{style:{color:"#f29b11"},children:"Tracker"})]})]}),c.jsxs("div",{className:"premium-card",children:[c.jsxs("div",{className:"section-header",children:[c.jsx($v,{size:14,fill:"#f29b11"})," NEW RECORDING"]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"15px",marginTop:"20px"},children:[c.jsxs("div",{className:"premium-input-group",children:[c.jsx("label",{className:"premium-input-label",children:"SYS"}),c.jsx("input",{type:"number",className:"premium-input",value:d,onChange:x=>p(x.target.value)})]}),c.jsxs("div",{className:"premium-input-group",children:[c.jsx("label",{className:"premium-input-label",children:"DIA"}),c.jsx("input",{type:"number",className:"premium-input",value:m,onChange:x=>g(x.target.value)})]}),c.jsxs("div",{className:"premium-input-group",children:[c.jsx("label",{className:"premium-input-label",children:"PULSE"}),c.jsx("input",{type:"number",className:"premium-input",value:v,onChange:x=>w(x.target.value)})]})]}),c.jsx("button",{className:"premium-btn-primary",onClick:_,disabled:u,children:u?"SYNCING...":"SAVE TO CLOUD"})]}),c.jsxs("div",{className:"premium-card",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(sp,{size:14})," RECENT TRENDS"]}),c.jsx("div",{style:{marginTop:"15px"},children:s.length===0?c.jsx("p",{style:{textAlign:"center",color:"#666",fontSize:"12px"},children:"No logs recorded."}):s.slice(0,5).map((x,j)=>c.jsxs("div",{className:"premium-list-row",children:[c.jsxs("div",{children:[c.jsxs("p",{style:{fontSize:"13px",fontWeight:"bold",margin:0},children:[x.metrics?.bp_sys,"/",x.metrics?.bp_dia]}),c.jsx("p",{style:{fontSize:"9px",color:"#666",textTransform:"uppercase",fontWeight:"800"},children:new Date(x.measured_at).toLocaleDateString()})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("p",{style:{fontSize:"13px",fontWeight:"black",color:"#f29b11",margin:0},children:x.metrics?.hr}),c.jsx("p",{style:{fontSize:"9px",color:"#666",textTransform:"uppercase",fontWeight:"800"},children:"BPM"})]})]},j))})]}),c.jsx("button",{className:"premium-btn-secondary",onClick:n,style:{marginTop:"20px"},children:"Return to Hub"})]})})},Lw=()=>{const[n,t]=A.useState("hub"),s=()=>t("hub");switch(n){case"legacy":return c.jsx(xw,{onExit:s});case"bp":return c.jsx(Iw,{onExit:s});case"regimen":return c.jsx(Pw,{onExit:s});default:return c.jsx(e1,{setActiveApp:t})}};$m.createRoot(document.getElementById("root")).render(c.jsx(Ut.StrictMode,{children:c.jsx($p,{children:c.jsx(ep,{children:c.jsx(Lw,{})})})}));
